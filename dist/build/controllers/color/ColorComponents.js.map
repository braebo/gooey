{"version":3,"file":"ColorComponents.js","sources":["../../../../../src/controllers/color/ColorComponents.ts"],"sourcesContent":["import type { ColorMode, InputColor } from '../../inputs/InputColor'\n\nimport { parseColorFormat } from '../../shared/color/color'\nimport { NumberController } from '../NumberController'\nimport { Select } from '../Select'\n\nimport { disableable, type Disableable } from '../../shared/decorators/disableable-class-decorator'\nimport { EventManager } from '../../shared/EventManager'\nimport { entries } from '../../shared/object'\nimport { create } from '../../shared/create'\nimport { Logger } from '../../shared/logger'\n\nexport interface ColorComponentsOptions {\n\tcontainer?: HTMLDivElement\n\tdisabled: boolean | (() => boolean)\n}\n\nexport const COLOR_PICKER_DEFAULTS = {\n\tdisabled: false,\n} as const satisfies ColorComponentsOptions\n\nexport type ColorComponentsElements = {\n\tcontainer: HTMLDivElement\n\ttitle: HTMLDivElement\n\tselect: Select<ColorMode>['elements']\n\tnumbers: {\n\t\ta: HTMLInputElement\n\t\tb: HTMLInputElement\n\t\tc: HTMLInputElement\n\t\td: HTMLInputElement\n\t}\n\ttext: HTMLInputElement\n}\n\n// export class ColorComponents extends Controller<ColorMode, ColorComponentsElements> {\n\nexport interface ColorComponents extends Disableable {}\n\n@disableable\nexport class ColorComponents {\n\topts: ColorComponentsOptions\n\telement: HTMLDivElement\n\telements: ColorComponentsElements\n\tselect: Select<ColorMode>\n\n\tprivate _evm = new EventManager()\n\tprivate _mode: ColorMode\n\t/**\n\t * Used to prevent inputs from being refreshed externally after they're updated internally.\n\t */\n\tprivate _locked = false\n\tprivate _log: Logger\n\n\tconstructor(\n\t\tpublic input: InputColor,\n\t\toptions?: Partial<ColorComponentsOptions>,\n\t) {\n\t\tconst opts = { ...COLOR_PICKER_DEFAULTS, ...options }\n\t\tthis._log = new Logger(`ColorComponents ${input.title}`, { fg: 'wheat' })\n\n\t\tthis.opts = opts\n\t\tthis._mode = input.mode\n\n\t\tconst parent = opts.container ?? input.elements.controllers.container\n\n\t\tconst componentsContainer = create('div', {\n\t\t\tclasses: ['gooey-input-color-components-container'],\n\t\t\tparent: parent,\n\t\t})\n\t\tthis.element = componentsContainer\n\n\t\tconst selectContainer = create('div', {\n\t\t\tclasses: ['gooey-input-color-components-select-container'],\n\t\t\tparent: componentsContainer,\n\t\t})\n\n\t\tthis.select = new Select<ColorMode>({\n\t\t\tinput: this.input,\n\t\t\t// disabled: this.opts.disabled,\n\t\t\tdisabled: this.disabled,\n\t\t\tcontainer: selectContainer,\n\t\t\toptions: ['hex', 'hex8', 'rgba', 'hsla', 'hsva'],\n\t\t})\n\t\tthis.select.on('change', v => {\n\t\t\tthis.updateMode(v.value)\n\t\t})\n\n\t\tconst numbersContainer = create('div', {\n\t\t\tclasses: ['gooey-input-color-components-numbers-container'],\n\t\t\tparent: componentsContainer,\n\t\t})\n\n\t\tconst numbers = {\n\t\t\ta: new NumberController(this.input, this.input.opts, numbersContainer).element,\n\t\t\tb: new NumberController(this.input, this.input.opts, numbersContainer).element,\n\t\t\tc: new NumberController(this.input, this.input.opts, numbersContainer).element,\n\t\t\td: new NumberController(this.input, this.input.opts, numbersContainer).element,\n\t\t}\n\n\t\tnumbers.a.classList.add('a')\n\t\tnumbers.b.classList.add('b')\n\t\tnumbers.c.classList.add('c')\n\t\tnumbers.d.classList.add('d')\n\n\t\tfor (const [k, v] of entries(numbers)) {\n\t\t\tconst update = () => {\n\t\t\t\tthis[k] = +v.value\n\t\t\t\tthis.input.set(this.color)\n\t\t\t}\n\n\t\t\tif (this.#modeType() === 'text') {\n\t\t\t\tv.classList.add('visible')\n\t\t\t}\n\n\t\t\tthis._evm.listen(v, 'input', update)\n\t\t}\n\n\t\tconst text = create('input', {\n\t\t\tclasses: [\n\t\t\t\t'gooey-controller',\n\t\t\t\t'gooey-controller-text',\n\t\t\t\t'gooey-input-color-components-text',\n\t\t\t],\n\t\t\tparent: componentsContainer,\n\t\t})\n\t\tthis._evm.listen(text, 'change', (e: Event) => {\n\t\t\tconst target = e.target as HTMLInputElement\n\t\t\tlet format = parseColorFormat(target.value)\n\t\t\tif (!format) return\n\n\t\t\t// We need to make the first character lowercase to match the format names.\n\t\t\tformat = format[0].toLowerCase() + format.slice(1)\n\t\t\t// @ts-ignore fuck off\n\t\t\tthis.input.set(target.value)\n\t\t})\n\n\t\tif (this.#modeType() === 'text') {\n\t\t\ttext.classList.add('visible')\n\t\t}\n\n\t\tthis.elements = {\n\t\t\tcontainer: componentsContainer,\n\t\t\ttitle: selectContainer,\n\t\t\tselect: this.select.elements,\n\t\t\tnumbers,\n\t\t\ttext,\n\t\t}\n\n\t\tthis.mode = this._mode\n\n\t\tif (typeof options?.disabled !== 'undefined') {\n\t\t\tthis.disabled = options.disabled\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this.input.state.value\n\t}\n\n\tget mode() {\n\t\treturn this._mode\n\t}\n\tset mode(v: ColorMode) {\n\t\tthis._log.fn(`set mode`, v).debug()\n\t\tthis._mode = v\n\n\t\tthis.select.selected = v\n\t}\n\n\tupdateMode = (v = this.mode) => {\n\t\tthis._log.fn(`updateMode`, v).debug()\n\t\tthis._mode = v\n\t\tif (this.#modeType() === 'text') {\n\t\t\tthis.elements.text.classList.add('visible')\n\t\t\tfor (const [, v] of entries(this.elements.numbers)) {\n\t\t\t\tv.classList.remove('visible')\n\t\t\t}\n\t\t\tthis.#refreshText()\n\t\t} else {\n\t\t\tthis.elements.text.classList.remove('visible')\n\t\t\tfor (const [, v] of entries(this.elements.numbers)) {\n\t\t\t\tv.classList.add('visible')\n\t\t\t}\n\n\t\t\tif (this.mode === 'rgba') {\n\t\t\t\tthis.#setProps(this.elements.numbers.a, { min: 0, max: 255, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.b, { min: 0, max: 255, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.c, { min: 0, max: 255, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.d, { min: 0, max: 1, step: 0.01 })\n\t\t\t}\n\n\t\t\tif (['hsla', 'hsva'].includes(this.mode)) {\n\t\t\t\tthis.#setProps(this.elements.numbers.a, { min: 0, max: 360, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.b, { min: 0, max: 100, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.c, { min: 0, max: 100, step: 1 })\n\t\t\t\tthis.#setProps(this.elements.numbers.d, { min: 0, max: 1, step: 0.01 })\n\t\t\t}\n\n\t\t\tthis.elements.select.selected.innerHTML = [...v]\n\t\t\t\t.map((c, i) => `<span class=\"${['a', 'b', 'c', 'd'][i]}\">${c}</span>`)\n\t\t\t\t.join('')\n\t\t}\n\n\t\tthis.refresh()\n\t}\n\n\t#setProps = (el: HTMLInputElement, props: { min: number; max: number; step: number }) => {\n\t\tthis._log.fn(`#setProps`, el, props).debug()\n\t\tfor (const [k, v] of entries(props)) {\n\t\t\tel[k] = String(v)\n\t\t}\n\t}\n\n\tget a() {\n\t\treturn this.mode === 'rgba' ? this.color.rgba.r : this.color.hsla.h\n\t}\n\tset a(v: number) {\n\t\tif (this.mode === 'rgba') {\n\t\t\tthis.color.red = v\n\t\t} else {\n\t\t\tthis.color.hue = v\n\t\t}\n\t\tthis._locked = true\n\t\tthis.input.refresh()\n\t}\n\n\tget b() {\n\t\treturn this.mode === 'rgba' ? this.color.rgba.g : this.color.hsla.s\n\t}\n\tset b(v: number) {\n\t\tif (this.mode === 'rgba') {\n\t\t\tthis.color.green = v\n\t\t} else {\n\t\t\tthis.color.saturation = v\n\t\t}\n\t\tthis._locked = true\n\t\tthis.input.refresh()\n\t}\n\n\tget c() {\n\t\tswitch (this.mode) {\n\t\t\tcase 'rgba':\n\t\t\t\treturn this.color.blue\n\t\t\tcase 'hsla':\n\t\t\t\treturn this.color.lightness\n\t\t\tcase 'hsva':\n\t\t\tdefault:\n\t\t\t\treturn this.color.value\n\t\t}\n\t}\n\tset c(v: number) {\n\t\tif (this.mode === 'rgba') {\n\t\t\tthis.color.blue = v\n\t\t} else if (this.mode === 'hsla') {\n\t\t\tthis.color.lightness = v\n\t\t} else if (this.mode === 'hsva') {\n\t\t\tthis.color.value = v\n\t\t}\n\t\tthis._locked = true\n\t\tthis.input.refresh()\n\t}\n\n\tget d() {\n\t\treturn this.color.alpha\n\t}\n\tset d(v: number) {\n\t\tthis.color.alpha = v\n\t\tthis._locked = true\n\t\tthis.input.refresh()\n\t}\n\n\t#modeType(): 'text' | 'numbers' {\n\t\tif (['rgba', 'hsla', 'hsva'].includes(this.mode)) {\n\t\t\treturn 'numbers'\n\t\t}\n\n\t\treturn 'text'\n\t}\n\n\t#refreshText = () => {\n\t\tthis.elements.text.value =\n\t\t\t// @ts-ignore fuck off\n\t\t\tthis.color[this.mode.startsWith('hex') ? this.mode + 'String' : this.mode]\n\t}\n\n\t#lastColor: string | undefined\n\t#lastMode: ColorMode | undefined\n\n\t/**\n\t * Updates the UI to reflect the current state of the source color.\n\t */\n\trefresh = () => {\n\t\tthis._log.fn('refresh').debug()\n\t\tconst color = this.input.state.value.hex8String\n\t\tconst mode = this.mode\n\t\tif (this.#lastColor === color && mode === this.#lastMode) {\n\t\t\treturn this\n\t\t}\n\n\t\tthis.#lastColor = color\n\t\tthis.#lastMode = mode\n\n\t\tif (this._locked) {\n\t\t\tthis._locked = false\n\t\t\treturn this\n\t\t}\n\n\t\tif (this.#modeType() === 'text') {\n\t\t\tthis.#refreshText()\n\t\t} else {\n\t\t\tthis.elements.numbers.a.value = String(this.a)\n\t\t\tthis.elements.numbers.b.value = String(this.b)\n\t\t\tthis.elements.numbers.c.value = String(this.c)\n\t\t\tthis.elements.numbers.d.value = String(this.d)\n\t\t}\n\n\t\treturn this\n\t}\n\n\tdisable() {\n\t\tif (!this.disabled) this.disabled = true\n\t\tthis.select.disable()\n\t\tthis.elements.text.disabled = true\n\t\tfor (const [, v] of entries(this.elements.numbers)) {\n\t\t\tv.disabled = true\n\t\t}\n\t\treturn this\n\t}\n\n\tenable() {\n\t\tif (this.disabled) this.disabled = false\n\t\tthis.select.enable()\n\t\tthis.elements.text.disabled = false\n\t\tfor (const [, v] of entries(this.elements.numbers)) {\n\t\t\tv.disabled = false\n\t\t}\n\t\treturn this\n\t}\n\n\tdispose() {\n\t\tthis.elements.title.remove()\n\t\tthis.elements.numbers.a.remove()\n\t\tthis.elements.numbers.b.remove()\n\t\tthis.elements.numbers.c.remove()\n\t\tthis.elements.container.remove()\n\t\tthis.elements.text.remove()\n\t\tthis.select.dispose()\n\t\tthis._evm.dispose()\n\t}\n}\n"],"names":[],"mappings":"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"}