{"version":3,"file":"NumberButtonsController.js","sources":["../../../../src/controllers/NumberButtonsController.ts"],"sourcesContent":["import type { InputNumber, NumberInputOptions } from '../inputs/InputNumber'\n\nimport { svgChevron } from '../svg/chevronSvg'\nimport { create } from '../shared/create'\n\nexport class NumberButtonsController {\n\telements = {} as {\n\t\tcontainer: HTMLDivElement\n\t\tincrement: HTMLDivElement\n\t\tdecrement: HTMLDivElement\n\t}\n\n\tconstructor(\n\t\tpublic input: InputNumber,\n\t\tpublic opts: NumberInputOptions,\n\t\tpublic parent?: HTMLElement,\n\t) {\n\t\tthis.elements.container = create('div', {\n\t\t\tclasses: ['gooey-input-number-buttons-container'],\n\t\t\tparent,\n\t\t})\n\n\t\tthis.elements.increment = create('div', {\n\t\t\tclasses: [\n\t\t\t\t'gooey-controller',\n\t\t\t\t'gooey-input-number-button',\n\t\t\t\t'gooey-input-number-buttons-increment',\n\t\t\t],\n\t\t\tparent: this.elements.container,\n\t\t})\n\t\tthis.elements.increment.appendChild(svgChevron())\n\t\tinput.listen(this.elements.increment, 'pointerdown', this.rampChangeUp.bind(this))\n\n\t\tthis.elements.decrement = create('div', {\n\t\t\tclasses: [\n\t\t\t\t'gooey-controller',\n\t\t\t\t'gooey-input-number-button',\n\t\t\t\t'gooey-input-number-buttons-decrement',\n\t\t\t],\n\t\t\tparent: this.elements.container,\n\t\t})\n\t\tconst upsideDownChevron = svgChevron()\n\t\tupsideDownChevron.setAttribute('style', 'transform: rotate(180deg)')\n\t\tthis.elements.decrement.appendChild(upsideDownChevron)\n\t\tinput.listen(this.elements.decrement, 'pointerdown', this.rampChangeDown.bind(this))\n\t}\n\n\trampChange(direction = 1) {\n\t\tconst step = 'step' in this.opts ? (this.opts.step as number) : 1\n\n\t\tlet delay = 300\n\t\tlet stop = false\n\t\tlet delta = 0\n\t\tlet timeout: ReturnType<typeof setTimeout>\n\n\t\tconst change = () => {\n\t\t\tclearTimeout(timeout)\n\t\t\tif (stop) return\n\n\t\t\tdelta += delay\n\t\t\tif (delta > 1000) {\n\t\t\t\tdelay /= 2\n\t\t\t\tdelta = 0\n\t\t\t}\n\n\t\t\tthis.input.set(this.input.state.value + step * direction)\n\t\t\ttimeout = setTimeout(change, delay)\n\t\t}\n\n\t\tconst stopChanging = () => {\n\t\t\tstop = true\n\t\t\twindow.removeEventListener('pointerup', stopChanging)\n\t\t\twindow.removeEventListener('pointercancel', stopChanging)\n\t\t}\n\n\t\twindow.addEventListener('pointercancel', stopChanging, { once: true })\n\t\twindow.addEventListener('pointerup', stopChanging, { once: true })\n\n\t\tchange()\n\t}\n\n\trampChangeUp() {\n\t\tthis.rampChange(1)\n\t}\n\n\trampChangeDown() {\n\t\tthis.rampChange(-1)\n\t}\n}\n"],"names":[],"mappings":"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"}