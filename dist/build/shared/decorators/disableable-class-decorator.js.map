{"version":3,"file":"disableable-class-decorator.js","sources":["../../../../../src/shared/decorators/disableable-class-decorator.ts"],"sourcesContent":["import { toFn } from '../toFn'\n\ntype Constructor<T = any> = new (...args: any[]) => T\n\nexport interface Disableable {\n\t/**\n\t * Whether the controller is disabled.  Assign it to a function to\n\t * dynamically determine the disabled state.  Reading it will always\n\t * return a boolean.\n\t */\n\tget disabled(): boolean\n\tset disabled(value: boolean | (() => boolean))\n}\n\n/**\n * A class decorator that adds a `disabled` property to a class that implements an `enable` and\n * disable` method. The `disabled` property can be set to either a static boolean, or a function\n * that returns a boolean value.  The `disabled` state can be refreshed by assigning it to itself,\n * which is particularly useful when passing a function that depends on some external state.\n *\n * A private property, a getter, and a setter are added to the class:\n * - `private _disabled: () => boolean` - The internal function that determines the disabled state.\n * - `get disabled(): boolean` - The current disabled state.\n * - `set disabled(boolean | (() => boolean))` - Set the disabled state to either a static boolean or a\n *  function that returns a boolean.\n */\nexport function disableable<T extends Constructor<{ enable(): void; disable(): void }>>(\n\tconstructor: T,\n): T & Constructor<Disableable> {\n\tlet disabled = () => false\n\treturn class extends constructor {\n\t\tget disabled(): boolean {\n\t\t\treturn disabled()\n\t\t}\n\t\tset disabled(value: boolean | (() => boolean)) {\n\t\t\tdisabled = toFn(value)\n\t\t\tdisabled() ? this.disable() : this.enable()\n\t\t}\n\t}\n}\n"],"names":[],"mappings":";;AAcA;;;;;;;;;;;AAWG;AACG,SAAU,WAAW,CAC1B,WAAc,EAAA;AAEd,IAAA,IAAI,QAAQ,GAAG,MAAM,KAAK,CAAA;IAC1B,OAAO,cAAc,WAAW,CAAA;AAC/B,QAAA,IAAI,QAAQ,GAAA;YACX,OAAO,QAAQ,EAAE,CAAA;SACjB;QACD,IAAI,QAAQ,CAAC,KAAgC,EAAA;AAC5C,YAAA,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAA;AACtB,YAAA,QAAQ,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;SAC3C;KACD,CAAA;AACF;;;;"}