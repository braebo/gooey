{"version":3,"file":"styled.js","sources":["../../../../../src/shared/decorators/styled.ts"],"sourcesContent":["import { create } from '../create'\n\nexport interface Styled {\n\tinitialized: boolean\n\tstylesheet: HTMLStyleElement\n}\n\n/**\n * A class decorator that creates a style element in the head of the document when the class is\n * instantiated.  The style element is created with the `style` property of the class.  The style\n * element is only created once, and subsequent instantiations of the class will not create another\n * style element.\n */\nexport function styled<T extends { new (...args: any[]): {}; style: string }>(\n\tconstructor: T,\n): T & Styled {\n\treturn class extends constructor {\n\t\tstatic initialized = false\n\t\tstatic stylesheet: HTMLStyleElement\n\n\t\tconstructor(...args: any[]) {\n\t\t\tsuper(...args)\n\n\t\t\tif (typeof globalThis.document !== 'undefined') {\n\t\t\t\tconst dis = this.constructor as typeof constructor & {\n\t\t\t\t\tinitialized: boolean\n\t\t\t\t\tstylesheet?: HTMLStyleElement\n\t\t\t\t}\n\n\t\t\t\tif (!dis.style || dis.initialized) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tdis.initialized = true\n\n\t\t\t\tdis.stylesheet ??= create('style', {\n\t\t\t\t\tparent: document.head,\n\t\t\t\t\tinnerHTML: dis.style,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthrow new Error('@styled components can only be used in the browser')\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":[],"mappings":";;AAOA;;;;;AAKG;AACG,SAAU,MAAM,CACrB,WAAc,EAAA;IAEd,OAAO,cAAc,WAAW,CAAA;AAC/B,QAAA,OAAO,WAAW,GAAG,KAAK,CAAA;QAC1B,OAAO,UAAU,CAAkB;AAEnC,QAAA,WAAA,CAAY,GAAG,IAAW,EAAA;AACzB,YAAA,KAAK,CAAC,GAAG,IAAI,CAAC,CAAA;AAEd,YAAA,IAAI,OAAO,UAAU,CAAC,QAAQ,KAAK,WAAW,EAAE;AAC/C,gBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,WAGhB,CAAA;gBAED,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,WAAW,EAAE;oBAClC,OAAM;iBACN;AAED,gBAAA,GAAG,CAAC,WAAW,GAAG,IAAI,CAAA;AAEtB,gBAAA,GAAG,CAAC,UAAU,KAAK,MAAM,CAAC,OAAO,EAAE;oBAClC,MAAM,EAAE,QAAQ,CAAC,IAAI;oBACrB,SAAS,EAAE,GAAG,CAAC,KAAK;AACpB,iBAAA,CAAC,CAAA;aACF;iBAAM;AACN,gBAAA,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAA;aACrE;SACD;KACD,CAAA;AACF;;;;"}