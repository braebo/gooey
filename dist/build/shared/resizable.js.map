{"version":3,"file":"resizable.js","sources":["../../../../src/shared/resizable.ts"],"sourcesContent":["import type { ElementOrSelector, ElementsOrSelectors } from './select'\nimport type { State } from './state'\n\n// import { collisionClampX, collisionClampY } from './collisions'\nimport { deepMergeOpts } from './deepMergeOpts'\nimport { nanoid } from './nanoid'\nimport { Logger } from './logger'\nimport { select } from './select'\nimport { state } from './state'\nimport { clamp } from './clamp'\n\n/**\n * Represents a dom element's bounding rectangle.\n */\nexport interface VirtualRect {\n\tleft: number\n\ttop: number\n\tright: number\n\tbottom: number\n}\n\n/**\n * The sides of an element that can be resized by the {@link resizable} action.\n */\nexport type Side = 'top' | 'right' | 'bottom' | 'left'\n\n/**\n * The corners of an element that can be resized by the {@link resizable} action.\n * @see {@link Side}\n */\nexport type Corner = 'top-left' | 'top-right' | 'bottom-right' | 'bottom-left'\n\n/**\n * Options for the {@link resizable} action.\n */\nexport interface ResizableOptions {\n\t__type?: 'ResizableOptions'\n\n\t/**\n\t * To only allow resizing on certain sides, specify them here.\n\t * @default ['right', 'bottom']\n\t */\n\tsides: Side[]\n\n\t/**\n\t * To only allow resizing on certain corners, specify them here.\n\t * @default ['bottom-right']\n\t */\n\tcorners: ('top-left' | 'top-right' | 'bottom-right' | 'bottom-left')[]\n\n\t/**\n\t * The size of the resize handle in pixels.\n\t * @default 6\n\t */\n\tgrabberSize: number\n\n\t/**\n\t * Optional callback function that runs when the element is resized.\n\t * @default () => void\n\t */\n\tonResize: (size: { width: number; height: number }) => void\n\n\t/**\n\t * If provided, the size of the element will be persisted\n\t * to local storage under the specified key.\n\t * @default undefined\n\t */\n\tlocalStorageKey?: string\n\n\t/**\n\t * Use a visible or invisible gutter.\n\t * @default false\n\t */\n\tvisible: boolean\n\n\t/**\n\t * Gutter css color (if visible = `true`)\n\t * @default 'var(--fg-d, #1d1d1d)'\n\t */\n\tcolor: string\n\n\t/**\n\t * The max opacity (0-1) when hovering/dragging a grabber.\n\t * @default 1\n\t */\n\topacity: number\n\n\t/**\n\t * Border radius of the element.\n\t * @default '0.5rem'\n\t */\n\tborderRadius: string\n\n\t/**\n\t * The element to use as the bounds for resizing.\n\t * @default window['document']['documentElement']\n\t */\n\tbounds: ElementOrSelector\n\n\t/**\n\t * Element's or selectors which will act as collision obstacles for the draggable element.\n\t */\n\tobstacles: ElementsOrSelectors\n\n\t/**\n\t * Whether to apply different `cursor` values to grabbers.\n\t */\n\tcursors: boolean\n\n\t/**\n\t * The classnames to apply to the resize grabbers, used for styling.\n\t * @default { default: 'resize-grabber', active: 'resize-grabbing' }\n\t */\n\tclasses: {\n\t\t/** @default 'resize-grabber' */\n\t\tdefault: string\n\t\t/** @default 'resize-grabbing' */\n\t\tactive: string\n\t}\n\n\t/**\n\t * Whether the element is disabled.\n\t * @default false\n\t */\n\tdisabled: boolean\n}\n\nexport const RESIZABLE_DEFAULTS: ResizableOptions = {\n\t__type: 'ResizableOptions' as const,\n\tsides: ['right', 'bottom'],\n\tcorners: ['bottom-right'],\n\tgrabberSize: 6,\n\tonResize: () => {},\n\tlocalStorageKey: undefined,\n\tvisible: false,\n\tcolor: 'var(--fg-d, #1d1d1d)',\n\topacity: 0.75,\n\tborderRadius: '50%',\n\tobstacles: undefined,\n\tcursors: true,\n\tclasses: {\n\t\tdefault: 'resize-grabber',\n\t\tactive: 'resize-grabbing',\n\t},\n\tbounds: 'document',\n\tdisabled: false,\n} as const\n\n/**\n * Makes an element resizable by dragging its edges.  For the\n * svelte-action version, see {@link resizable}.\n *\n * @param node - The element to make resizable.\n * @param options - {@link ResizableOptions}\n *\n * @example Basic\n * ```ts\n * import { Resizable } from 'fractils'\n *\n * const node = document.createElement('div')\n * new Resizable(node)\n * ```\n *\n * @example Advanced\n * ```ts\n * import { Resizable } from 'fractils'\n *\n * const node = document.createElement('div')\n * new Resizable(node, {\n * \tsides: ['left', 'bottom'],\n * \tgrabberSize: 3,\n * \tonResize: () => console.log('resized'),\n * \tlocalStorageKey: 'resizableL::size',\n * \tvisible: false,\n * \tcolor: 'var(--fg-d)',\n * \tborderRadius: '0.5rem',\n * })\n * ```\n */\nexport class Resizable {\n\tstatic readonly type = 'Resizable' as const\n\tstatic initialized = false\n\tid = nanoid(8)\n\topts: ResizableOptions\n\tdisabled: boolean\n\n\tbounds: HTMLElement\n\tobstacleEls: HTMLElement[]\n\tsize: State<{ width: number; height: number }>\n\n\t#activeGrabber: HTMLElement | null = null\n\t#listeners: (() => void)[] = []\n\t#cleanupGrabListener: (() => void) | null = null\n\t#cornerGrabberSize: number\n\n\t#log: Logger\n\n\tconstructor(\n\t\tpublic node: HTMLElement,\n\t\toptions?: Partial<ResizableOptions>,\n\t) {\n\t\tthis.opts = deepMergeOpts([RESIZABLE_DEFAULTS, options], { concatArrays: false })\n\t\tthis.disabled = this.opts.disabled\n\n\t\tthis.#log = new Logger('resizable', {\n\t\t\tfg: 'GreenYellow',\n\t\t\tdeferred: false,\n\t\t})\n\t\tthis.#log.fn('constructor').debug({ opts: this.opts, this: this })\n\n\t\tthis.node.classList.add('fractils-resizable')\n\n\t\tthis.#cornerGrabberSize = this.opts.grabberSize * 3\n\n\t\tthis.bounds = select(this.opts.bounds)[0] ?? globalThis.document?.documentElement\n\n\t\tthis.obstacleEls = select(this.opts.obstacles)\n\n\t\tthis.generateStyles()\n\n\t\tthis.size = state(\n\t\t\t{ width: this.node.offsetWidth, height: this.node.offsetHeight },\n\t\t\t{ key: this.opts.localStorageKey },\n\t\t)\n\n\t\t//? Apply size from local storage.\n\t\tif (this.opts.localStorageKey) {\n\t\t\tconst { width, height } = this.size.value\n\n\t\t\tif (width === 0 || height === 0) {\n\t\t\t\tthis.size.set({\n\t\t\t\t\twidth: this.node.offsetWidth,\n\t\t\t\t\theight: this.node.offsetHeight,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tif (this.opts.corners.length || this.opts.sides.some(s => s.match(/left|right/))) {\n\t\t\t\t\tnode.style.width = width + 'px'\n\t\t\t\t}\n\n\t\t\t\tif (this.opts.corners.length || this.opts.sides.some(s => s.match(/top|bottom/))) {\n\t\t\t\t\tnode.style.height = height + 'px'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.dispatchEvent(new CustomEvent('resize'))\n\t\t} else {\n\t\t\tthis.size.set({\n\t\t\t\twidth: this.node.offsetWidth,\n\t\t\t\theight: this.node.offsetHeight,\n\t\t\t})\n\t\t}\n\n\t\tthis.createGrabbers()\n\n\t\tif (+this.node.style.minWidth > this.boundsRect.width) {\n\t\t\tconsole.error('Min width is greater than bounds width.')\n\t\t\treturn\n\t\t}\n\n\t\t// todo - this seems unecessary\n\t\t// this.size.set({\n\t\t// \twidth: this.node.offsetWidth,\n\t\t// \theight: this.node.offsetHeight,\n\t\t// })\n\t}\n\n\tget boundsRect() {\n\t\treturn this.bounds.getBoundingClientRect()\n\t}\n\n\t//? Create resize grabbers.\n\n\tcreateGrabbers() {\n\t\tfor (const [side, type] of [\n\t\t\t...this.opts.sides.map(s => [s, 'side']),\n\t\t\t...this.opts.corners.map(c => [c, 'corner']),\n\t\t]) {\n\t\t\tconst grabber = document.createElement('div')\n\t\t\tgrabber.classList.add(`${this.opts.classes.default}-${this.id}`)\n\t\t\tgrabber.classList.add(`${this.opts.classes.default}-${type}-${this.id}`)\n\t\t\tgrabber.classList.add(`${this.opts.classes.default}-${side}-${this.id}`)\n\t\t\tgrabber.dataset['side'] = side\n\t\t\t// grabber.style.setProperty('opacity', this.opts.visible ? '1' : '0')\n\n\t\t\tgrabber.addEventListener('pointerdown', this.onGrab)\n\t\t\tthis.#listeners.push(() => grabber.removeEventListener('pointerdown', this.onGrab))\n\n\t\t\tthis.node.appendChild(grabber)\n\t\t}\n\t}\n\n\tclickOffset = { x: 0, y: 0 }\n\n\tonGrab = (e: PointerEvent) => {\n\t\tif (this.disabled) return\n\t\tthis.node.setPointerCapture(e.pointerId)\n\t\tthis.#activeGrabber = e.currentTarget as HTMLElement\n\t\tthis.#activeGrabber.classList.add(this.opts.classes.active)\n\t\tdocument.body.classList.add(this.opts.classes.active)\n\n\t\tthis.obstacleEls = select(this.opts.obstacles)\n\n\t\tconst side = this.#activeGrabber.dataset['side']\n\t\tif (side!.match(/top/)) this.clickOffset.y = e.clientY - this.rect.top\n\t\tif (side!.match(/bottom/)) this.clickOffset.y = e.clientY - this.rect.bottom\n\t\tif (side!.match(/left/)) this.clickOffset.x = e.clientX - this.rect.left\n\t\tif (side!.match(/right/)) this.clickOffset.x = e.clientX - this.rect.right\n\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\n\t\tthis.#cleanupGrabListener?.()\n\t\tdocument.addEventListener('pointermove', this.onMove)\n\t\tthis.#cleanupGrabListener = () => document.removeEventListener('pointermove', this.onMove)\n\n\t\t// this.node.dispatchEvent(new CustomEvent('grab', { detail: { side } }))\n\t\tthis.#computedStyleValues()\n\t\tdocument.addEventListener('pointerup', this.onUp, { once: true })\n\t}\n\n\tget translateX() {\n\t\treturn +this.node.dataset['translateX']! || 0\n\t}\n\tset translateX(v: number) {\n\t\tthis.node.dataset['translateX'] = String(v)\n\t}\n\n\tget translateY() {\n\t\treturn +this.node.dataset['translateY']! || 0\n\t}\n\tset translateY(v: number) {\n\t\tthis.node.dataset['translateY'] = String(v)\n\t}\n\n\tget rect() {\n\t\treturn this.node.getBoundingClientRect()\n\t}\n\n\t// Private computedStyleValues\n\n\t#minWidth = 0\n\t#maxWidth = 0\n\t#minHeight = 0\n\t#maxHeight = 0\n\t#boundsRect: VirtualRect = {\n\t\tleft: -Infinity,\n\t\ttop: -Infinity,\n\t\tright: Infinity,\n\t\tbottom: Infinity,\n\t}\n\t#computedStyleValues = () => {\n\t\tconst {\n\t\t\tminWidth,\n\t\t\tmaxWidth,\n\t\t\tpaddingLeft,\n\t\t\tpaddingRight,\n\t\t\tborderLeftWidth,\n\t\t\tborderRightWidth,\n\t\t\tminHeight,\n\t\t\tmaxHeight,\n\t\t\tpaddingTop,\n\t\t\tpaddingBottom,\n\t\t\tborderTopWidth,\n\t\t\tborderBottomWidth,\n\t\t} = window.getComputedStyle(this.node)\n\n\t\tconst borderBoxX =\n\t\t\tparseFloat(paddingLeft) +\n\t\t\tparseFloat(paddingRight) +\n\t\t\tparseFloat(borderLeftWidth) +\n\t\t\tparseFloat(borderRightWidth)\n\n\t\tconst borderBoxY =\n\t\t\tparseFloat(paddingTop) +\n\t\t\tparseFloat(paddingBottom) +\n\t\t\tparseFloat(borderTopWidth) +\n\t\t\tparseFloat(borderBottomWidth)\n\n\t\tthis.#minWidth = Math.max((parseFloat(minWidth) || 0) + borderBoxX, 25)\n\t\tthis.#maxWidth = Math.min(parseFloat(maxWidth) || Infinity)\n\t\tthis.#minHeight = Math.max((parseFloat(minHeight) || 0) + borderBoxY, 25)\n\t\tthis.#maxHeight = Math.min(parseFloat(maxHeight) || Infinity)\n\n\t\tthis.#boundsRect = this.bounds.getBoundingClientRect()\n\t}\n\n\tresizeX = (x: number, borderleft?: boolean) => {\n\t\tlet deltaX\n\n\t\tif (borderleft) {\n\t\t\tdeltaX = x - this.rect.left\n\t\t\tif (deltaX === 0) return this\n\n\t\t\t// deltaX = collisionClampX(deltaX, this.rect, this.obstacleEls)\n\t\t\tif (this.#boundsRect) deltaX = Math.max(deltaX, this.#boundsRect.left - this.rect.left)\n\n\t\t\tconst newWidth = clamp(this.rect.width - deltaX, this.#minWidth, this.#maxWidth)\n\t\t\tif (newWidth === this.#minWidth) deltaX = this.rect.width - newWidth\n\t\t\tthis.translateX += deltaX\n\t\t\tthis.node.style.setProperty('translate', `${this.translateX}px ${this.translateY}px`)\n\n\t\t\tthis.node.style.width = `${newWidth}px`\n\t\t} else {\n\t\t\tdeltaX = x - this.rect.right\n\t\t\tif (deltaX === 0) return this\n\n\t\t\t// deltaX = collisionClampX(deltaX, this.rect, this.obstacleEls)\n\t\t\tif (this.#boundsRect)\n\t\t\t\tdeltaX = Math.min(deltaX, this.#boundsRect.right - this.rect.right)\n\t\t\tconst newWidth = clamp(this.rect.width + deltaX, this.#minWidth, this.#maxWidth)\n\t\t\tthis.node.style.width = `${newWidth}px`\n\t\t}\n\n\t\treturn this\n\t}\n\tresizeY = (y: number, bordertop?: boolean) => {\n\t\tlet deltaY\n\n\t\tif (bordertop) {\n\t\t\tdeltaY = y - this.rect.top\n\t\t\tif (deltaY != 0) {\n\t\t\t\t// deltaY = collisionClampY(deltaY, this.rect, this.obstacleEls)\n\t\t\t\tif (this.#boundsRect)\n\t\t\t\t\tdeltaY = Math.max(deltaY, this.#boundsRect.top - this.rect.top)\n\t\t\t\tconst newHeight = clamp(this.rect.height - deltaY, this.#minHeight, this.#maxHeight)\n\n\t\t\t\tif (newHeight === this.#minHeight) deltaY = this.rect.height - newHeight\n\t\t\t\tthis.translateY += deltaY\n\t\t\t\tthis.node.style.setProperty(\n\t\t\t\t\t'translate',\n\t\t\t\t\t`${this.translateX}px ${this.translateY}px`,\n\t\t\t\t)\n\t\t\t\tthis.node.style.height = `${newHeight}px`\n\t\t\t}\n\t\t} else {\n\t\t\tdeltaY = y - this.rect.bottom\n\t\t\tif (deltaY !== 0) {\n\t\t\t\t// deltaY = collisionClampY(deltaY, this.rect, this.obstacleEls)\n\t\t\t\tif (this.#boundsRect)\n\t\t\t\t\tdeltaY = Math.min(deltaY, this.#boundsRect.bottom - this.rect.bottom)\n\t\t\t\tconst newHeight = clamp(this.rect.height + deltaY, this.#minHeight, this.#maxHeight)\n\t\t\t\tthis.node.style.height = `${newHeight}px`\n\t\t\t}\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * This is where all the resizing logic happens.\n\t */\n\tonMove = (e: PointerEvent) => {\n\t\tif (!this.#activeGrabber) {\n\t\t\tconsole.error('No active grabber')\n\t\t\treturn\n\t\t}\n\n\t\tconst x = e.clientX - this.clickOffset.x\n\t\tconst y = e.clientY - this.clickOffset.y\n\n\t\tconst { side } = this.#activeGrabber.dataset\n\t\tthis.#log.fn('onMove').debug(side)\n\n\t\tswitch (side) {\n\t\t\tcase 'top-left':\n\t\t\t\tthis.resizeY(y, true).resizeX(x, true)\n\t\t\t\tbreak\n\t\t\tcase 'top-right':\n\t\t\t\tthis.resizeY(y, true).resizeX(x)\n\t\t\t\tbreak\n\t\t\tcase 'bottom-right':\n\t\t\t\tthis.resizeY(y).resizeX(x)\n\t\t\t\tbreak\n\t\t\tcase 'bottom-left':\n\t\t\t\tthis.resizeY(y).resizeX(x, true)\n\t\t\t\tbreak\n\t\t\tcase 'top':\n\t\t\t\tthis.resizeY(y, true)\n\t\t\t\tbreak\n\t\t\tcase 'right':\n\t\t\t\tthis.resizeX(x)\n\t\t\t\tbreak\n\t\t\tcase 'bottom':\n\t\t\t\tthis.resizeY(y)\n\t\t\t\tbreak\n\t\t\tcase 'left':\n\t\t\t\tthis.resizeX(x, true)\n\t\t\t\tbreak\n\t\t}\n\n\t\tthis.node.dispatchEvent(new CustomEvent('resize'))\n\n\t\tthis.size.set({\n\t\t\twidth: this.node.offsetWidth,\n\t\t\theight: this.node.offsetHeight,\n\t\t})\n\n\t\tthis.opts.onResize({\n\t\t\twidth: this.node.offsetWidth,\n\t\t\theight: this.node.offsetHeight,\n\t\t})\n\t}\n\n\tonUp = () => {\n\t\tthis.#cleanupGrabListener?.()\n\t\tdocument.body.classList.remove(this.opts.classes.active)\n\t\tthis.#activeGrabber?.classList.remove(this.opts.classes.active)\n\n\t\tthis.node.dispatchEvent(new CustomEvent('release'))\n\t}\n\n\t/**\n\t * Creates the global stylesheet (but only once).\n\t */\n\tgenerateStyles() {\n\t\tthis.#log.fn('generateStyles').debug('Generating global styles for', this)\n\t\tlet css = /*css*/ `\n\t\t\t.resize-grabber-${this.id} {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: flex;\n\n\t\t\t\topacity: ${this.opts.visible ? this.opts.opacity : 0};\n\t\t\t\tborder-radius: ${this.opts.borderRadius};\n\t\t\t\tborder-radius: inherit;\n\n\t\t\t\ttransition: opacity 0.1s;\n\t\t\t}\n\n\t\t\t.fractils-resizable:not(.fractils-grabbing) .resize-grabber-${this.id}:hover {\n\t\t\t\topacity: ${this.opts.opacity / 2};\n\t\t\t}\n\n\t\t\t.resize-grabber-${this.id}:active {\n\t\t\t\topacity: ${this.opts.opacity * 0.75};\n\t\t\t}\n\t\t`\n\n\t\tif (this.opts.cursors) {\n\t\t\tcss += /*css*/ `\n\t\t\t\t.resize-grabbing-${this.id} *, .resize-grabber-${this.id}:active {\n\t\t\t\t\tcursor: grabbing !important;\n\t\t\t\t}\n\t\t\t`\n\t\t}\n\n\t\tconst cursor = (v: string) =>\n\t\t\t!this.opts.cursors\n\t\t\t\t? ''\n\t\t\t\t: `\n\t\t\t\tcursor: ${v};`\n\n\t\tconst offset = this.opts.grabberSize / 2\n\t\tconst gradient = `transparent 20%, ${this.opts.color} 33%, ${this.opts.color} 66%, transparent 75%, transparent 100%`\n\t\tconst lengthPrcnt = 98\n\n\t\tif (this.opts.sides.includes('top'))\n\t\t\tcss += /*css*/ `\n\t\t\t.${this.opts.classes.default}-top-${this.id} {\n\t\t\t\t${cursor('ns-resize')}\n\t\t\t\ttop: ${-offset}px;\n\t\t\t\tleft: ${50 - lengthPrcnt * 0.5}%;\n\n\t\t\t\twidth: ${lengthPrcnt}%;\n\t\t\t\theight: ${this.opts.grabberSize}px;\n\n\t\t\t\tbackground: linear-gradient(to bottom, ${gradient});\n\t\t\t}\n\t\t`\n\t\tif (this.opts.sides.includes('right'))\n\t\t\tcss += /*css*/ `\n\t\t\t.${this.opts.classes.default}-right-${this.id} {\n\t\t\t\t${cursor('ew-resize')}\n\t\t\t\tright: ${-offset}px;\n\t\t\t\ttop: ${50 - lengthPrcnt * 0.5}%;\n\n\t\t\t\twidth: ${this.opts.grabberSize}px;\n\t\t\t\theight: ${lengthPrcnt}%;\n\n\t\t\t\tbackground: linear-gradient(to left, ${gradient});\n\t\t\t}\n\t\t`\n\t\tif (this.opts.sides.includes('bottom'))\n\t\t\tcss += /*css*/ `\n\t\t\t.${this.opts.classes.default}-bottom-${this.id} {\n\t\t\t\t${cursor('ns-resize')}\n\t\t\t\tbottom: ${-offset}px;\n\t\t\t\tleft: ${50 - lengthPrcnt * 0.5}%;\n\n\t\t\t\twidth: ${lengthPrcnt}%;\n\t\t\t\theight: ${this.opts.grabberSize}px;\n\n\t\t\t\tbackground: linear-gradient(to top, ${gradient});\n\t\t\t}\n\t\t`\n\t\tif (this.opts.sides.includes('left'))\n\t\t\tcss += /*css*/ `\n\t\t\t\t.${this.opts.classes.default}-left-${this.id} {\n\t\t\t\t\t${cursor('ew-resize')}\n\t\t\t\t\tleft: ${-offset}px;\n\t\t\t\t\ttop: ${50 - lengthPrcnt * 0.5}%;\n\n\t\t\t\t\twidth: ${this.opts.grabberSize}px;\n\t\t\t\t\theight: ${lengthPrcnt}%;\n\n\t\t\t\t\tbackground: linear-gradient(to right, ${gradient});\n\t\t\t\t}\n\t\t\t`\n\n\t\tcss += `.fractils-grabbing .resize-grabber { cursor: default }`\n\n\t\tconst cSize = this.#cornerGrabberSize\n\n\t\tconst opposites = {\n\t\t\t'top-left': '100% 100%',\n\t\t\t'top-right': '0% 100%',\n\t\t\t'bottom-left': '100% 0%',\n\t\t\t'bottom-right': '0% 0%',\n\t\t} as const\n\n\t\tconst corner = (corner: Corner, cursorValue: string) => {\n\t\t\tif (!this.opts.corners.includes(corner)) return\n\n\t\t\tconst classname = `${this.opts.classes.default}-${corner}-${this.id}`\n\t\t\tconst sides = corner.replace(this.opts.classes.default, '').split('-')\n\n\t\t\tcss += `\n\t\t\t\t.${classname} {${cursor(cursorValue)}\n\t\t\t\t\t${sides[0]}: 0px;\n\t\t\t\t\t${sides[1]}: 0px;\n\t\t\t\t\twidth: ${cSize}px;\n\t\t\t\t\theight: ${cSize}px;\n\t\t\t\t}\n\t\t\t\t.${classname}::after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground: radial-gradient(farthest-corner at ${opposites[corner]}, transparent 70%, ${\n\t\t\t\t\t\tthis.opts.color\n\t\t\t\t\t} 86%);\n\t\t\t\t\tborder-radius: 15%;\n\t\t\t\t}\n\t\t\t`\n\t\t}\n\n\t\tcorner('top-left', 'nwse-resize')\n\t\tcorner('top-right', 'nesw-resize')\n\t\tcorner('bottom-left', 'nesw-resize')\n\t\tcorner('bottom-right', 'nwse-resize')\n\n\t\tconst styleEl = document.createElement('style')\n\t\tstyleEl.innerHTML = css\n\n\t\tdocument.head.appendChild(styleEl)\n\t}\n\n\tdispose() {\n\t\tfor (const cleanup of this.#listeners) {\n\t\t\tcleanup()\n\t\t}\n\t\tthis.#cleanupGrabListener?.()\n\t}\n}\n\nexport function isResizableOptions<T extends Record<string, any>>(\n\topts: T,\n): opts is T & ResizableOptions {\n\treturn '__type' in opts && opts['__type'] === 'ResizableOptions'\n}\n"],"names":[],"mappings":"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"}