var At=Object.defineProperty;var Ro=Object.getOwnPropertyDescriptor;var Ht=i=>{throw TypeError(i)};var Ao=(i,e,t)=>e in i?At(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var L=(i,e,t,o)=>{for(var n=o>1?void 0:o?Ro(e,t):e,r=i.length-1,s;r>=0;r--)(s=i[r])&&(n=(o?s(e,t,n):s(n))||n);return o&&n&&At(e,t,n),n};var w=(i,e,t)=>Ao(i,typeof e!="symbol"?e+"":e,t),gt=(i,e,t)=>e.has(i)||Ht("Cannot "+t);var C=(i,e,t)=>(gt(i,e,"read from private field"),t?t.call(i):e.get(i)),G=(i,e,t)=>e.has(i)?Ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),N=(i,e,t,o)=>(gt(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t),Te=(i,e,t)=>(gt(i,e,"access private method"),t);function A(i,e){let[t,...o]=i,{concatArrays:n=!0}=e??{};return o.reduce((r,s)=>{if(!s)return r;let a=Object.keys(s);for(let l=0;l<a.length;l++){let c=a[l],h=r[c],p=s[c];Array.isArray(h)&&Array.isArray(p)?n?r[c]=[...new Set([...h,...p])]:r[c]=p:h&&typeof h=="object"?p!==!0&&(p&&typeof p=="object"?typeof globalThis.window<"u"&&p instanceof Element?r[c]=p:r[c]=A([{...h},p],e):(p||p===!1)&&(r[c]=p)):p!==void 0&&(r[c]=p)}return r},{...t})}function B(i,e={}){let t=i.resolved?{}:{base:i.vars.color.base,dark:{"bg-a":i.vars.color.dark?.["bg-a"]||i.vars.color.base["dark-a"],"bg-b":i.vars.color.dark?.["bg-b"]||i.vars.color.base["dark-b"],"bg-c":i.vars.color.dark?.["bg-c"]||i.vars.color.base["dark-c"],"bg-d":i.vars.color.dark?.["bg-d"]||i.vars.color.base["dark-d"],"bg-e":i.vars.color.dark?.["bg-e"]||i.vars.color.base["dark-e"],"fg-a":i.vars.color.dark?.["fg-a"]||i.vars.color.base["light-a"],"fg-b":i.vars.color.dark?.["fg-b"]||i.vars.color.base["light-b"],"fg-c":i.vars.color.dark?.["fg-c"]||i.vars.color.base["light-c"],"fg-d":i.vars.color.dark?.["fg-d"]||i.vars.color.base["light-d"],"fg-e":i.vars.color.dark?.["fg-e"]||i.vars.color.base["light-e"],...i.vars.color.dark},light:{"bg-a":i.vars.color.light?.["bg-a"]||i.vars.color.base["light-a"],"bg-b":i.vars.color.light?.["bg-b"]||i.vars.color.base["light-b"],"bg-c":i.vars.color.light?.["bg-c"]||i.vars.color.base["light-c"],"bg-d":i.vars.color.light?.["bg-d"]||i.vars.color.base["light-d"],"bg-e":i.vars.color.light?.["bg-e"]||i.vars.color.base["light-e"],"fg-a":i.vars.color.light?.["fg-a"]||i.vars.color.base["dark-a"],"fg-b":i.vars.color.light?.["fg-b"]||i.vars.color.base["dark-b"],"fg-c":i.vars.color.light?.["fg-c"]||i.vars.color.base["dark-c"],"fg-d":i.vars.color.light?.["fg-d"]||i.vars.color.base["dark-d"],"fg-e":i.vars.color.light?.["fg-e"]||i.vars.color.base["dark-e"],...i.vars.color.light}};return{title:i.title,prefix:i.prefix||"fractils",vars:A([{color:t},e,i.vars]),resolved:!0}}var Fe=B({title:"vanilla",prefix:"gooey",vars:{color:{base:{"theme-a":"#49a7ff","dark-a":"#0B0B11","dark-b":"#1b1d29","dark-c":"#46465e","dark-d":"#55566a","dark-e":"#787b89","light-a":"#ffffff","light-b":"#c9ccd7","light-c":"#a9adba","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}},core:{light:{"controller-dim_background":"color-mix(in sRGB, var(--gooey-bg-a) 75%, transparent)"}}}});var Ft=B({title:"scout",prefix:"gooey",vars:{color:{base:{"theme-a":"#ff4221","theme-b":"#ff9215","theme-c":"#ff8bd3","dark-a":"#15161d","dark-b":"#282a36","dark-c":"#272d30","dark-d":"#3a3a44","dark-e":"#4d4d58","light-a":"#dfe1e9","light-b":"#c3c4c7","light-c":"#777d8f","light-d":"#5f6377","light-e":"#363945"},dark:{},light:{}},utility:{dark:{filter:"contrast(1.05) brightness(1.05)"}},core:{dark:{"folder-header_background":"color-mix(in sRGB, var(--gooey-bg-a) 100%, transparent)"},light:{"controller-dim_background":"#96a09c"}}}});var Bt=B({title:"flat",prefix:"gooey",vars:{color:{base:{"theme-a":"#00bcd4","theme-b":"#f8d2c9","theme-c":"#ba788a","dark-a":"#0B0B11","dark-b":"#15161D","dark-c":"#1F202D","dark-d":"#353746","dark-e":"#474A5B","light-a":"#ffffff","light-b":"#dfe1e9","light-c":"#BABECA","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}},core:{dark:{"input-number-range_outline":"1px solid color-mix(in sRGB, var(--gooey-bg-c) 33%, transparent)"}}}});var Vt=String.raw`@charset "UTF-8";.gooey-root{z-index:0}.gooey-header{z-index:2}.gooey-toolbar{z-index:3}.gooey-root .gooey-content,.gooey-root .gooey-content-wrapper,.gooey-folder .gooey-content,.gooey-folder .gooey-content-wrapper{display:grid;grid-template-rows:1fr;animation-name:open;animation-duration:.25s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.1,1,.1,1)}.gooey-root .gooey-header,.gooey-folder .gooey-header{height:var(--gooey-header_height);max-height:var(--gooey-header_height)}.gooey-root.closed .gooey-content,.gooey-root.closed .gooey-content-wrapper,.gooey-folder.closed .gooey-content,.gooey-folder.closed .gooey-content-wrapper{animation-name:close;animation-duration:.25s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.05,1,.2,1)}.gooey-root.closed .gooey-folder .gooey-header,.gooey-folder.closed .gooey-folder .gooey-header{max-height:0}.gooey-root.instant .gooey-content-wrapper,.gooey-folder.instant .gooey-content-wrapper{grid-template-rows:1fr;animation:none}.gooey-root.instant .gooey-folder .gooey-header,.gooey-folder.instant .gooey-folder .gooey-header{height:var(--gooey-header_height);max-height:var(--gooey-header_height)}.gooey-root.closed .gooey-content{transition:opacity .1s;transition-delay:.1s;opacity:0!important}.gooey-root.closed .gooey-content.instant{transition:none}.gooey-root.animating .gooey-content,.gooey-root.animating .gooey-content-wrapper,.gooey-root.closed .gooey-content,.gooey-root.closed .gooey-content-wrapper,.gooey-folder.animating .gooey-content,.gooey-folder.animating .gooey-content-wrapper,.gooey-folder.closed .gooey-content,.gooey-folder.closed .gooey-content-wrapper{will-change:transform;backface-visibility:hidden;transform:translateZ(0);overflow:hidden}.gooey-root.animating .gooey-content::-webkit-scrollbar-thumb,.gooey-root.animating .gooey-content-wrapper::-webkit-scrollbar-thumb,.gooey-root.closed .gooey-content::-webkit-scrollbar-thumb,.gooey-root.closed .gooey-content-wrapper::-webkit-scrollbar-thumb,.gooey-folder.animating .gooey-content::-webkit-scrollbar-thumb,.gooey-folder.animating .gooey-content-wrapper::-webkit-scrollbar-thumb,.gooey-folder.closed .gooey-content::-webkit-scrollbar-thumb,.gooey-folder.closed .gooey-content-wrapper::-webkit-scrollbar-thumb{transition:none!important;background:transparent!important}@-moz-document url-prefix(){.gooey-root.animating .gooey-content,.gooey-root.animating .gooey-content-wrapper,.gooey-root.closed .gooey-content,.gooey-root.closed .gooey-content-wrapper,.gooey-folder.animating .gooey-content,.gooey-folder.animating .gooey-content-wrapper,.gooey-folder.closed .gooey-content,.gooey-folder.closed .gooey-content-wrapper{transition:none!important;scrollbar-color:transparent transparent}}@keyframes reveal{0%{grid-template-rows:0fr}to{grid-template-rows:1fr}}@keyframes open{0%{grid-template-rows:0fr}to{grid-template-rows:1fr}}@keyframes close{0%{grid-template-rows:1fr}to{grid-template-rows:0fr}}.gooey-folder{contain:content;height:fit-content}.gooey-folder.hidden{display:none}.gooey-folder:not(.gooey-root){position:relative}.gooey-folder .gooey-header{contain:strict;position:relative;display:flex;align-items:center;gap:.5rem;width:100%;padding-left:var(--gooey-folder-header_padding-left);outline-offset:-1px;color:var(--gooey-folder-header-dim_color);background:var(--gooey-folder-header_background);outline:var(--gooey-folder-header_outline, 1px solid color-mix(in sRGB, var(--gooey-bg-b) 50%, transparent));box-shadow:var(--gooey-folder-header_box-shadow, 0 0 .1rem #000 inset);transition:opacity var(--gooey-transition-duration);cursor:pointer}.gooey-folder .gooey-header .gooey-title{contain:layout style paint;position:relative;width:fit-content;font-size:calc(var(--gooey-font-size) * .9);letter-spacing:var(--gooey-folder-header_letter-spacing);transition:color var(--gooey-transition-duration)}.gooey-folder .gooey-header .gooey-folder-icon-container{contain:strict;width:1.1rem!important;height:1.1rem!important;color:var(--gooey-fg-c);backface-visibility:hidden}.gooey-folder .gooey-header .gooey-folder-icon-container .gooey-folder-icon{transition:opacity var(--gooey-transition-duration);contain:strict;backface-visibility:hidden}.gooey-connector-svg{contain:layout style;display:flex;position:absolute;top:0;left:1px;width:20px;height:100%;pointer-events:none;overflow:visible;z-index:10;backface-visibility:hidden}.gooey-folder{contain:content}.gooey-folder .gooey-content{contain:content;display:flex;flex-direction:column;width:100%;border-left:var(--gooey-folder-content_padding-left) solid var(--gooey-folder-header_background)}.gooey-folder-alt{box-shadow:0 0 10px hsl(10deg,0%,var(--gooey-shadow-lightness)),inset;background:color-mix(in sRGB,var(--gooey-bg-b) 100%,transparent);--gooey-input-container_color: var(--gooey-fg-b);--gooey-folder-header_background: color-mix(in sRGB, var(--gooey-bg-a) 75%, transparent);--gooey-controller-dim_background: color-mix(in sRGB, var(--gooey-bg-a) 50%, transparent);--gooey-controller_background: color-mix(in sRGB, var(--gooey-bg-a) 80%, var(--gooey-bg-b))}.gooey-root[mode=light] .gooey-folder-alt{--gooey-folder-header_background: color-mix( in sRGB, var(--gooey-bg-a) 75%, var(--gooey-bg-b) );--gooey-controller_background: var(--gooey-light-a)}.gooey-root *{box-sizing:border-box}.gooey-root{contain:content;position:absolute;display:flex;flex-direction:column;inset:0;width:var(--gooey-root_width);min-width:var(--gooey-root_min-width);max-width:var(--gooey-root_max-width);height:fit-content;background:var(--gooey-folder_background);border-radius:var(--gooey-radius-md);filter:var(--gooey-filter);font-family:var(--gooey-font-family);font-weight:var(--gooey-folder-content_font-weight);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;user-select:none;z-index:99}.gooey-root>.gooey-header{contain:strict;position:relative;display:flex;align-items:center;justify-content:space-around;gap:.5rem;width:100%;min-height:var(--gooey-root-header_height);color:var(--gooey-fg-c);background:var(--gooey-bg-a);border-radius:var(--gooey-radius-md);border-bottom-left-radius:var(--gooey-radius-xs);border-bottom-right-radius:var(--gooey-radius-xs);cursor:pointer;cursor:grab}.gooey-root>.gooey-header .gooey-title{contain:layout style paint;position:relative;width:fit-content;height:var(--gooey-root-header_height);font-size:var(--gooey-font-size);font-variation-settings:"wght" var(--gooey-root-header_font-weight),"wdth" 100;letter-spacing:var(--gooey-root-header_letter-spacing);line-height:var(--gooey-root-header_height);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;pointer-events:none}.gooey-root>.gooey-content-wrapper>.gooey-content{box-sizing:border-box;display:flex;flex-direction:column;width:100%;margin:0;max-height:var(--gooey-root_max-height);border-bottom:4px solid var(--gooey-bg-a);border-radius:var(--gooey-radius-md);border-top-left-radius:var(--gooey-radius-sm);border-top-right-radius:var(--gooey-radius-sm);background:var(--gooey-root-content_background);backdrop-filter:var(--gooey-backdrop-filter);transform:translateZ(100);-webkit-backdrop-filter:var(--gooey-backdrop-filter);outline-offset:-1px;box-shadow:0 0 4.5px .5px hsla(0,10%,var(--gooey-shadow-lightness),var(--gooey-shadow-opacity)) inset;overflow-y:scroll;overflow-x:hidden;backface-visibility:hidden;scrollbar-gutter:stable}.gooey-root>.gooey-content-wrapper>.gooey-content::-webkit-scrollbar{width:5px;height:0px}.gooey-root>.gooey-content-wrapper>.gooey-content::-moz-scrollbar{width:5px;height:0px}.gooey-root>.gooey-content-wrapper>.gooey-content::-webkit-scrollbar-thumb{background:var(--gooey-controller_background);border:none}.gooey-root>.gooey-content-wrapper>.gooey-content::-moz-scrollbar-thumb{background:var(--gooey-controller_background);border:none}.gooey-root>.gooey-content-wrapper>.gooey-content::-webkit-scrollbar-track{background:var(--gooey-folder-header_background);border-bottom-right-radius:var(--gooey-radius-sm)}.gooey-root>.gooey-content-wrapper>.gooey-content::-moz-scrollbar-track{background:var(--gooey-folder-header_background);border-bottom-right-radius:var(--gooey-radius-sm)}@-moz-document url-prefix(){.gooey-root>.gooey-content-wrapper>.gooey-content{transition:none!important;scrollbar-color:var(--gooey-bg-b) var(--gooey-bg-a);scrollbar-width:thin;scrollbar-gutter:auto}}@-moz-document url-prefix(){.gooey-root.animating>.gooey-content-wrapper>.gooey-content{overflow:hidden}}.gooey-controller,.gooey-controller-text,.gooey-controller-switch,.gooey-controller-button{box-sizing:border-box;color:var(--gooey-controller-dim_color);background:var(--gooey-controller-dim_background)}.gooey-controller.disabled,.gooey-controller-text.disabled,.gooey-controller-switch.disabled,.gooey-controller-button.disabled{opacity:.75;filter:brightness(.75);color:var(--gooey-bg-e);pointer-events:none}.gooey-controller{contain:layout style;width:100%;box-shadow:var(--gooey-controller_box-shadow);border-radius:var(--gooey-controller_border-radius);outline:var(--gooey-controller_outline);transition-duration:var(--gooey-transition-duration);transition-property:color,background,opacity}.gooey-controller:hover:not(:disabled),.gooey-controller:focus-visible:not(:disabled),.gooey-controller:active:not(:disabled){opacity:1;color:var(--gooey-controller_color);background:var(--gooey-controller_background)}.gooey-controller-button{contain:strict;cursor:pointer;height:1.5rem;margin:0;padding:0;border:none;border-radius:var(--gooey-controller_border-radius);outline:var(--gooey-controller_outline);outline-offset:-1px;box-shadow:1px 2px 6px var(--gooey-shadow-color),1px -1px 1px hsla(250,10%,calc(var(--gooey-shadow-lightness)),calc(var(--gooey-shadow-opacity))) inset,1px -1px 1px hsla(250,10%,calc(var(--gooey-shadow-lightness)),calc(var(--gooey-shadow-opacity))) inset,-.5px .5px .5px hsla(250,10%,50%,calc(var(--gooey-shadow-opacity))) inset;font-family:var(--gooey-controller_font-family);font-size:calc(var(--gooey-font-size) * .85);font-variation-settings:"wght" 400;text-align:center;transform:scale(1);backface-visibility:hidden;transition-duration:var(--gooey-transition-duration);transition-property:background,color,transform,box-shadow}.gooey-root[mode=dark] .gooey-controller-button{outline:none}.gooey-controller-button svg{width:100%;height:100%}.gooey-controller-button:hover:not(:disabled),.gooey-controller-button:active:not(:disabled){background:var(--gooey-controller_background);color:var(--gooey-controller_color)}.gooey-controller-button:active{transform:scale(.975);color:var(--gooey-theme-a);box-shadow:0 0 3px var(--gooey-shadow-color),0 0 5px hsla(250,10%,calc(var(--gooey-shadow-lightness) / 3),calc(var(--gooey-shadow-opacity) / 1)) inset,0 0 10px hsla(250,10%,calc(var(--gooey-shadow-lightness) / 2),calc(var(--gooey-shadow-opacity) / 2)) inset,0 0 20px hsla(250,10%,calc(var(--gooey-shadow-lightness) / 1),calc(var(--gooey-shadow-opacity) / 2)) inset}.gooey-controller-button:disabled{opacity:.5;cursor:default;pointer-events:none}.gooey-controller-select-container{contain:content;position:relative;outline:none;border:none}.gooey-controller-select-container[contenteditable=true] .gooey-controller-select-selected{cursor:text;outline:1px solid var(--gooey-theme-a)}.gooey-controller-select-selected{border-radius:var(--gooey-radius-xs);outline:1px solid color-mix(in sRGB,var(--gooey-bg-d) 0%,transparent);text-align:center;letter-spacing:var(--gooey-folder-content_letter-spacing);overflow:hidden;transition-duration:var(--gooey-transition-duration);transition-property:background,color,filter;cursor:pointer}.gooey-controller-select-selected.active,.gooey-controller-select-selected:hover,.gooey-controller-select-selected:focus-visible,.gooey-controller-select-selected:active{filter:contrast(1.1) brightness(1.25)}@keyframes dropdown{0%{transform:translateY(0)}to{transform:translateY(.25rem)}}.gooey-controller-select-dropdown{contain:layout style;backface-visibility:hidden;display:none;position:absolute;display:flex;flex-direction:column;width:0px;height:0px;padding:0;margin:0;background:color-mix(in sRGB,var(--gooey-folder-header_background) calc(var(--gooey-opacity) / 4 * 100%),transparent);color:var(--gooey-controller-dim_color);backdrop-filter:var(--gooey-backdrop-filter);-webkit-backdrop-filter:var(--gooey-backdrop-filter);outline:1px solid var(--gooey-bg-b);border-radius:var(--gooey-radius);box-shadow:0 .3px .3px hsla(var(--gooey-shadow-lightness),.49),-.1px 2.1px 2.2px -.6px hsla(var(--gooey-shadow-lightness),.47),-.2px 4.6px 4.9px -1.2px hsla(var(--gooey-shadow-lightness),.45),-.4px 9.2px 9.8px -1.7px hsla(var(--gooey-shadow-lightness),.42),-.7px 17.4px 18.5px -2.3px hsla(var(--gooey-shadow-lightness),.4),-1.2px 30.6px 32.6px -2.9px hsla(var(--gooey-shadow-lightness),.38);z-index:100;transition:opacity .2s cubic-bezier(.23,1,.32,1),transform .2s cubic-bezier(.23,1,.32,1);opacity:0;pointer-events:none;transform:translate(0) scaleY(0);transform-origin:top center}.gooey-controller-select-dropdown.expanded{contain:content;display:block;width:fit-content;height:fit-content;padding:.1rem;opacity:1;transform:translateY(.5rem) scaleY(1);animation:dropdown .15s forwards}.gooey-controller-select-option{contain:content;padding:.1rem .75rem;line-height:1.5rem;font-family:var(--gooey-font-family, var(--font-d));font-size:calc(var(--gooey-font-size) * .8);letter-spacing:.5px;color:var(--gooey-fg-d);transition-duration:.15s;transition-property:background,color,filter;cursor:pointer}.gooey-controller-select-option:hover,.gooey-controller-select-option:focus-visible{color:var(--gooey-controller_color);background:color-mix(in sRGB,var(--gooey-controller_background) 50%,var(--gooey-folder_background))}.gooey-controller-select-option:first-of-type{border-top-left-radius:var(--gooey-radius-sm);border-top-right-radius:var(--gooey-radius-sm)}.gooey-controller-select-option:last-of-type{border-bottom-left-radius:var(--gooey-radius-sm);border-bottom-right-radius:var(--gooey-radius-sm)}.gooey-controller-select-option.selected,.gooey-controller-select-option:hover{color:var(--gooey-fg-a)}.gooey-wrapper[mode=light] .gooey-controller-select-option.selected,.gooey-wrapper[mode=light] .gooey-controller-select-option:hover{background:var(--gooey-folder-header_background)}.gooey-toolbar{contain:content;backface-visibility:hidden;position:absolute;right:0;top:0;bottom:0;width:75%;display:flex;align-items:center;justify-content:flex-end;gap:.5rem;pointer-events:none}.gooey-toolbar-item svg{max-height:1rem}.gooey-search-container{contain:content;backface-visibility:hidden;display:flex;align-items:center;justify-content:flex-end;gap:.25rem;padding:.25rem .1rem .25rem 0;cursor:pointer;pointer-events:all}.gooey-header:hover .gooey-search-button{opacity:1}.gooey-search-button{contain:strict;all:unset;display:flex;align-items:center;width:1.5rem;height:.9rem;transition-duration:.5s;transition-property:color,opacity}.gooey-search-button svg{pointer-events:none}.gooey-search-button svg path{transform:translate(0) scale(1);transform-origin:50% 50%;transition-duration:.15s;transition:transform .15s}.gooey-search-button svg circle{fill:transparent;transform:translate(0) scale(1);transition-duration:.15s;transition:transform .15s}.gooey-search-button{color:var(--gooey-toolbar-icon-dim_color);opacity:0}.gooey-search-button:hover{color:var(--gooey-fg-e);opacity:1;transition-duration:.15s}.gooey-search-button:active{transition-duration:.05s;background:transparent;color:var(--gooey-fg-d);opacity:1;scale:.9}.gooey-search-container.active .gooey-search-button{color:var(--gooey-bg-e);opacity:1}.gooey-search-container.active .gooey-search-button path{transform:translate(-10%,10%) scale(0);transform-origin:60% 60%}.gooey-search-container.active .gooey-search-button circle{fill:var(--gooey-bg-e);transform:translate(-10%,20%) scale(.75)}input.gooey-search-input{contain:content;width:6rem;height:1rem;padding:0 .25rem;color:var(--gooey-fg-c);background:var(--gooey-bg-b);border-radius:var(--gooey-radius-sm);box-shadow:0 0 11px #0004 inset;outline:none;border:none;font-size:calc(var(--gooey-font-size) * .75);caret-color:var(--gooey-bg-e);caret-shape:block;line-height:4px!important;transition-timing-function:cubic-bezier(.23,1,.32,1)}.gooey-root[mode=light] input.gooey-search-input{box-shadow:0 0 4px #0001 inset}.gooey-search-input{max-width:0rem;opacity:0;pointer-events:none;transition-duration:1s}.gooey-search-container.active .gooey-search-input{max-width:6rem;opacity:1;pointer-events:all;transition-duration:.33s}.gooey-settings-button{contain:layout style;display:flex;align-items:center;justify-content:flex-start;gap:.25rem;border:none;width:1rem;margin:0;padding:0;margin-right:.5rem;color:var(--gooey-toolbar-icon-dim_color);background:none;cursor:pointer;transition:color .15s;pointer-events:all}.gooey-settings-button:hover{color:var(--gooey-toolbar-icon_color)}.gooey-settings-button .gear,.gooey-settings-button .dot-left,.gooey-settings-button .dot-center,.gooey-settings-button .dot-right{transition-duration:.5s;transition-timing-function:cubic-bezier(.16,.9,0,1.01);transition-property:opacity,transform;transform-origin:center;pointer-events:none}.gooey-settings-button .gear{transition:all .5s cubic-bezier(.16,.9,0,1.01),transform .33s cubic-bezier(0,1.07,.48,1.27);opacity:0;transform:scale(1.33) rotate(-180deg)}.gooey-settings-button:hover .gear{transition:.5s cubic-bezier(.16,.9,0,1.01)}.gooey-settings-button.open .gear{transition:.33s cubic-bezier(0,1.07,.48,1.5)}.gooey-settings-button .dot-left{opacity:1;transform:translate(0)}.gooey-settings-button .dot-center{opacity:1}.gooey-settings-button .dot-right{opacity:1;transform:scale(1) translate(0)}.gooey-settings-button:hover .gear,.gooey-settings-button.open .gear{opacity:1;transform:scale(1) rotate(0)}.gooey-settings-button:hover .dot-left,.gooey-settings-button.open .dot-left{opacity:0;transform:translate(36%)}.gooey-settings-button:hover .dot-center,.gooey-settings-button.open .dot-center{transform:scale(1.25)}.gooey-settings-button:hover .dot-right,.gooey-settings-button.open .dot-right{opacity:0;transform:scale(1.2) translate(-36%)}.gooey-settings-button.open .gear{opacity:1;transform:scale(1) rotate(58deg)}.gooey-settings-button:active{background:none}.gooey-folder .copy-button{contain:content;cursor:pointer;height:2rem;padding:10%;color:var(--gooey-fg-a);background:color-mix(in sRGB,var(--gooey-bg-a) 0%,transparent);outline:1px solid transparent;border-radius:.2rem;transition-property:all,background,color;transition-delay:0s,1s,.75s;transition-duration:.25s,.5s;font-size:.8rem;font-family:var(--gooey-font-family)}.gooey-folder .copy-button:not(.active,.outro):hover{color:var(--gooey-fg-b);background:color-mix(in sRGB,var(--gooey-bg-a) 75%,transparent);transition-duration:.15s,.25s;transition-delay:0s}.gooey-folder .copy-button:not(.active,.outro):active,.gooey-folder .copy-button:not(.active,.outro):focus{color:var(--gooey-fg-c);background:var(--gooey-bg-c)}.gooey-folder .copy-button.active,.gooey-folder .copy-button.outro{color:var(--gooey-fg-a);outline-color:transparent!important;background:color-mix(in sRGB,var(--gooey-bg-a) 0%,transparent);opacity:1!important;transition-delay:0s;transition-duration:.25s}.gooey-folder .copy-button-svg-container{align-items:center;justify-content:center;width:100%;height:100%;grid-area:1/1}.gooey-folder .copy-button-svg-container svg{overflow:visible;width:100%;height:100%}.gooey-folder .copy-button-svg-container svg .front,.gooey-folder .copy-button-svg-container svg .back,.gooey-folder .copy-button-svg-container svg .check{transform-origin:50% 50%}.gooey-folder .copy-button-svg-container svg .front{transition-duration:.66s!important;transition-timing-function:cubic-bezier(.175,.885,.32,1.275);stroke:currentColor}.gooey-folder .copy-button-svg-container svg.active .front{transition-timing-function:cubic-bezier(.2,2,.2,.85);transition-duration:.2s;transform:scale(2);fill:#12a084!important;stroke:#12a084!important}.gooey-folder .copy-button-svg-container svg.outro .front{transition-duration:.5s!important}.gooey-folder .copy-button-svg-container svg .back{opacity:1;transform:translate(0);transition-duration:.33s;transition-timing-function:cubic-bezier(.77,0,.175,1)}.gooey-folder .copy-button-svg-container svg.active .back{opacity:0;transform:translate(15%,15%)}.gooey-folder .copy-button-svg-container svg.outro .back{transition:opacity .25s .25s,transform 1s 0s}.gooey-folder .copy-button-svg-container svg .check{stroke:var(--gooey-light-a);opacity:0;transform:scale(0);transition:.2s cubic-bezier(.175,.885,.32,1.275) 0s}.gooey-folder .copy-button-svg-container svg.active .check{opacity:1;transform:scale(1.25);transition:.3s cubic-bezier(.2,2,.2,.85) .1s}.gooey-input-drawer-toggle{contain:strict;right:.5rem;top:.5rem;min-width:.33rem;height:75%;color:var(--gooey-fg-c);background:var(--gooey-drawer-toggle_background);transition:background var(--gooey-transition-duration);box-shadow:-1px 0 1px .5px color-mix(in sRGB,var(--gooey-bg-a) 50%,transparent) inset;border-top-right-radius:var(--gooey-radius-sm);border-bottom-right-radius:var(--gooey-radius-sm);cursor:pointer}.gooey-input-drawer-toggle:hover{background:var(--gooey-bg-c)}@property --gooey-resetbtn-gradstart{syntax: "<percentage>"; inherits: false; initial-value: 0%;}@property --gooey-resetbtn-gradend{syntax: "<percentage>"; inherits: false; initial-value: 100%;}.gooey-input-reset-btn{contain:strict;--gooey-resetbtn-gradstart: 5%;--gooey-resetbtn-gradend: 16%;position:absolute;right:5px;top:0;bottom:0;width:20px;height:20px;margin:auto 0;transform:translate(0);opacity:0;border-radius:50%;color:var(--gooey-fg-c);background-image:radial-gradient(circle,var(--gooey-theme-a) 0%,var(--gooey-theme-a) var(--gooey-resetbtn-gradstart),transparent var(--gooey-resetbtn-gradend),transparent 100%);cursor:pointer;pointer-events:none;transition:opacity .25s cubic-bezier(.215,.61,.355,1),--gooey-resetbtn-gradstart .25s cubic-bezier(.215,.61,.355,1),--gooey-resetbtn-gradend .25s cubic-bezier(.215,.61,.355,1)}.gooey-input-reset-btn:hover{--gooey-resetbtn-gradStart: 37.5%;--gooey-resetbtn-gradend: 45%}.gooey-input-reset-btn.dirty{opacity:1;pointer-events:all}.gooey-input-title{position:relative;contain:content;max-width:var(--gooey-input-section-1_width);min-width:var(--gooey-input-section-1_width);text-wrap:balance;padding-left:4px;padding-right:10px;font-size:calc(var(--gooey-font-size) * .85);letter-spacing:var(--gooey-folder-content_letter-spacing);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition-duration:var(--gooey-transition-duration);transition-property:color}.gooey-input-container{position:relative;display:flex;align-items:center;width:100%;height:0%;min-height:var(--gooey-input_height);color:var(--gooey-input-container_color);outline:var(--gooey-input-container_outline);box-shadow:var(--gooey-input-container_box-shadow);transition:opacity .15s ease-in .2s}.gooey-input-container:first-of-type{border-top-left-radius:var(--gooey-radius-sm);border-top-right-radius:var(--gooey-radius-sm)}.gooey-input-container:first-of-type:before{content:"";position:absolute;background-color:transparent;bottom:1rem;width:.5rem;height:1rem;border-top-left-radius:.25rem;box-shadow:0 -.5rem 0 0 var(--gooey-folder-header_background);clip-path:inset(0 0 0 0);opacity:1;transition:inherit}.gooey-input-container:first-of-type:after{content:"";position:absolute;background-color:transparent;right:0;bottom:1rem;width:.5rem;min-height:1rem;border-top-right-radius:.25rem;box-shadow:0 -.5rem 0 0 var(--gooey-folder-header_background);clip-path:inset(0 0 0 0);opacity:1;transition:inherit}.gooey-folder:not(:last-of-type) .gooey-input-container:last-of-type{border-bottom-left-radius:var(--gooey-radius-sm);border-bottom-right-radius:var(--gooey-radius-sm)}.gooey-folder:not(:last-of-type) .gooey-input-container:last-of-type:before{content:"";position:absolute;background-color:transparent;top:1rem;height:1rem;width:.5rem;border-bottom-left-radius:.25rem;box-shadow:0 .5rem 0 0 var(--gooey-folder-header_background);clip-path:inset(0 0 0 0)}.gooey-folder:not(:last-of-type) .gooey-input-container:last-of-type:after{content:"";position:absolute;background-color:transparent;right:0;top:1rem;height:1rem;width:.5rem;border-bottom-right-radius:.25rem;box-shadow:0 .5rem 0 0 var(--gooey-folder-header_background);clip-path:inset(0 0 0 0)}.gooey-input-container:hover{color:var(--gooey-fg-b)}.gooey-input-container:has(input:active) .gooey-controller-number,.gooey-input-container:has(.gooey-controller:active) .gooey-controller-number{opacity:1;background:var(--gooey-controller_background)}.gooey-input-container:has(input:active) .gooey-input-title,.gooey-input-container:has(.gooey-controller:active) .gooey-input-title{color:var(--gooey-theme-a)}.gooey-input-container.gooey-search-hit{min-height:var(--gooey-input_height)}.gooey-input-container.gooey-search-hit .gooey-input-title{color:var(--gooey-theme-a)}.gooey-input-container.gooey-search-miss{min-height:0rem;overflow:hidden}.gooey-input-container.gooey-search-miss:after{opacity:0;transition:inherit}.gooey-input-container.gooey-search-miss:before{opacity:0;transition:inherit}.gooey-input-container.expanded .gooey-input-container{min-height:unset}.gooey-input-container .gooey-input-content{contain:content;position:relative;display:flex;align-items:center;justify-content:space-evenly;width:100%;margin:0;padding-right:.5rem}.gooey-input-container .gooey-input-content .gooey-input-number-container{contain:content;position:relative;display:flex;align-items:center;justify-content:space-between;padding-left:1px;width:100%;height:90%;border-radius:var(--gooey-radius-sm)}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container{contain:strict;display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:2rem;height:1.5rem;margin:0;padding:0;margin-left:.1rem;margin-right:.1rem}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button{contain:strict;cursor:pointer;display:flex;align-items:center;justify-content:center;width:90%;height:50%;outline:none;opacity:.5;border:none;border-radius:var(--gooey-radius-xs);box-shadow:none;background:transparent;transition-duration:var(--gooey-transition-duration);transition-property:color,background,box-shadow,opacity}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button svg{width:1rem;height:1rem;color:var(--gooey-fg-d);opacity:.1;scale:1;transition-duration:var(--gooey-transition-duration);transition-property:color,opacity;user-select:none;pointer-events:none}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:hover,.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:active{opacity:1;box-shadow:0 0 1px #000 inset}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:hover,.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:active{box-shadow:0 0 1px #fff inset}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:hover svg,.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:active svg{opacity:1}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button:active svg{color:var(--gooey-theme-a)}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-buttons-increment{border-top-left-radius:var(--gooey-radius);border-top-right-radius:var(--gooey-radius)}.gooey-input-container .gooey-input-content .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-buttons-decrement{border-bottom-left-radius:var(--gooey-radius);border-bottom-right-radius:var(--gooey-radius)}.gooey-input-container .gooey-input-content input.gooey-input-number-range{contain:layout style size;-webkit-appearance:none;appearance:none;width:100%;height:.5rem;accent-color:var(--gooey-input-number-range_color);background:var(--gooey-input-number-range_background);border-radius:var(--gooey-radius-xs);box-shadow:var(--gooey-input-number-range_box-shadow);outline:var(--gooey-input-number-range_outline);opacity:.7;transition:.15s;overflow:visible;min-width:1rem}.gooey-input-container .gooey-input-content input.gooey-input-number-range:hover{opacity:1}.gooey-input-container .gooey-input-content input.gooey-input-number-range:active,.gooey-input-container .gooey-input-content input.gooey-input-number-range.active{background:color-mix(in lch,var(--gooey-theme-a),var(--gooey-input-number-range_background))}.gooey-input-container .gooey-input-content input.gooey-input-number-range:active::-webkit-slider-thumb,.gooey-input-container .gooey-input-content input.gooey-input-number-range.active::-webkit-slider-thumb{background-color:var(--gooey-theme-a)}.gooey-input-container .gooey-input-content input.gooey-input-number-range::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:.5rem;height:1rem;background:var(--gooey-input-number-range_color);border-radius:var(--gooey-radius-xs);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content input.gooey-input-number-range::-moz-range-thumb{-webkit-appearance:none;appearance:none;width:.5rem;height:1rem;background:var(--gooey-input-number-range_color);border-radius:var(--gooey-radius-xs);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content input.gooey-input-number-range:active::-webkit-slider-thumb{background:var(--gooey-theme-a);box-shadow:0 0 20px var(--gooey-theme-a);opacity:1}.gooey-input-container .gooey-input-content input.gooey-input-number-range:active::-moz-range-thumb{background:var(--gooey-theme-a);box-shadow:0 0 20px var(--gooey-theme-a);opacity:1}.gooey-input-container .gooey-input-content input.gooey-input-number-range::-moz-range-track{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:9}.gooey-input-container .gooey-input-content input.gooey-input-number-range::-webkit-slider-runnable-track{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:9}.gooey-input-container .gooey-input-content .gooey-controller-number,.gooey-input-container .gooey-input-content .gooey-controller-text{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;width:100%;min-width:2rem;max-width:var(--gooey-input-section-2_width);height:1.25rem;border:none;outline:var(--gooey-controller_outline);font-family:var(--gooey-controller_font-family);font-size:calc(var(--gooey-font-size) * .85);font-variation-settings:"wght" 400;text-align:center;transition-duration:var(--gooey-transition-duration);transition-property:color,background,box-shadow;overflow:visible}.gooey-input-container .gooey-input-content .gooey-controller-number::-webkit-inner-spin-button,.gooey-input-container .gooey-input-content .gooey-controller-number::-webkit-outer-spin-button,.gooey-input-container .gooey-input-content .gooey-controller-text::-webkit-inner-spin-button,.gooey-input-container .gooey-input-content .gooey-controller-text::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:none}.gooey-input-container .gooey-input-content .gooey-controller-number.dragging,.gooey-input-container .gooey-input-content .gooey-controller-text.dragging{outline:1px solid color-mix(in sRGB,var(--gooey-theme-a) 50%,transparent);box-shadow:0 0 .75rem color-mix(in sRGB,var(--gooey-theme-a) 33%,transparent)}.gooey-input-container .gooey-input-content .gooey-input-text-container{display:flex;flex-direction:column;justify-content:center;gap:.25rem;width:100%;height:100%}.gooey-input-container .gooey-input-content .gooey-input-text-container .gooey-controller-text{width:100%;max-width:unset;height:1.25rem;border:none;outline:var(--gooey-controller_outline);font-family:var(--gooey-controller_font-family);font-size:calc(var(--gooey-font-size) * .85);font-variation-settings:"wght" 400;text-align:center;text-align:start;padding-left:.5rem;transition:.1s;overflow:visible}.gooey-input-container .gooey-input-content .gooey-input-text-container .gooey-controller-text:hover{color:var(--gooey-controller_color);background:var(--gooey-controller_background)}.gooey-input-container .gooey-input-content .gooey-input-color-container{display:flex;flex-direction:row;justify-content:space-between;gap:.75rem;width:100%;margin:.25rem 0}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container{position:relative}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container .copy-button{position:absolute;top:-5px;right:-7px;width:1.15rem;height:1.15rem;padding:3px;background:none!important;color:var(--gooey-fg-d);filter:brightness(.75) contrast(.8);backdrop-filter:none;opacity:0;z-index:10}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container .copy-button svg .back{fill:var(--gooey-fg-d);stroke:var(--gooey-fg-d)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container .copy-button:hover{filter:brightness(1) contrast(1);backdrop-filter:none;color:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container .copy-button:hover svg .back{fill:var(--gooey-fg-a);stroke:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-container:hover .copy-button{opacity:1}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-background{width:var(--gooey-input-section-2_width);min-width:var(--gooey-input-section-2_width);height:1.5rem;background-image:linear-gradient(45deg,var(--gooey-bg-a) 25%,transparent 25%),linear-gradient(-45deg,var(--gooey-bg-a) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,var(--gooey-bg-a) 75%),linear-gradient(-45deg,transparent 75%,var(--gooey-bg-a) 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:var(--gooey-radius-sm);overflow:hidden;cursor:pointer;clip-path:xywh(0 12% 100% 72% round var(--gooey-radius-sm));backface-visibility:hidden}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-current-color-display{height:100%}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body{position:relative;display:flex;flex-direction:column;justify-content:center;min-width:0;width:var(--gooey-input-section-3_width)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container{position:relative;display:flex;flex-direction:column}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-canvas{display:flex;width:100%;height:3rem;border-radius:var(--gooey-radius);cursor:pointer;overflow:hidden}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-handle{position:absolute;top:0;left:0;width:.5rem;height:.5rem;translate:-50% -50%;border-radius:50%;border:1px solid var(--gooey-fg-a);box-shadow:0 0 .25rem 0 var(--gooey-bg-d);opacity:0;transition-property:all,opacity;transition-delay:0s,0s;transition-duration:.2s,.33s;transition-timing-function:cubic-bezier(.215,.61,.355,1);pointer-events:none}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container.expanded .gooey-input-color-picker-handle{opacity:1;transition-delay:0s,.25s}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-hue{appearance:none;width:99%;border-radius:var(--gooey-radius-sm);background:none;height:.5rem}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-hue::-webkit-slider-thumb{appearance:none;width:.25rem;height:.5rem;padding:0;background-color:var(--gooey-input-number-range_color);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-hue::-moz-range-thumb{appearance:none;width:.25rem;height:.5rem;padding:0;background-color:var(--gooey-input-number-range_color);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-hue::-webkit-slider-runnable-track{appearance:none;background:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#f0f,red);border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:1;background-color:none}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-hue::-moz-range-track{appearance:none;background:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#f0f,red);border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:1;background-color:none}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-alpha{appearance:none;width:99%;border-radius:var(--gooey-radius-sm);background-color:transparent}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-alpha::-webkit-slider-thumb{appearance:none;width:.25rem;height:.5rem;padding:0;background-color:var(--gooey-input-number-range_color);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-alpha::-moz-range-thumb{appearance:none;width:.25rem;height:.5rem;padding:0;background-color:var(--gooey-input-number-range_color);border:none;transition:.15s;cursor:pointer;z-index:10}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-alpha::-webkit-slider-runnable-track{appearance:none;background:linear-gradient(to right,transparent,currentColor);border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:1}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-picker-container .gooey-input-color-picker-alpha::-moz-range-track{appearance:none;background:linear-gradient(to right,transparent,currentColor);border-radius:var(--gooey-radius-sm);border:none;cursor:pointer;z-index:1}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container{display:grid;grid-template-columns:2rem 1fr;align-items:center;gap:.75rem}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-select-container{width:2rem;grid-area:1/1;color:var(--gooey-fg-d);font-size:var(--gooey-font-size)}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-select-container{color:var(--gooey-bg-e)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-select-container span{transition:.4s;text-shadow:0 0 0 transparent}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-select-container .gooey-controller-select-selected{font-size:calc(var(--gooey-font-size) * .8)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.a.hovering) .gooey-input-color-components-select-container span.a{color:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.a.dragging) .gooey-input-color-components-select-container span.a{color:var(--gooey-theme-a);text-shadow:0 0 .5rem var(--gooey-theme-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.b.hovering) .gooey-input-color-components-select-container span.b{color:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.b.dragging) .gooey-input-color-components-select-container span.b{color:var(--gooey-theme-a);text-shadow:0 0 .5rem var(--gooey-theme-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.c.hovering) .gooey-input-color-components-select-container span.c{color:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.c.dragging) .gooey-input-color-components-select-container span.c{color:var(--gooey-theme-a);text-shadow:0 0 .5rem var(--gooey-theme-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.d.hovering) .gooey-input-color-components-select-container span.d{color:var(--gooey-fg-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container:has(input.d.dragging) .gooey-input-color-components-select-container span.d{color:var(--gooey-theme-a);text-shadow:0 0 .5rem var(--gooey-theme-a)}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-text{max-width:5rem;grid-area:1/2;opacity:0;transform:translate(-.5rem);pointer-events:none}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-text.visible{opacity:1;transform:translate(0);pointer-events:all}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-numbers-container{grid-area:1/2;display:flex;align-items:center;justify-content:space-between;gap:.25rem;width:90%}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-numbers-container .gooey-controller-number{height:1.25rem;max-width:unset;transition:.15s;overflow:visible;opacity:0;transform:translate(-.5rem);pointer-events:none}.gooey-input-container .gooey-input-content .gooey-input-color-container .gooey-input-color-body .gooey-input-color-components-container .gooey-input-color-components-numbers-container .gooey-controller-number.visible{opacity:1;transform:translate(0);pointer-events:all}.gooey-input-container .gooey-input-content .gooey-input-button-container{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.gooey-input-container .gooey-input-content .gooey-input-switch-container{position:relative;display:flex;align-items:center;justify-content:flex-start;gap:.5rem;width:100%;height:100%;height:var(--gooey-input_height)}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch{position:relative;display:flex;align-items:center;justify-content:space-between;height:66%;width:calc(var(--gooey-input-section-1_width) * .6);margin:0;padding:0;border-radius:var(--gooey-radius-sm);overflow:hidden;border:none;outline:none;transition-duration:.25s;transition-timing-function:cubic-bezier(.01,1.06,.8,1.01);box-shadow:-1px 1px 7px hsla(250,10%,var(--gooey-shadow-lightness),.33) inset,-1px 1px 1px hsla(250,10%,var(--gooey-shadow-lightness),.5) inset;background:var(--gooey-input-number-range_background);background-image:radial-gradient(circle at 25% 50% in lab,var(--gooey-theme-a) 0%,color-mix(in sRGB,var(--gooey-theme-a) 50%,transparent) 3%,color-mix(in sRGB,var(--gooey-theme-a) 20%,transparent) 10%,color-mix(in sRGB,var(--gooey-theme-a) 15%,transparent) 20%,color-mix(in sRGB,var(--gooey-theme-a) 10%,transparent) 30%,color-mix(in sRGB,var(--gooey-theme-a) 10%,transparent) 50%,var(--gooey-input-number-range_background) 100%);opacity:.7;cursor:pointer}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch .gooey-controller-switch-thumb,.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch .gooey-controller-switch-left,.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch .gooey-controller-switch-right{transition-duration:.25s;transition-timing-function:cubic-bezier(.01,1.06,.8,1.01)}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch .gooey-controller-switch-thumb{display:flex;position:absolute;right:.25rem;width:1.5rem;min-height:66%;background:var(--gooey-controller_background);border:1px solid var(--gooey-input-dim_color);border-radius:var(--gooey-radius-xs);box-shadow:0 0 #a6a7ad69,1px -1px #0002 inset;box-sizing:border-box;overflow:hidden;z-index:2}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch .gooey-controller-switch-thumb{right:calc(100% - 1.75rem)}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch.active .gooey-controller-switch-thumb{right:10%;box-shadow:-2px 0 #00000069,-2px 0 color-mix(in sRGB,var(--gooey-theme-a) 10%,transparent),1px -1px 1px #0002 inset}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch.active .gooey-controller-switch-thumb{box-shadow:-2px 0 #a6a7ad69,1px -1px 1px #0002 inset}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch:hover:not(:disabled),.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch:focus-visible:not(:disabled){color:var(--gooey-controller_color)}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch:hover{opacity:1}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--gooey-input-number-range_background);box-shadow:-1px 1px 7px #000c inset,-1px 1px 1px #000c inset;opacity:1;transition:.33s}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch:after{box-shadow:-1px 1px 7px #0002 inset,-1px 1px 1px #0002 inset}.gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch.active:after{opacity:0}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-switch-container .gooey-controller-switch{box-shadow:-1px 1px 7px #0002 inset,-1px 1px 1px #0002 inset;background-image:radial-gradient(circle at 25% 50% in lab,var(--gooey-theme-a) 3%,color-mix(in sRGB,var(--gooey-theme-a) 40%,transparent) 3%,color-mix(in sRGB,var(--gooey-theme-a) 30%,transparent) 10%,color-mix(in sRGB,var(--gooey-theme-a) 20%,transparent) 20%,color-mix(in sRGB,var(--gooey-theme-a) 10%,transparent) 30%,color-mix(in sRGB,var(--gooey-theme-a) 5%,transparent) 50%,var(--gooey-input-number-range_background) 100%)}.gooey-input-container:has(.gooey-input-buttongrid-container){height:unset}.gooey-input-container .gooey-input-content .gooey-input-buttongrid-container{display:flex;flex-direction:column;align-items:center;gap:.2rem 2rem;width:100%;padding:.25rem 0}.gooey-input-container .gooey-input-content .gooey-input-buttongrid-container .gooey-controller-buttongrid-row{display:flex;gap:.2rem 2rem;width:100%}.gooey-input-container .gooey-input-content .gooey-input-buttongrid-container .gooey-controller-buttongrid-button.active{background:var(--gooey-controller_background);color:var(--gooey-controller_color);color:var(--gooey-theme-a)}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-buttongrid-container .gooey-controller-buttongrid-button{background:var(--gooey-controller-dim_background);color:var(--gooey-controller_color)}.gooey-root[mode=light] .gooey-input-container .gooey-input-content .gooey-input-buttongrid-container .gooey-controller-buttongrid-button.active{color:var(--gooey-theme-a);background:var(--gooey-controller_background)}.gooey-input-container:hover .gooey-controller-number{background:var(--gooey-controller_background)}.gooey-input-container:hover .gooey-input-number-container .gooey-input-number-buttons-container .gooey-input-number-button svg{opacity:.75}.gooey-input-container:hover .gooey-controller-number{color:var(--gooey-fg-b)}.gooey-input-container:hover input.gooey-input-number-range::-webkit-slider-thumb{background-color:var(--gooey-bg-d);transition:.15s;opacity:1}.gooey-input-container .gooey-input-content .gooey-input-select-container{contain:content;width:100%;height:100%;font-size:calc(var(--gooey-font-size) * .8)}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected{line-height:1.25rem;height:1.25rem;box-sizing:content-box;background:var(--gooey-controller-dim_background);border-width:1px;border-style:solid;border-color:transparent;filter:unset}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:before{content:"\276f";position:absolute;top:.1rem;right:.5rem;margin:auto;color:var(--gooey-bg-d);transform:rotate(90deg) translate(0);transition-duration:var(--gooey-transition-duration);transition-property:color,transform,border-color}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected.active,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:hover,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:focus-visible,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:active{background:var(--gooey-controller_background)}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected.active[contenteditable=true],.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:hover[contenteditable=true],.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:focus-visible[contenteditable=true],.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:active[contenteditable=true]{border-color:var(--gooey-controller-dim_color)}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected.active:before,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:hover:before,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:focus-visible:before,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected:active:before{color:var(--gooey-bg-e)}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected.active:before{color:var(--gooey-fg-d);transform:rotate(90deg) translate(2px)}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected[contenteditable=true]{cursor:text}.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected[contenteditable=true]:focus-visible,.gooey-input-container .gooey-input-content .gooey-input-select-container .gooey-controller-select-selected[contenteditable=true]:active{border-color:var(--gooey-theme-a)}
`;function S(i=21){return crypto.getRandomValues(new Uint8Array(i)).reduce((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_","")}var mt=()=>$t[Math.floor(Math.random()*$t.length)],Be=Object.freeze({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}),$t=Object.keys(Be);var zt={reset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",gray:"\x1B[90m",bgBlack:"\x1B[40m",bgRed:"\x1B[41m",bgGreen:"\x1B[42m",bgYellow:"\x1B[43m",bgBlue:"\x1B[44m",bgMagenta:"\x1B[45m",bgCyan:"\x1B[46m",bgWhite:"\x1B[47m",bold:"\x1B[1m",dim:"\x1B[2m",italic:"\x1B[3m",underline:"\x1B[4m"},Ho=i=>{let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null},Ve=i=>e=>{let t=Ho(i);return t?`\x1B[38;2;${t[0]};${t[1]};${t[2]}m${e}\x1B[0m`:e},W=i=>e=>`${zt[i]}${e}${zt.reset}`,Y=W("red"),Dt=W("green"),Gt=W("yellow"),Cn=W("blue"),Ln=W("magenta"),z=W("cyan"),ft=W("gray"),$e=W("dim"),K=Ve("#ff7f50");var ze=(i,e=0)=>JSON.stringify(i,Nt([]),e);function Nt(i){let e=[];return function(t,o){if(typeof o>"u")return;if(typeof o=="function")return"[Function]";let n=i.indexOf(this);n!==-1?(i.length=n+1,e.length=n,e[n]=t):(i.push(this),e.push(t));let r=i.indexOf(o);return r!==-1?"[Circular ~"+e.slice(0,r).join(".")+"]":o instanceof Set?Array.from(o):o instanceof Map?Object.fromEntries(Array.from(o.entries()).map(([s,a])=>{let l=[...i];return[s,JSON.parse(JSON.stringify(a,Nt(l)))]})):o instanceof Element?`${o.tagName}.${Array.from(o.classList).filter(s=>!s.startsWith("s-")).join(".")}#${o.id}`:(i.length>0&&i.push(o),o)}}var te=typeof globalThis.requestIdleCallback<"u"?globalThis.requestIdleCallback:typeof globalThis.requestAnimationFrame<"u"?globalThis.requestAnimationFrame:i=>setTimeout(i,0),Kt=typeof globalThis?.cancelIdleCallback<"u"?globalThis.cancelIdleCallback:typeof globalThis.cancelAnimationFrame<"u"?globalThis.cancelAnimationFrame:globalThis.clearTimeout;function Ut(i,{maxDepth:e=2,maxLength:t=30,maxSiblings:o=4,preserveRootSiblings:n=!1,preserveFunctions:r=!1,preserveNumbers:s=!1}={}){return a(i);function a(l,c=0){let h=new WeakSet;if(l===null)return l;if(typeof l=="object"){if(h.has(l))return"[Circular]";h.add(l)}switch(typeof l){case"boolean":case"symbol":case"undefined":return l;case"function":return r?l:`[Function: ${l.name}]`;case"string":return l.length<t+3?l:l.slice(0,t)+"..";case"number":{let p=s?l.toString():l.toFixed(t);return p.length>t+3?+p.slice(0,t)+"..":+p}case"bigint":return+l.toString().slice(0,t);case"object":{let p=c>e;if(Array.isArray(l))return p?`[ ..${l.length} ]`:l.length<=o||c===0?l.map(v=>a(v,c+1)):[...l.slice(0,o).map(v=>a(v,c)),`..${l.length-o} more`];let f=Object.keys(l).length;return p?`{..${f} ${f===1?"entry":"entries"}}`:f<=o||n&&c===0?Object.fromEntries(Object.entries(l).map(([v,T])=>[v,a(T,c+1)])):Object.fromEntries(Object.entries(l).slice(0,o).concat([["..",`${f-o} more`]]).map(([v,T])=>[v,a(T,c+1)]))}}return l}}var Fo=!0,g=class i{static _BYPASS_STYLES=!1;static _BYPASS_DEFER=!0;title="";options;color;#e;constructor(e,t){typeof e=="string"?(this.title=e,this.options=t??{}):(this.options=e,this.title=e.title??"");let o=t?.fg?.toLowerCase()??mt(),n=o in Be?Be[o]:o;return this.color=Ve(n),this.#e=i.createLogger(this.title,this.options),this}get deferred(){return!i._BYPASS_DEFER&&this.options?.deferred}log=(...e)=>{this.#e(...e)};dump=(...e)=>{this.buffer.length?(e[0].match(/ⓘ|⚠|⛔|💀/)&&this.buffer.unshift(e.shift()),this.consolidateBuffer(),this.#e(...this.buffer,...e)):this.#e(...e),this.buffer=[]};trace(...e){return console.trace(...e),this}debug(...e){return import.meta?.env?.VITE_FRACTILS_LOG_LEVEL==="debug"&&this.dump("\u{1F41E}",...e),this}i=Ve("#426685")("\u24D8");info(...e){return this.dump(this.i,...e),this}warn(...e){return this.dump(Gt("\u26A0"),...e),this}error(...e){return this.dump(Y("\u26D4"),...e),this}fatal(...e){return this.dump(Y("\u{1F480}"),...e),this}group(e){let t=this.title+(e?`:${e}`:"");return this.deferred?te(()=>console.group(t)):console.group(t),this}groupCollapsed(e){let t=this.title+(e?`:${e}`:"");return this.deferred?te(()=>console.groupCollapsed(t)):console.groupCollapsed(t),this}groupEnd(){return this.deferred?te(()=>console.groupEnd()):console.groupEnd(),this}buffer=[];consolidateBuffer(){let e=new Map;for(let t of this.buffer)e.set(t,(e.get(t)??0)+1);this.buffer=Array.from(e).map(([t,o])=>o>1?`${t}x${$e(`${o}`)}`:t)}fn(e,...t){return this.buffer.push(ft(e)+$e("(")+t.map(o=>ft(typeof o=="object"?ze(o):o)).join(", ")+$e(")")),this}static createLogger(e,t){if(!Fo)return()=>{};t??={};let o=typeof globalThis.window<"u",n=!o;if(!o||t.browser===!1)return()=>{};if(n&&t.server!==!0)return()=>{};let r=t.fg||mt(),s=t.bg||"transparent",a=t.css??"";t.styled??=!0;let l=t.styled&&!i._BYPASS_STYLES;t.deferred??=!0;let c=t.deferred&&!i._BYPASS_DEFER&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),h,p="%c%s%c",[f,...v]=e.split(" "),T=[];if(v.length){for(let I of v)T.push(`color:#666;background:${s};padding:0.1rem;filter:saturate(0.25);${a}`,` ${I}`);let y=T.indexOf(T.at(-1)??"");y>=0&&(T[y]=`${T[y]}
`),p="%c%s".repeat(v.length)+`${p}`,e=f}else e=`${e}
`;let u=l?(...y)=>{let I=p;y.forEach($=>{switch(typeof $){case"bigint":case"number":I+="%d ";break;case"string":I+="%s ";break;case"object":case"boolean":case"undefined":default:I+="%o "}}),console.log(I+"%c%s",`color:${r};background:${s};padding:0.1rem;${a}`,`${e}`,...T,`color:initial;background:${s};padding:0.1rem;${a}`,...y.map($=>import.meta?.env?.VITEST?Ut($,{maxDepth:1,maxSiblings:1}):$),`color:#666;background:${s};padding:0.1rem;${a};font-size:0.66rem;`,t?.callsite?`${h}`:"")}:(...y)=>{console.log(`| ${h} |
| ${e} |`,...y)};return c?(...y)=>te(()=>u(...y)):u}},Bo=(i="LOG",e)=>g.createLogger(i,e);function O(i,e){if(typeof window>"u")return[];if(i===void 0)return[];let t=Array.isArray(i)?i:[i];return e??=document.documentElement,t.flatMap(o=>{if(!o)return[];if(o instanceof HTMLElement)return[o];if(o instanceof Document)return[document.documentElement];if(typeof o=="string"){if(o==="document"||o==="window")return[document.documentElement];if(o.startsWith("#")){let r=document.getElementById(JSON.stringify(o).slice(1));return r?[r]:(!1,[])}}let n=e.querySelectorAll(o);return n.length===0?(!1,[]):Array.from(n)})}function Vo(i,e){return i!=i?e==e:i!==e||i!==null&&typeof i=="object"||typeof i=="function"}var De=()=>{};function $o(i,e,t){if(i==null)return e(void 0),t&&t(void 0),De;let o=i.subscribe(e,t);return o.unsubscribe?()=>o.unsubscribe():o}var ge=[];function me(i,e=De){let t=null,o=new Set;function n(a){if(Vo(i,a)&&(i=a,t)){let l=!ge.length;for(let c of o)c[1](),ge.push(c,i);if(l){for(let c=0;c<ge.length;c+=2)ge[c][0](ge[c+1]);ge.length=0}}}function r(a){n(a(i))}function s(a,l=De){let c=[a,l];return o.add(c),o.size===1&&(t=e(n,r)||De),a(i),()=>{o.delete(c),o.size===0&&t&&(t(),t=null)}}return{set:n,update:r,subscribe:s}}function yt(i){let e;return $o(i,t=>e=t)(),e}var jt=(i,e,t)=>{let o=e,n=!!t?.verbose,{set:r,...s}=me(e,()=>{if(t?.browserOverride||typeof globalThis.window<"u"){v();let u=y=>{y.key===i&&v()};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}else return()=>{}}),a=JSON.stringify,l=JSON.parse,c=e instanceof Map?"Map":e instanceof Set?"Set":"";["Map","Set"].includes(c)&&(a=u=>JSON.stringify(Array.from(u.entries())),l=u=>{let y=JSON.parse(u);return Array.isArray(y)?e instanceof Map?new Map(y):e instanceof Set?new Set(y):y:(n&&console.error(`Failed to deserialize ${c} from localStorageStore:`,{parsed:y,value:u,initial:e,key:i,options:t}),u)});let p=u=>{o=u,typeof u=="string"&&u.startsWith('"')&&u.endsWith('"')&&(u=l(u)),r(u),f(u),t?.onChange?.(u)},f=u=>{try{u=a(u),localStorage.setItem(i,u)}catch(y){n&&console.error("Failed to set localStorageStore value:",{error:y,key:i,value:u})}};if(t?.defer){let u,y=f;f=I=>{Kt(u),u=te(()=>{y(I)})}}if(t?.debounce){let u=setTimeout??(()=>{}),y,I=f;f=$=>{clearTimeout(y),y=u(()=>{I($)},t.debounce)}}let v=()=>{let u=null;if(u=localStorage.getItem(i)??null,u===null)p(e);else try{let y=l(u);r(y),o=y}catch(y){n&&(console.error("Failed to parse localStorageStore value:",{key:i,localValue:u}),console.error(y))}};return{...s,set:p,update:u=>{p(u(o))}}};function b(i,e){let t=e?.key?jt(e.key,i,{debounce:e?.debounce,onChange:e?.onChange}):me(i);function o(n){n&&n(t)}return Array.isArray(i)?o(n=>{n.push=r=>{n.update(s=>[...s,r])}}):i instanceof Map&&o(n=>{n.setKey=(r,s)=>{n.update(a=>(a.set(r,s),a))},n.deleteKey=r=>{n.update(s=>{let a=new Map(s);return a.delete(r),a})}}),o(n=>{i instanceof Set&&(n.add=r=>{n.update(s=>new Set(s).add(r))},n.delete=r=>{n.update(s=>{let a=new Set(s);return a.delete(r),a})})}),{...t,isState:!0,get value(){return yt(t)},set value(n){if(n===void 0)throw new Error("Cannot set state to undefined");t.set(n)},refresh(){t.set(yt(t))}}}function H(i){return typeof i=="object"&&i.isState===!0}function oe(i){return H(i)?i.value:i}var x=(i,e,t)=>Math.max(Math.min(i,t),e);var bt={__type:"ResizableOptions",sides:["right","bottom"],corners:["bottom-right"],grabberSize:6,onResize:()=>{},localStorageKey:void 0,visible:!1,color:"var(--fg-d, #1d1d1d)",opacity:.75,borderRadius:"50%",obstacles:void 0,cursors:!0,classes:{default:"resize-grabber",active:"resize-grabbing"},bounds:"document",disabled:!1},Ge=class{constructor(e,t){this.node=e;if(this.opts=A([bt,t],{concatArrays:!1}),this.disabled=this.opts.disabled,this.#r=new g("resizable",{fg:"GreenYellow",deferred:!1}),this.#r.fn("constructor").debug({opts:this.opts,this:this}),this.node.classList.add("fractils-resizable"),this.#i=this.opts.grabberSize*3,this.bounds=O(this.opts.bounds)[0]??globalThis.document?.documentElement,this.obstacleEls=O(this.opts.obstacles),this.generateStyles(),this.size=b({width:this.node.offsetWidth,height:this.node.offsetHeight},{key:this.opts.localStorageKey}),this.opts.localStorageKey){let{width:o,height:n}=this.size.value;o===0||n===0?this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight}):((this.opts.corners.length||this.opts.sides.some(r=>r.match(/left|right/)))&&(e.style.width=o+"px"),(this.opts.corners.length||this.opts.sides.some(r=>r.match(/top|bottom/)))&&(e.style.height=n+"px")),e.dispatchEvent(new CustomEvent("resize"))}else this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight});if(this.createGrabbers(),+this.node.style.minWidth>this.boundsRect.width){console.error("Min width is greater than bounds width.");return}}static type="Resizable";static initialized=!1;id=S(8);opts;disabled;bounds;obstacleEls;size;#e=null;#t=[];#o=null;#i;#r;get boundsRect(){return this.bounds.getBoundingClientRect()}createGrabbers(){for(let[e,t]of[...this.opts.sides.map(o=>[o,"side"]),...this.opts.corners.map(o=>[o,"corner"])]){let o=document.createElement("div");o.classList.add(`${this.opts.classes.default}-${this.id}`),o.classList.add(`${this.opts.classes.default}-${t}-${this.id}`),o.classList.add(`${this.opts.classes.default}-${e}-${this.id}`),o.dataset.side=e,o.addEventListener("pointerdown",this.onGrab),this.#t.push(()=>o.removeEventListener("pointerdown",this.onGrab)),this.node.appendChild(o)}}clickOffset={x:0,y:0};onGrab=e=>{if(this.disabled)return;this.node.setPointerCapture(e.pointerId),this.#e=e.currentTarget,this.#e.classList.add(this.opts.classes.active),document.body.classList.add(this.opts.classes.active),this.obstacleEls=O(this.opts.obstacles);let t=this.#e.dataset.side;t.match(/top/)&&(this.clickOffset.y=e.clientY-this.rect.top),t.match(/bottom/)&&(this.clickOffset.y=e.clientY-this.rect.bottom),t.match(/left/)&&(this.clickOffset.x=e.clientX-this.rect.left),t.match(/right/)&&(this.clickOffset.x=e.clientX-this.rect.right),e.preventDefault(),e.stopPropagation(),this.#o?.(),document.addEventListener("pointermove",this.onMove),this.#o=()=>document.removeEventListener("pointermove",this.onMove),this.#d(),document.addEventListener("pointerup",this.onUp,{once:!0})};get translateX(){return+this.node.dataset.translateX||0}set translateX(e){this.node.dataset.translateX=String(e)}get translateY(){return+this.node.dataset.translateY||0}set translateY(e){this.node.dataset.translateY=String(e)}get rect(){return this.node.getBoundingClientRect()}#s=0;#l=0;#a=0;#c=0;#n={left:-1/0,top:-1/0,right:1/0,bottom:1/0};#d=()=>{let{minWidth:e,maxWidth:t,paddingLeft:o,paddingRight:n,borderLeftWidth:r,borderRightWidth:s,minHeight:a,maxHeight:l,paddingTop:c,paddingBottom:h,borderTopWidth:p,borderBottomWidth:f}=window.getComputedStyle(this.node),v=parseFloat(o)+parseFloat(n)+parseFloat(r)+parseFloat(s),T=parseFloat(c)+parseFloat(h)+parseFloat(p)+parseFloat(f);this.#s=Math.max((parseFloat(e)||0)+v,25),this.#l=Math.min(parseFloat(t)||1/0),this.#a=Math.max((parseFloat(a)||0)+T,25),this.#c=Math.min(parseFloat(l)||1/0),this.#n=this.bounds.getBoundingClientRect()};resizeX=(e,t)=>{let o;if(t){if(o=e-this.rect.left,o===0)return this;this.#n&&(o=Math.max(o,this.#n.left-this.rect.left));let n=x(this.rect.width-o,this.#s,this.#l);n===this.#s&&(o=this.rect.width-n),this.translateX+=o,this.node.style.setProperty("translate",`${this.translateX}px ${this.translateY}px`),this.node.style.width=`${n}px`}else{if(o=e-this.rect.right,o===0)return this;this.#n&&(o=Math.min(o,this.#n.right-this.rect.right));let n=x(this.rect.width+o,this.#s,this.#l);this.node.style.width=`${n}px`}return this};resizeY=(e,t)=>{let o;if(t){if(o=e-this.rect.top,o!=0){this.#n&&(o=Math.max(o,this.#n.top-this.rect.top));let n=x(this.rect.height-o,this.#a,this.#c);n===this.#a&&(o=this.rect.height-n),this.translateY+=o,this.node.style.setProperty("translate",`${this.translateX}px ${this.translateY}px`),this.node.style.height=`${n}px`}}else if(o=e-this.rect.bottom,o!==0){this.#n&&(o=Math.min(o,this.#n.bottom-this.rect.bottom));let n=x(this.rect.height+o,this.#a,this.#c);this.node.style.height=`${n}px`}return this};onMove=e=>{if(!this.#e){console.error("No active grabber");return}let t=e.clientX-this.clickOffset.x,o=e.clientY-this.clickOffset.y,{side:n}=this.#e.dataset;switch(this.#r.fn("onMove").debug(n),n){case"top-left":this.resizeY(o,!0).resizeX(t,!0);break;case"top-right":this.resizeY(o,!0).resizeX(t);break;case"bottom-right":this.resizeY(o).resizeX(t);break;case"bottom-left":this.resizeY(o).resizeX(t,!0);break;case"top":this.resizeY(o,!0);break;case"right":this.resizeX(t);break;case"bottom":this.resizeY(o);break;case"left":this.resizeX(t,!0);break}this.node.dispatchEvent(new CustomEvent("resize")),this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight}),this.opts.onResize({width:this.node.offsetWidth,height:this.node.offsetHeight})};onUp=()=>{this.#o?.(),document.body.classList.remove(this.opts.classes.active),this.#e?.classList.remove(this.opts.classes.active),this.node.dispatchEvent(new CustomEvent("release"))};generateStyles(){this.#r.fn("generateStyles").debug("Generating global styles for",this);let e=`
			.resize-grabber-${this.id} {
				position: absolute;
				display: flex;

				opacity: ${this.opts.visible?this.opts.opacity:0};
				border-radius: ${this.opts.borderRadius};
				border-radius: inherit;

				transition: opacity 0.1s;
			}

			.fractils-resizable:not(.fractils-grabbing) .resize-grabber-${this.id}:hover {
				opacity: ${this.opts.opacity/2};
			}

			.resize-grabber-${this.id}:active {
				opacity: ${this.opts.opacity*.75};
			}
		`;this.opts.cursors&&(e+=`
				.resize-grabbing-${this.id} *, .resize-grabber-${this.id}:active {
					cursor: grabbing !important;
				}
			`);let t=h=>this.opts.cursors?`
				cursor: ${h};`:"",o=this.opts.grabberSize/2,n=`transparent 20%, ${this.opts.color} 33%, ${this.opts.color} 66%, transparent 75%, transparent 100%`,r=98;this.opts.sides.includes("top")&&(e+=`
			.${this.opts.classes.default}-top-${this.id} {
				${t("ns-resize")}
				top: ${-o}px;
				left: ${50-r*.5}%;

				width: ${r}%;
				height: ${this.opts.grabberSize}px;

				background: linear-gradient(to bottom, ${n});
			}
		`),this.opts.sides.includes("right")&&(e+=`
			.${this.opts.classes.default}-right-${this.id} {
				${t("ew-resize")}
				right: ${-o}px;
				top: ${50-r*.5}%;

				width: ${this.opts.grabberSize}px;
				height: ${r}%;

				background: linear-gradient(to left, ${n});
			}
		`),this.opts.sides.includes("bottom")&&(e+=`
			.${this.opts.classes.default}-bottom-${this.id} {
				${t("ns-resize")}
				bottom: ${-o}px;
				left: ${50-r*.5}%;

				width: ${r}%;
				height: ${this.opts.grabberSize}px;

				background: linear-gradient(to top, ${n});
			}
		`),this.opts.sides.includes("left")&&(e+=`
				.${this.opts.classes.default}-left-${this.id} {
					${t("ew-resize")}
					left: ${-o}px;
					top: ${50-r*.5}%;

					width: ${this.opts.grabberSize}px;
					height: ${r}%;

					background: linear-gradient(to right, ${n});
				}
			`),e+=".fractils-grabbing .resize-grabber { cursor: default }";let s=this.#i,a={"top-left":"100% 100%","top-right":"0% 100%","bottom-left":"100% 0%","bottom-right":"0% 0%"},l=(h,p)=>{if(!this.opts.corners.includes(h))return;let f=`${this.opts.classes.default}-${h}-${this.id}`,v=h.replace(this.opts.classes.default,"").split("-");e+=`
				.${f} {${t(p)}
					${v[0]}: 0px;
					${v[1]}: 0px;
					width: ${s}px;
					height: ${s}px;
				}
				.${f}::after {
					content: '';
					width: 100%;
					height: 100%;
					background: radial-gradient(farthest-corner at ${a[h]}, transparent 70%, ${this.opts.color} 86%);
					border-radius: 15%;
				}
			`};l("top-left","nwse-resize"),l("top-right","nesw-resize"),l("bottom-left","nesw-resize"),l("bottom-right","nwse-resize");let c=document.createElement("style");c.innerHTML=e,document.head.appendChild(c)}dispose(){for(let e of this.#t)e();this.#o?.()}};function Wt(i){return i!==void 0}function Ne(i){return typeof i=="string"}function Yt(i){return i instanceof HTMLElement}function Ke(i){return!!i&&typeof i=="object"}var E=class{_unlisteners=new Map;_handlers=new Map;_listenerGroups=new Map;_log=new g("EventManager",{fg:"beige"});constructor(e){e&&this.registerEvents([...e])}registerEvents(e){for(let t of e)this._handlers.set(t,new Map)}on(e,t){if(this._log.fn("on").debug(this),!this._handlers.has(e))return this._log.warn(`Event "${String(e)}" is not registered.`,this),"";this._log.debug("new listener:",{event:e,callback:t});let o=S();return this._handlers.get(e).set(o,t),o}emit(e,...t){this._log.fn("emit").debug({event:e});let o=this._handlers.get(e);if(o)for(let n of o.values())n(...t)}listen=(e,t,o,n,r)=>{let s=S();return e.removeEventListener(t,o,n),e.addEventListener(t,o,n),this._unlisteners.set(s,()=>{e.removeEventListener(t,o,n)}),r&&this.group(r,s),s};add=(e,t)=>{let o=S();return this._unlisteners.set(o,e),t&&this.group(t,o),o};group(e,t){return this._listenerGroups.has(e)||this._listenerGroups.set(e,new Set),this._listenerGroups.get(e).add(t),this}unlisten(e){return this._unlisteners.get(e)?.(),this._unlisteners.delete(e)}clear(){for(let e of this._unlisteners.values())e();return this._unlisteners.clear(),this._listenerGroups.clear(),this.clearHandlers(),this}clearHandlers(){for(let e of this._handlers.values())e.clear();return this._handlers.clear(),this}clearGroup(e){let t=this._listenerGroups.get(e);if(t){for(let o of t){let n=this._unlisteners.get(o);n&&n(),this._unlisteners.delete(o)}this._listenerGroups.delete(e)}return this}dispose(){this.clear(),this.clearHandlers()}};function Ue(i,e=void 0,t=!1){let o=()=>typeof localStorage>"u"?(t||console.warn(`localStorage is not available for key "${i}"`),!0):!1,n=e;return{get(){if(o())return n;let r=localStorage.getItem(i);return r?JSON.parse(r):n},set(r){o()||(n=r,localStorage.setItem(i,JSON.stringify(r)))},update(r){this.set(r(this.get()))},get value(){return this.get()},set value(r){this.set(r)}}}function je(i,e="top-right",t){let{bounds:o,margin:n}=Object.assign({bounds:void 0,margin:10},t),r=typeof i=="string"?O(i)[0]?.getBoundingClientRect():i instanceof Element?i.getBoundingClientRect():i;if(!r)throw new Error("Invalid node: "+i);let s=o==="window"&&typeof window<"u"?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:typeof o=="string"?O(o)[0]?.getBoundingClientRect():o??{x:0,y:0,width:100,height:100};if(!s)throw new Error("Invalid bounds: "+o);let a=typeof n=="number"?{x:n,y:n}:Object.assign({x:0,y:0},n);switch(e){case"center":case"center-center":return{x:s.width/2-r.width/2,y:s.height/2-r.height/2};case"top-left":case"left-top":return{x:a.x,y:a.y};case"top-center":case"center-top":return{x:s.width/2-r.width/2,y:a.y};case"top-right":case"right-top":return{x:s.width-r.width-a.x,y:a.y};case"bottom-left":case"left-bottom":return{x:a.x,y:s.height-r.height-a.y};case"bottom-center":case"center-bottom":return{x:s.width/2-r.width/2,y:s.height-r.height-a.y};case"bottom-right":case"right-bottom":return{x:s.width-r.width-a.x,y:s.height-r.height-a.y};case"left-center":case"center-left":return{x:a.x,y:s.height/2-r.height/2};case"right-center":case"center-right":return{x:s.width-r.width-a.x,y:s.height/2-r.height/2};default:throw new Error("Invalid placement: "+e)}}var zo={default:"fractils-draggable",dragging:"fractils-dragging",dragged:"fractils-dragged",cancel:"fractils-cancel"},fe={__type:"DraggableOptions",bounds:"body",axis:"both",userSelectNone:!0,ignoreMultitouch:!1,disabled:!1,position:{x:0,y:0},margin:0,cancel:void 0,handle:void 0,obstacles:void 0,classes:zo,onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{},onCollision:()=>{},transform:void 0,localStorageKey:void 0},We=class{constructor(e,t){this.node=e;let{margin:o}=t??fe,n=typeof o=="number"?{x:o,y:o}:Object.assign({x:0,y:0},o);this.opts=Object.assign({},fe,t,{margin:n}),this._log=new g("draggable "+Array.from(this.node.classList).join("."),{fg:"SkyBlue"}),this._log.fn("constructor").debug({opts:this.opts,this:this}),this._rect=this.node.getBoundingClientRect(),this._recomputeBounds=this._resolveBounds(this.opts.bounds),this.opts.position=this.resolvePosition(this.opts.position),this.positionStore=me(this.opts.position),this.node.classList.add(this.opts.classes.default);let r=this.opts.position;if(t?.localStorageKey){this._storage=Ue(t.localStorageKey,r);let s=this._storage.get();s&&(r.x=s.x,r.y=s.y)}this.x=r.x,this.y=r.y,this.node.style.setProperty("touch-action","none"),this.handleEls=this.opts.handle?O(this.opts.handle,this.node):[this.node],this.cancelEls=O(this.opts.cancel,this.node),this.obstacleEls=O(this.opts.obstacles),this._evm.listen(this.node,"pointerdown",this.dragStart),this._evm.listen(window,"pointerup",this.dragEnd),this._evm.listen(window,"pointermove",this.drag),this._evm.listen(window,"resize",this.resize),this._evm.add(this.positionStore.subscribe(({x:s,y:a})=>{this.node.style.setProperty("translate",`${s}px ${a}px 1px`)})),r!==fe.position&&(this._recomputeBounds(),this._position={x:this.x,y:this.y},this.moveTo(r))}static initialized=!1;opts;disabled=!1;clickOffset={x:0,y:0};clientToNodeOffset={x:0,y:0};boundsEl;handleEls;cancelEls;obstacleEls;bounds={left:-1/0,top:-1/0,right:1/0,bottom:1/0};_storage;_position={x:0,y:0};positionStore;eventTarget;_active=!1;_bodyOriginalUserSelectVal="";_recomputeBounds;_rect;_evm=new E;_releaseCapture=()=>{};_log;get position(){return this._position}set position(e){this._position=e,this.moveTo(e),this.updateLocalStorage()}get x(){return+this.node.dataset.translateX||0}set x(e){this.node.dataset.translateX=String(e)}get y(){return+this.node.dataset.translateY||0}set y(e){this.node.dataset.translateY=String(e)}get canMoveX(){return/(both|x)/.test(this.opts.axis)}get canMoveY(){return/(both|y)/.test(this.opts.axis)}get eventData(){return{x:this.x,y:this.y,rootNode:this.node,eventTarget:this.eventTarget}}get isControlled(){return!!this.opts.position}dragStart=e=>{if(this.disabled||e.button===2||this.opts.ignoreMultitouch&&!e.isPrimary||e.composedPath().some(n=>n.classList?.contains(this.opts.classes.cancel)))return;if(this.obstacleEls=O(this.opts.obstacles),!1)for(let n of this.obstacleEls)n.dataset.outline=n.style.outline,n.style.outline="2px dotted #f007";if(Ne(this.opts.handle)&&Ne(this.opts.cancel)&&this.opts.handle===this.opts.cancel)throw new Error("`handle` selector can't be same as `cancel` selector");if(this._cancelElementContains(this.handleEls))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");let t=e.composedPath()[0];if(!this.handleEls.some(n=>n.contains(t)||n.shadowRoot?.contains(t))||this._cancelElementContains([t]))return;this._log.fn("dragStart").debug("Dragging initiated."),e.stopPropagation(),this.eventTarget=this.handleEls.length===1?this.node:this.handleEls.find(n=>n.contains(t)),this._active=!0,this.canMoveX&&(this.clickOffset.x=e.clientX-this.x),this.canMoveY&&(this.clickOffset.y=e.clientY-this.y),this._updateRect(),this.bounds&&(this.clientToNodeOffset={x:e.clientX-this.rect.left,y:e.clientY-this.rect.top}),this.positionStore.set({x:this.x,y:this.y}),this._recomputeBounds(),this.node.dispatchEvent(new CustomEvent("grab"));let{cursor:o}=getComputedStyle(this.node);this.node.setPointerCapture(e.pointerId),this.node.style.cursor="grabbing",this._releaseCapture=()=>{this.node.style.cursor=o},this._emitDragStart(),this._emitUpdate()};boundsDiff={x:0,y:0};get rect(){return this._rect}_updateRect(){this._rect=this.node.getBoundingClientRect(),this.boundsDiff={x:this.x-this.rect.x,y:this.y-this.rect.y}}drag=e=>{if(!this._active)return;e.preventDefault(),e.stopPropagation(),this.node.classList.add(this.opts.classes.dragging),this.node.classList.add(this.opts.classes.dragged);let t=e.clientX-this.clickOffset.x,o=e.clientY-this.clickOffset.y,n={x:t,y:o};this.moveTo(n),this._emitDrag()};dragEnd=()=>{this._active&&(this.node.classList.remove(this.opts.classes.dragging),this.opts.userSelectNone&&(document.body.style.userSelect=this._bodyOriginalUserSelectVal),this.clickOffset={x:0,y:0},this.clientToNodeOffset={x:0,y:0},this._position={x:this.x,y:this.y},this._active=!1,this._releaseCapture(),this.node.dispatchEvent(new CustomEvent("release")),setTimeout(()=>this.node.classList.remove(this.opts.classes.dragged),0),this._emitDragEnd(),this.updateLocalStorage())};resize=()=>{this._recomputeBounds(),this.moveTo(this.position)};moveTo(e){if(!(this.disabled||this.disposed)){if(this._log.fn("moveTo").debug("Moving to:",e,{rect:this.rect,bounds:this.bounds}),this.bounds&&(e.x=x(e.x,this.bounds.left+this.boundsDiff.x,this.bounds.right+this.boundsDiff.x-(this.rect.right-this.rect.left)),e.y=x(e.y,this.bounds.top+this.boundsDiff.y,this.bounds.bottom+this.boundsDiff.y-(this.rect.bottom-this.rect.top))),this.canMoveX){let t=e.x-this.x;t!==0&&(this.x+=t)}if(this.canMoveY){this.bounds&&(e.y=x(e.y,this.bounds.top+this.boundsDiff.y,this.bounds.bottom+this.boundsDiff.y));let t=e.y-this.y;t!==0&&(this.y+=t)}if(!this.opts.transform)this.positionStore.set({x:this.x,y:this.y});else{let t=this.opts.transform?.({x:this.x,y:this.y,rootNode:this.node,eventTarget:this.eventTarget});if(t&&"x"in t&&"y"in t){let{x:o,y:n}=t;this.positionStore.set({x:o,y:n})}}this._emitUpdate()}}update(e=this.position){this._log.fn("update").debug("Updating position:",e,this),this.moveTo(e)}updateLocalStorage=()=>{this.opts.localStorageKey&&(this._log.fn("updateLocalStorage").debug("Updating position in localStorage:",`{ x: ${this._position.x}, y: ${this._position.y} }`,this),this._storage&&this._storage.set(this._position))};clearLocalStorage=()=>{this._storage&&this.opts.localStorageKey&&localStorage.removeItem(this.opts.localStorageKey)};resolvePosition(e){let t=fe.position;if(!e||this.disposed)return t;if(typeof e=="string")return je(this.node,e,{bounds:this.boundsEl?.getBoundingClientRect(),margin:this.opts.margin});if(typeof e=="object"&&("x"in e||"y"in e))return{x:(e.x??t.x)+this.opts.margin.x,y:(e.y??t.y)+this.opts.margin.y};throw new Error("Invalid position: "+JSON.stringify(e),{cause:{defaultPos:t,pos:e}})}_resolveBounds(e){if(this.disposed)return()=>{};let o=(()=>{if(!e)return()=>{};if(e&&typeof e=="object"&&("left"in e||"right"in e||"top"in e||"bottom"in e))return()=>{Object.assign(this.bounds,e)};let n=Yt(e)?e:e==="body"?document.body:e==="parent"?this.node.offsetParent:Ne(e)?O(e)[0]:Wt(e)?void 0:document.documentElement;if(!n){console.error(`Invalid bounds option provided: ${e}. Aborting.`);return}this.boundsEl=n;let r=new ResizeObserver(()=>{this.resize(),this._emitUpdate()});return r.observe(n),this._evm.add(()=>r.disconnect()),this._emitUpdate(),()=>{let s=n.getBoundingClientRect();this.bounds.left=s.left,this.bounds.top=s.top,this.bounds.right=s.right,this.bounds.bottom=s.bottom}})();return()=>{o?.(),this._updateRect()}}_cancelElementContains=e=>this.cancelEls.some(t=>e.some(o=>t.contains(o)));_callEvent=(e,t)=>{let o=this.eventData;this.node.dispatchEvent(new CustomEvent(e,{detail:o})),t?.(o)};_emitDragStart=()=>{this._callEvent("dragstart",this.opts.onDragStart)};_emitDragEnd=()=>{this._callEvent("dragend",this.opts.onDragEnd)};_emitDrag=()=>{this._callEvent("drag",this.opts.onDrag)};_emitUpdate=()=>{this.node.dispatchEvent(new CustomEvent("update",{detail:this}))};disposed=!1;dispose(){this.disposed=!0,this._evm.dispose()}};function ye(i,e){return typeof i>"u"||i===!0?e:i===!1?!1:typeof i=="object"?A([e,i],{concatArrays:!1}):i}var Ye={__type:"WindowManagerStorageOptions",key:"window-manager",size:!0,position:!0,debounce:50},Xe={__type:"WindowManagerOptions",resizable:bt,draggable:fe,zFloor:10,preserveZ:!1,bounds:void 0,obstacles:void 0,localStorage:void 0},be=class{windows=new Map;opts;_log=new g("WindowManager",{fg:"lightseagreen"});_evm=new E;constructor(e){e??=Xe,e.__type="WindowManagerOptions",this.opts=Object.freeze(this._resolveOptions(e)),this._log.fn("constructor").debug({opts:this.opts,options:e,this:this})}add=(e,t)=>{let o=new vt(this,e,t);this.windows.set(o.id,o);let n=this._evm.listen(e,"grab",this.select);return{destroy:()=>{o.dispose(),this.windows.delete(o.id),this._evm.unlisten(n)}}};update(){this.windows.forEach(({resizableInstance:e,draggableInstance:t})=>{t&&t.update(),e&&(e.size=e.size)})}applyZ(){let e=0;for(let t of this.windows.values())t.node.style.setProperty("z-index",String(this.opts.zFloor+e++));return this}select=e=>{let t=e.currentTarget,o=this.windows.get(t.id);if(!o)throw new Error("Unable to resolve instance from selected node: "+t.id);if(this.windows.size>1){let n=t.style.getPropertyValue("z-index");t.style.setProperty("z-index",String(this.opts.zFloor+this.windows.size)),t.dataset.keepZ==="true"||this.opts.preserveZ?addEventListener("pointerup",()=>t.style.setProperty("z-index",n),{once:!0}):(this.windows.delete(o.id),this.windows.set(o.id,o),this.applyZ())}return this};_resolveOptions(e,t=Xe){let o={};return o.zFloor=e?.zFloor??t.zFloor,o.preserveZ=e?.preserveZ??t.preserveZ,o.draggable=ye(e?.draggable,t.draggable),o.resizable=ye(e?.resizable,t.resizable),o.bounds=e?.bounds??(Ke(e?.draggable)?e.draggable.bounds:t.bounds),o.bounds&&(o.draggable&&(o.draggable.bounds=o.bounds),o.resizable&&(o.resizable.bounds=o.bounds)),o.draggable&&(o.draggable.margin||=16),typeof e?.localStorage<"u"&&(e.localStorage===!0?o.localStorage=Ye:typeof e.localStorage=="object"&&(o.localStorage=Object.assign({},Ye,e.localStorage),Ke(o.draggable)&&(o.localStorage.position===!1?o.draggable.localStorageKey=void 0:o.draggable.localStorageKey=o.localStorage.key),Ke(o.resizable)&&(o.resizable.localStorageKey=o.localStorage.key))),o}dispose(){this._log.fn("dispose").debug(this),this._evm?.dispose();for(let e of this.windows.values())e?.dispose();this.windows.clear()}},vt=class{constructor(e,t,o){this.manager=e;this.node=t;this.id=t.id||o?.id||`wm-instance-${S(8)}`,t.id||=this.id;let n=e._resolveOptions(o,e.opts),r=n.draggable,s=n.resizable;if(o?.localStorage===!1)r&&(r.localStorageKey=void 0),s&&(s.localStorageKey=void 0);else{if(typeof r=="object"&&r.localStorageKey!==void 0){let a=[];typeof r.localStorageKey>"u"?typeof e.opts.localStorage=="object"?a.push(e.opts.localStorage.key):a.push(Ye.key):r.localStorageKey&&a.push(r.localStorageKey),a.push("wm",`${this.manager.windows.size}`,"position"),r.localStorageKey=a.join("::")}if(typeof s=="object"&&s.localStorageKey!==void 0){let a=[];typeof s.localStorageKey>"u"?typeof e.opts.localStorage=="object"?a.push(e.opts.localStorage.key):a.push(Ye.key):s.localStorageKey&&a.push(s.localStorageKey),a.push("wm",`${this.manager.windows.size}`,"size"),s.localStorageKey=a.join("::")}}this.draggableInstance=new We(t,r||{disabled:!0}),this.resizableInstance=new Ge(t,s||{disabled:!0}),n?.preserveZ&&(t.dataset.keepZ="true")}draggableInstance;resizableInstance;id;position=b({x:0,y:0});size=b({width:0,height:0});dispose(){this.resizableInstance?.dispose(),this.draggableInstance?.dispose()}};function X(i){return class extends i{static initialized=!1;static stylesheet;constructor(...e){if(super(...e),typeof globalThis.document<"u"){let t=this.constructor;if(!t.style||t.initialized)return;if(t.initialized=!0,!t.stylesheet){let o=document.createElement("style");o.innerHTML=t.style,document.head.appendChild(o),t.stylesheet=o}}else throw new Error("@styled components can only be used in the browser")}}}function k(i){if(typeof i!="object"||i===null)throw console.error("Error: Invalid object",i),new Error("`entries()` util called with invalid object: "+i);return Object.entries(i)}function Xt(i){if(typeof i!="object"&&i===null)throw console.error("Error: Invalid object",i),new Error("`keys()` util called with invalid object.");return Object.keys(i)}function Je(i){if(typeof i!="object"&&i===null)throw console.error("Error: Invalid object",i),new Error("`values()` util called with invalid object.");return Object.values(i)}function _(i){return typeof i=="function"?i:()=>i}var qe={__type:"TooltipOptions",text:"",placement:"top",anchor:"node",delay:250,delayOut:0,offsetX:"0%",offsetY:"0%",animation:{duration:300,durationOut:150,easing:"cubic-bezier(0.23, 1, 0.320, 1)"},style:void 0,hideOnClick:!1},R=class{constructor(e,t){this.node=e;let o=A([qe,t]);this.opts=o,this.placement=o.placement,this._text=_(o.text),this.parent=t?.parent??document.getElementById("svelte")??document.body;let n=document.createElement("div");if(n.classList.add("fractils-tooltip"),n.innerHTML=String(this._text()),o.style)for(let[r,s]of k(o.style))r&&s&&n.style.setProperty(r,s);if(this.element=n,o.style)for(let[r,s]of k(o.style))r&&s&&this.element?.style.setProperty(r,s);this._evm.listen(e,"pointerenter",this.show),this._evm.listen(e,"pointerleave",this.hide),this._evm.listen(e,"pointermove",this._updatePosition),this._evm.listen(e,"click",()=>{o.hideOnClick?this.hide():this.refresh()})}__type="Tooltip";element;parent;showing=!1;opts;_text;_evm=new E;_animPositions;_delayInTimer;_delayOutTimer;refresh(){this.element&&(this.element.innerHTML=String(this.text),setTimeout(()=>this._updatePosition(),0),this._maybeWatchAnchor(),clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer))}get text(){return this._text()}set text(e){this._text=_(e),this.element&&(this.element.innerHTML=String(this._text()))}get placement(){return this.opts.placement}set placement(e){switch(this.opts.placement=e,e){case"top":this._animPositions={from:"translateY(4px)",to:"translateY(0)"};break;case"bottom":this._animPositions={from:"translateY(-4px)",to:"translateY(0)"};break;case"left":this._animPositions={from:"translateX(4px)",to:"translateX(0)"};break;case"right":this._animPositions={from:"translateX(-4px)",to:"translateX(0)"}}}get offsetX(){return this.opts.offsetX}set offsetX(e){this.opts.offsetX=e,this._updatePosition()}get offsetY(){return this.opts.offsetY}set offsetY(e){this.opts.offsetY=e,this._updatePosition()}show=()=>{this.showing||this.text&&(clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer),this._delayInTimer=setTimeout(async()=>{this.element&&this.parent?.appendChild(this.element),this.showing=!0,this.element?.animate([{opacity:"0",transform:this._animPositions.from},{opacity:"1",transform:this._animPositions.to}],{duration:this.opts.animation.duration,easing:this.opts.animation.easing,fill:"forwards"}),this._updatePosition(),this._maybeWatchAnchor()},this.opts.delay))};hide=()=>{clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer),this._delayOutTimer=setTimeout(async()=>{this.showing&&(this.showing=!1,this._watcherId&&this._evm.unlisten(this._watcherId),await this.element?.animate([{opacity:"1",transform:this._animPositions.to},{opacity:"0",transform:this._animPositions.from}],{duration:this.opts.animation.durationOut,easing:this.opts.animation.easing,fill:"forwards"}).finished,this.unmount())},this.opts.delayOut)};_mounted=!1;mount(){this._mounted||(this._mounted=!0,this.element&&this.parent?.appendChild(this.element))}unmount(){this._mounted&&(this._mounted=!1,this.element&&this.parent?.removeChild(this.element))}_updatePosition=e=>{if(!this.element)return;let t=this.element.getBoundingClientRect();this.element.innerHTML!==this.text&&(this.element.innerHTML=String(this.text)),e?.type==="pointermove"&&(this._mouse={x:e.clientX,y:e.clientY});let o=this._getAnchorRects();if(!o)return;let n=0,r=0,s=4;switch(this.element.classList.add("fractils-tooltip-"+this.placement),this.placement){case"top":n=o.x.left+window.scrollX+o.x.width/2-t.width/2,r=o.y.top+window.scrollY-t.height-s;break;case"bottom":n=o.x.left+window.scrollX+o.x.width/2-t.width/2,r=o.y.top+window.scrollY+o.y.height+s;break;case"left":n=o.x.left+window.scrollX-t.width-s,r=o.y.top+window.scrollY+o.y.height/2-t.height/2;break;case"right":n=o.x.left+window.scrollX+o.x.width+s,r=o.y.top+window.scrollY+o.y.height/2-t.height/2;break}let a=this.parent?.getBoundingClientRect();a&&(this.element.style.left=`calc(${n-a.left}px + ${this.opts.offsetX})`,this.element.style.top=`calc(${r-a.top}px + ${this.opts.offsetY})`)};_mouse={x:0,y:0};_getAnchorRects(){let e=o=>{if(!o)return this.node?.getBoundingClientRect();switch(typeof o){case"string":switch(o){case"node":return this.node?.getBoundingClientRect();case"mouse":return{left:this._mouse.x+window.scrollX,top:this._mouse.y+window.scrollY,width:0,height:0};default:{let n=document.querySelector(o);return n?n.getBoundingClientRect():(!1,this.node?.getBoundingClientRect())}}case"object":return o&&"x"in o&&"y"in o?"separate":o instanceof HTMLElement?o.getBoundingClientRect():(!1,this.node?.getBoundingClientRect());default:return!1,this.node?.getBoundingClientRect()}},t=e(this.opts.anchor);if(t==="separate"){let o=e(this.opts.anchor.x),n=e(this.opts.anchor.y);return!o||!n?void 0:{x:o,y:n}}if(t)return{x:t,y:t}}_watcherId;_maybeWatchAnchor(){let e=o=>{if(!o)return;let n=o instanceof HTMLElement?o:this.node?.querySelector(o)??document.querySelector(o),r=()=>{n&&this._watch(n)};n&&(this._watcherId&&this._evm.unlisten(this._watcherId),this._watcherId=this._evm.listen(n,"transitionrun",r,{},"anchor"))},t=o=>o instanceof HTMLElement?o:typeof o=="string"?o==="node"?this.node:o==="mouse"?null:o:null;if(this.opts.anchor&&typeof this.opts.anchor=="object"&&"x"in this.opts.anchor&&"y"in this.opts.anchor){let o=t(this.opts.anchor.x),n=t(this.opts.anchor.y);o===n?e(o):(e(o),e(n))}else e(t(this.opts.anchor))}_watchingAnchor=!1;_watchingFinished=!1;_watchTimeout=void 0;_watch(e){if(this._watchingAnchor)return;this._watchingFinished=!1,this._watchingAnchor=!0;let t=()=>{this._watchingFinished=!0,this._watchingAnchor=!1,this.element?.style.setProperty("transition-duration","0.1s"),o&&e.removeEventListener("transitionend",o)},o=()=>{this._watchingFinished||t()};if(!this.showing){t();return}clearTimeout(this._watchTimeout),this._watchTimeout=setTimeout(()=>{this._watchingFinished||t()},500),e.removeEventListener("transitionend",o),e.addEventListener("transitionend",o),this._watchingFinished||(this.node?.style.setProperty("transition-duration","0s"),Jt(()=>this._watchingFinished?!0:(this._updatePosition(),!1)))}dispose(){clearTimeout(this._watchTimeout),this._evm.dispose(),this.element?.remove()}};w(R,"style",`
		.fractils-tooltip {
			position: absolute;

			min-width: 3rem;
			max-width: auto;
			min-height: auto;
			max-height: auto;
			padding: 4px 8px;

			opacity: 0;
			color: var(--fg-a, #fff);
			background-color: var(--bg-a, #000);
			border-radius: var(--radius-sm, 4px);
			box-shadow: var(--shadow, 0rem 0.0313rem 0.0469rem hsl(var(--shadow-color) / 0.02),
				0rem 0.125rem 0.0938rem hsl(var(--shadow-color) / 0.02),
				0rem 0.1563rem 0.125rem hsl(var(--shadow-color) / 0.025),
				0rem 0.1875rem 0.1875rem hsl(var(--shadow-color) / 0.05),
				0rem 0.3125rem 0.3125rem hsl(var(--shadow-color) / 0.05),
				0rem 0.4375rem 0.625rem hsl(var(--shadow-color) / 0.075));

			text-align: center;
			font-size: var(--font-size-sm, 12px);
			font-family: var(--gooey-font, var(--font-a, 'fredoka'));
			letter-spacing: 1px;

			z-index: 1000;
			pointer-events: none;
			transition: opacity 0.1s;
		}

		.fractils-tooltip .fractils-hotkey {
			filter: contrast(1.1);
			background: var(--fractils-hotkey_background, #1118);
			background: var(--fractils-hotkey_background, color-mix(in sRGB, var(--bg-c) 66%, transparent));
			color: var(--fractils-hotkey_color, var(--fg-a, #fff));
			padding: 0px 3px;
			border-radius: 2px;
			box-shadow: 0 0 2px rgba(0, 0, 0, 0.33);
		}

		:root[theme='dark'] .fractils-tooltip .fractils-hotkey {
			background: var(--fractils-hotkey_background, color-mix(in sRGB, var(--bg-d) 100%, transparent));
		}
	`),R=L([X],R);var xt=(i,e)=>{let t=new R(i,e);return{update(o){Object.assign(t.opts,o),t.refresh()},destroy(){t.dispose()}}};function Jt(i){requestAnimationFrame(()=>{i()||Jt(i)})}function d(i,e){let t=globalThis?.document?.createElement(i);if(e){if(e.classes&&t.classList.add(...e.classes),e.id&&(t.id=e.id),e.innerHTML&&(t.innerHTML=e.innerHTML),e.textContent&&(t.textContent=e.textContent),e.innerText&&(t.innerText=e.innerText),e.cssText&&(t.style.cssText=e.cssText),e.dataset&&Object.assign(t.dataset,e.dataset),e.value&&t instanceof HTMLInputElement&&(t.value=e.value),e.type&&t.setAttribute("type",e.type),e.min&&t.setAttribute("min",String(e.min)),e.max&&t.setAttribute("max",String(e.max)),e.step&&t.setAttribute("step",String(e.step)),e.attributes)for(let[o,n]of k(e.attributes))t.setAttribute(o,n);if(e.style)for(let[o,n]of k(e.style))t.style[o]=String(n);if(e.variables)for(let[o,n]of k(e.variables))t.style.setProperty(o,String(n));if(e.parent&&e.parent.appendChild(t),e.tooltip&&(t.tooltip={},e.tooltipInstance?t.tooltip=e.tooltipInstance:t.tooltip=new R(t,e.tooltip)),e.children)for(let o of e.children??[]){if(t===null)throw new Error("This should never happen");o&&t.appendChild(o)}e.onclick&&t.addEventListener("click",e.onclick)}if(!1){let o=new Error().stack;Do(o,t)}return t}function Do(i,e){let t=No(i);t&&e.addEventListener("contextmenu",o=>{o.metaKey&&o.altKey&&(o.preventDefault(),o.stopPropagation(),console.log(o.target),Go(t))},{capture:!1})}function Go(i){let e="/__open-in-editor?file="+i;fetch(e).then(t=>{console.log(t.status,e)}).catch(t=>{console.error("Failed to open file in editor:",t)})}function No(i){let e=i?.split(`
`)[2].trim(),t=/http:\/\/[^ )]+/,o=/\?t=\d+/,n=e?.match(t)?.[0]?.replace(o,"");if(n)try{return new URL(n).pathname.slice(1)}catch(r){console.error("Failed to parse file from stack:",r)}return null}var ne=class{class="gooey-icon-rename";element;classes=[this.class,"gooey-icon"];constructor(){this.element=d("div",{classes:this.classes,innerHTML:`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" >
                    <path class="cursor top" fill="none" stroke="currentColor" d="M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1" vector-effect="non-scaling-stroke"></path>
                    <path class="cursor bottom"fill="none" stroke="currentColor" d="M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5" vector-effect="non-scaling-stroke"></path>
                    <rect class="box full" fill="currentColor" stroke="none" x="1" y="8" width="18" height="8" rx="2" vector-effect="non-scaling-stroke"></rect>
                    <path class="cursor middle"fill="none" stroke="currentColor" d="M9 7v10" vector-effect="non-scaling-stroke"></path>
                </svg>
            `.replaceAll(/\t|\n/g,"")})}};w(ne,"style",`
        .gooey-icon-rename {
            width: 1.5rem;
            height: 1.5rem;

            margin-right: 0.5rem;
            padding: 0.125rem;

            color: var(--gooey-controller-dim_color);
            opacity: 0.5;

            transition: opacity 0.15s;

            z-index: 1;
            cursor: pointer;

            pointer-events: all;
        }

        .gooey-icon-rename:hover {
            opacity: 1;
        }

        .gooey-icon-rename svg {
            width: 100%;
            height: 100%;

            pointer-events: none;
        }

        .gooey-icon-rename path {
            color: var(--gooey-controller-dim_color);
            /* stroke: var(--gooey-controller-dim_color); */
        }
        .gooey-icon-rename .cursor {
            transform: translate(2px, 0) scale(1, 0.9);

            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-delay: 0s;
            transition-property: opacity, transform;
            transform-origin: center;
        }
        .gooey-icon-rename:hover .cursor, .gooey-icon-rename.active .cursor {
            transform: translate(0, 0);
            transform: translate(0, 0) scale(1, 0.9);
        }
        .gooey-icon-rename.active .cursor {
            color: var(--gooey-theme-a);
            animation: blink 1.5s infinite;
            animation-delay: 0.5s;
        }

        @keyframes blink {
            0%, 45%, 80% {
                opacity: 1;
            }
            50%, 75% {
                opacity: 0;
            }
        }

        .gooey-icon-rename .box {
            color: var(--gooey-folder-dim_color);

            opacity: 0;
            transform: scale(0);

            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: opacity, transform;
            transform-origin: center;
        }
        .gooey-icon-rename:hover .box, .gooey-icon-rename.active .box {
            opacity: 0.25;
            transform: scale(1.1);
            color: var(--gooey-controller_color);
        }
        .gooey-icon-rename:hover .box {
            transform: scale(1);
        }
        
        .gooey-icon-rename.disabled {
            opacity: 0;
            pointer-events: none;
            cursor: default;
        }
    `),ne=L([X],ne);function Tt(i,e){return typeof i!="object"||i===null||["object","function"].includes(e)?typeof i===e:"__type"in i&&i.__type===e}var ie=class{element;constructor(){this.element=d("div",{classes:["gooey-icon-save","gooey-icon"],innerHTML:`
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <g class="Frame">
                        <path class="back-group" fill="currentColor" fill-rule="evenodd" d="M6.127 21A3.496 3.496 0 0 0 9 22.5h10a3.5 3.5 0 0 0 3.5-3.5V9c0-1.19-.593-2.24-1.5-2.873V7.5c.314.418.5.937.5 1.5v10a2.5 2.5 0 0 1-2.5 2.5H9a2.489 2.489 0 0 1-1.5-.5H6.127Z" class="Subtract" clip-rule="evenodd"/>
                        <rect width="16" height="16" x="3" y="3" fill="currentColor" stroke-width="1.5" class="front" rx="2"/>
                        <g class="plus">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M11 8v7" class="vertical"/>
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M14.5 11.5h-7" class="horizontal"/>
                        </g>
                    </g>
                </svg>
            `.replaceAll(/\t|\n/g,"")})}};w(ie,"style",`
        .gooey-icon-save {
            width: 1.5rem;
            height: 1.5rem;

            color: var(--gooey-controller-dim_color);
            margin-right: 0.25rem;
            opacity: 0.5;

            transition: opacity 0.15s;

            z-index: 1;
            cursor: pointer;
        }

        .gooey-icon-save:hover {
            opacity: 1;
        }

        .gooey-icon-save .back-group {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: opacity, transform;
            transition-delay: 0s;
            
            opacity: 0;
            transform: translate(-0.25rem, -0.25rem);
        }
        .gooey-icon-save:hover .back-group {
            opacity: 1;
            transition-delay: 0.25s;
            transform: translate(0, 0);
        }

        .gooey-icon-save .plus {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: color, transform;
            transform-origin: center;

            transform: scale(1.5);
        }
        .gooey-icon-save:hover .plus {
            transform: scale(1);
            color: var(--gooey-bg-a);
        }

        .gooey-icon-save .front {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: transform, opacity;

            transform: scale(1.25);
            opacity: 0;
        }
        .gooey-icon-save:hover .front {
            transform: scale(1);
            opacity: 1;
        }

        .gooey-icon-save svg {
            width: 100%;
            height: 100%;
        }
    `),ie=L([X],ie);var Ze=class{constructor(e,t,o){this.gooey=e;this.parentFolder=t;this._log=new g(`PresetManager ${e.folder.title}`,{fg:"slateblue"}),this._log.fn("constructor").debug({options:o,this:this}),this.opts=o,this.opts.localStorageKey??="gooey::presets",this.activePreset=b(this.opts.defaultPreset??{},{key:this.opts.localStorageKey+"::active"}),this._log.fn("constructor").debug("activePreset",this.activePreset.value),this.presets=b(this.opts.presets??[],{key:this.opts.localStorageKey}),this.opts.autoInit!==!1&&this.init(),Object.keys(this.activePreset.value).length&&this.activePreset.value.id!==this._defaultPresetId&&Promise.resolve().then(()=>{console.log("loading active preset",this.activePreset.value),this.gooey.load(this.activePreset.value),this.gooey._undoManager.clear()})}__type=Object.freeze("PresetManager");__version=Object.freeze("1.0.0");defaultPreset;activePreset;presets;folder;_defaultPresetId="gooey-default-preset";_defaultPresetTitle="default";_presetSnapshot;_presetsInput;_manageInput;_renamePresetButton;_initialized=!1;_log;opts;get defaultPresetIsActive(){return this.activePreset.value.id===this._defaultPresetId}async init(){if(this.opts.disabled){this._log.debug("Aborting initialization: disabled by options.");return}return this._initialized=!0,await Promise.resolve(),this.folder=await this.addGui(this.parentFolder,this.opts.defaultPreset),this}set(e){this._log.fn("set").debug({value:e,this:this}),this.activePreset.set(e)}_renamePreset(e){if(this._log.fn("_renamePreset").debug({this:this,title:e}),!this._isInitialized())throw new Error("PresetManager not initialized.");let t=this.activePreset.value;this.presets.update(o=>{if(!t)throw new Error("No preset found.");if(t.id===this._defaultPresetId)throw new Error("Cannot rename default preset.");return t.title=e,this.activePreset.set(t),o.map(n=>n.id===t.id?t:n)}),this._refresh()}_resolveUnusedTitle(e){if(this._log.fn("resolveUnusedTitle").debug({this:this,title:e}),!this._isInitialized())throw new Error("PresetManager not initialized.");let t=this.presets.value,o=0,n=e;for(;t.some(r=>r.title===n);)o++,n=e+` (${o})`;return n}_resolveDefaultPreset(e){if(!this._isInitialized())throw new Error("PresetManager not initialized.");return e??=this.presets.value.find(t=>t.id===this._defaultPresetId),e||(e=this.gooey.save(this._defaultPresetTitle,this._defaultPresetId),this.presets.push(e)),e}async addGui(e,t){if(this._log.fn("add").debug({this:this,parentFolder:e,defaultPreset:t}),!this._isInitialized())throw new Error("PresetManager not initialized.");let o=e.addFolder("presets",{saveable:!1,gooey:this.gooey});if(o.element.classList.add("gooey-folder-alt"),o.on("mount",()=>{o.graphics.connector.svg.style.setProperty("filter","saturate(0.1)"),o.graphics.icon.style.setProperty("filter","saturate(0)")}),this.defaultPreset=t??this._resolveDefaultPreset(),Object.keys(this.activePreset.value).length||this.activePreset.set(this.defaultPreset),!this.activePreset.value)throw new Error("No active preset.");if(!this.activePreset.value.id)throw new Error("No active preset id.");let n=l=>{let c=Array.isArray(l)?this.gooey.folder.title+" presets":l.title,h=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(h),f=document.createElement("a");f.href=p,f.download=`${c}.json`,f.click(),URL.revokeObjectURL(p)},r=()=>{let l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=async c=>{let h=c.target.files?.[0];if(!h)return;let p=new FileReader;p.onload=async f=>{let v=f.target?.result,T=JSON.parse(v);if(Array.isArray(T))for(let u of T)Tt(u,"GooeyPreset")?this.put(u):console.warn("Invalid preset:",u);else Tt(T,"GooeyPreset")?this.put(T):console.warn("Invalid preset:",T);this._refresh()},p.readAsText(h)},l.click()},s=(l,c)=>`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="gooey-icon gooey-icon-${l}">${c}</svg>`;this._manageInput=o.addButtonGrid("",[[{text:"update",id:"update",onClick:()=>{let{id:l,title:c}=this.activePreset.value,h=this.gooey.save(c,l);this.put(h)},disabled:()=>this.defaultPresetIsActive},{text:"delete",onClick:()=>{let l;this.presets.update(c=>(l=c.findIndex(h=>h.id===this.activePreset.value.id),c.splice(l,1),c)),this.activePreset.set(this.presets.value[l??0]??this.defaultPreset),this._refresh()},disabled:()=>this.defaultPresetIsActive},{text:s("copy",'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>'),id:"copy",tooltip:{text:"Copy",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{navigator.clipboard?.writeText(JSON.stringify(this.activePreset.value,null,2))},disabled:()=>this.defaultPresetIsActive},{text:s("paste",'<rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>'),id:"paste",tooltip:{text:"Paste",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:async({button:l})=>{l.disabled=!0;try{let c=await navigator.clipboard.readText();if(console.log(c),c){let h=JSON.parse(c);typeof h=="object"&&h.__type==="GooeyPreset"&&this.put(h)}}catch(c){console.error(c)}l.disabled=!1},disabled:()=>this.defaultPresetIsActive},{text:s("download",'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line></svg>'),id:"download",tooltip:{text:"Download",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{n(this.activePreset.value)},disabled:()=>this.defaultPresetIsActive},{text:s("download-all",'<path stroke-linecap="round" stroke-linejoin="round" d="M21 14v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 11v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 17v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="m7 8 5 5 5-5" /><path  stroke-linecap="round" stroke-linejoin="round" d="M12 13V1" />'),id:"download-all",tooltip:{text:"Download All",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{n(this.presets.value)},disabled:()=>this.presets.value.length<=1},{id:"upload",text:s("upload",'<path stroke-linecap="round" stroke-linejoin="round" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="m17 8-5-5-5 5" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v12" />'),tooltip:{text:"Upload",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{r()}}]],{order:1,resettable:!1,disabled:()=>this.defaultPresetIsActive&&this.presets.value.length===1}),this._presetsInput=o.addSelect("",this.presets.value,{labelKey:"title",order:-1,value:this.activePreset.value,resettable:!1,disabled:()=>this.defaultPresetIsActive&&this.presets.value.length===1}),this._presetsInput.on("change",({value:l})=>{this._log.fn("_presetsInput.on(change)").debug({value:l,this:this}),this.gooey.load(l),this.activePreset.set(l),this._refreshInputs()}),this._presetsInput.on("open",()=>{this._log.fn("_presetsInput.on(open)").debug(),this._presetSnapshot=this.gooey.save("__snapshot__")}),this._presetsInput.on("cancel",()=>{this._log.fn("_presetsInput.on(cancel)").debug(),this._presetSnapshot&&(this.gooey.load(this._presetSnapshot),this._refreshInputs())});let a=new ie;return a.element.tooltip=new R(a.element,{text:"Save",delay:0,placement:"bottom",hideOnClick:!0}),this._presetsInput.listen(a.element,"click",()=>{this._log.fn("newPresetButton.on(click)").debug(),this.put()}),this._renamePresetButton=new ne,this._renamePresetButton.element.tooltip=new R(this._renamePresetButton.element,{delay:0,placement:"bottom",hideOnClick:!0,text:()=>this._renamePresetButton.element.classList.contains("active")?"":this.defaultPresetIsActive?"Can't rename default preset":"Rename"}),this._presetsInput.listen(this._renamePresetButton.element,"click",this._toggleRename),this._presetsInput.elements.content.prepend(this._renamePresetButton.element),this._presetsInput.elements.content.prepend(a.element),this._refreshInputs(),o}put(e){if(this._log.fn("saveNewPreset"),!this._isInitialized())throw new Error("PresetManager not initialized.");if(!this._presetsInput)throw new Error("No select input.");e??=this.gooey.save(this._resolveUnusedTitle("preset"),S());let t=this.presets.value.find(o=>o.id===e.id);t?(this._log.fn("put").debug("preset exists. replacing with:",{preset:e,existing:t}),this.presets.update(o=>{let n=o.findIndex(r=>r.id===e.id);return o[n]=e,o})):(this._log.fn("put").debug("pushing preset:",{preset:e,existing:t}),this.presets.push(e)),this.set(e),this._refresh(),this._enableRename()}delete(e){if(this._log.fn("delete").debug({this:this,preset:e}),!this._isInitialized())throw new Error("PresetManager not initialized.");let t=typeof e=="string"?e:e.id;this.presets.update(o=>{let n=o.findIndex(r=>r.id===t);if(n===-1)throw new Error(Y("Error deleting preset:")+" Preset not found.");return o.splice(n,1),o}),this.activePreset.set(this.presets.value[0]??this.defaultPreset)}_isInitialized(){return this._initialized}_toggleRename=()=>{this._presetsInput.select.elements.selected.getAttribute("contenteditable")?this._handleRename():this._enableRename()};_blurLatch=!1;_blurLatchTimer;_enableRename=(e=!0)=>{this._log.fn("_enableRename").debug({this:this});let t=this._presetsInput.select.elements.selected;if(t.classList.contains("disabled")){this._log.warn("Cannot rename default preset.");return}if(this._blurLatch){this._blurLatch=!1,clearTimeout(this._blurLatchTimer);return}this._renamePresetButton.element.classList.add("active"),this._presetsInput.select.disableClicks=!0,t.setAttribute("contenteditable","true"),t.focus();let o=document.createRange();o.selectNodeContents(t),e&&o.collapse(!1);let n=window.getSelection();n?.removeAllRanges(),n?.addRange(o),this.folder.evm.listen(t,"blur",this._handleRename,{},"preset-manager-rename"),this.folder.evm.listen(window,"keydown",this._handleKeydown,{},"preset-manager-rename")};_handleRename=e=>{if(this._log.fn("_disableRename").debug({e,this:this}),this._presetsInput.select.disableClicks=!1,this._presetsInput.select.elements.selected.removeAttribute("contenteditable"),this._renamePresetButton.element.classList.remove("active"),this.folder.evm.clearGroup("preset-manager-rename"),e?.type==="blur"){this._blurLatch=!0,clearTimeout(this._blurLatchTimer),setTimeout(()=>{this._blurLatch=!1},300);let t=e.target?.textContent??"";t!==this.activePreset.value.title&&this._renamePreset(t)}};_handleKeydown=e=>{this._log.fn("_handleKeydown").debug({key:e.key,e,this:this}),e.key==="Enter"&&(e.preventDefault(),this._handleRename()),e.key==="Escape"&&this._handleRename()};_refreshInputs(){let e=this.defaultPresetIsActive;this._renamePresetButton.element.classList.toggle("disabled",e),this._renamePresetButton.element.toggleAttribute("disabled",e),this._manageInput.refresh(),this._log.fn("_refreshInputs").debug({disableRename:e,this:this})}_refresh(){this._log.fn("_refresh").debug("Refreshing options and setting input.",{this:this}),this._presetsInput.options=this.presets.value.map(t=>({label:t.title,value:t}));let e=this.activePreset.value;this._presetsInput.set({label:e.title,value:e}),this._refreshInputs()}dispose(){this._initialized=!1,this._presetsInput.dispose(),this._renamePresetButton.element.tooltip.dispose(),this._renamePresetButton.element.remove}};var Qe=B({title:"default",prefix:"themer",vars:{color:{base:{"theme-a":"#00bcd4","dark-a":"#0B0B11","dark-b":"#1b1d29","dark-c":"#46465e","dark-d":"#55566a","dark-e":"#787b89","light-a":"#ffffff","light-b":"#c9ccd7","light-c":"#a9adba","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}}}});function qt(i,e){let t=[],o=[];for(let n of i)e(n)?t.push(n):o.push(n);return[t,o]}function Zt(i){let e=parseInt(i.replace("#",""),16),t=e>>16&255,o=e>>8&255,n=e&255;return[t,o,n].join(", ")}var Ko={autoInit:!0,persistent:!0,theme:Qe,themes:[],mode:"system",localStorageKey:"fractils::themer",vars:{}},et=class{node;theme;themes;activeThemeTitle;mode;wrapper;_initialized=!1;_persistent;_key;_unsubs=[];_targets=new Set;_log;constructor(e="document",t){let o=A([Ko,t]);this._key=String(o.localStorageKey),o.wrapper&&(this.wrapper=o.wrapper),this.node=e==="document"?document.documentElement:typeof e=="string"?O(e)[0]??document.documentElement:e,this._log=new g(`themer ${this.node.classList[0]}`,{fg:"DarkCyan"}),this._log.fn(Dt("constructor")).debug({node:e,opts:o,this:this}),this.theme=b(B(o.theme,o.vars)),this.themes=b(o.themes.map(r=>B(r,o.vars))),this.activeThemeTitle=b(o.theme.title,{key:this._key+"::activeTheme"});let n=this.activeThemeTitle.value;if(o.theme.title!==n){let r=this.themes.value.find(s=>s.title===n);r&&this.theme.set(r)}this.mode=b(o.mode,{key:this._key+"::mode"}),this._persistent=o.persistent??!0,this.#e(this.theme,r=>{this._log.fn(K("theme.subscribe")).debug({v:r,this:this}),this._initialized&&(this.activeThemeTitle.set(r.title),this.applyTheme())}),this.#e(this.mode,r=>{if(this._log.fn(K("mode.subscribe")).debug("v",r,{this:this}),typeof r>"u")throw new Error("Mode is undefined.");this._initialized&&this.applyTheme()}),this._targets.add(this.wrapper??this.node.parentElement??this.node),o.autoInit&&this.init()}#e(e,t){this._unsubs.push(e.subscribe(o=>t(o)))}init(){let e=this.themes.value,t=this.theme.value;if(this._log.fn(z("init")).debug({theme:this.theme,this:this}),!(typeof document>"u"))return this._initialized?this:(this._initialized=!0,e.find(o=>o.title===t.title)||this.create(t,{overwrite:!0,save:!1}),this.load()?.applyTheme(),this)}get modeColors(){return this.theme.value.vars.color[this.activeMode]}get activeMode(){let e=this.mode.value,t=typeof e=="object"&&"value"in e?e.value:e;return t==="system"?this.#t:t}get#t(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":(window.matchMedia("(prefers-color-scheme: dark)").matches,"dark")}create=(e,t)=>{this._log.fn(z("addTheme")).debug({newTheme:e,options:t,this:this});let o=structuredClone(e),n=t?.overwrite??!1,r=t?.save??!0,[s,a]=qt(this.themes.value,c=>c.title===o.title),l=s.length>0;if(!n&&l){a.push(structuredClone(s[0]));let c=0;for(;;){let h=`${o.title} (${c++})`;if(!a.some(p=>p.title===h)){o.title=h;break}if(c>100){this._log.fn(z("addTheme")).debug(Y("Runaway loop detected.")+" Aborting.",{this:this});break}}}return r&&this.save(),this};delete(e){this._log.fn(z("deleteTheme")).debug({themeOrTitle:e,this:this});let t=typeof e=="string"?e:e.title,o=this.themes.value,n=o.find(a=>a.title===t);if(!n)throw this._log.error("`themeTitle` not found in `themes` array.",{themeTitle:t,this:this}),new Error("Theme not found.");let r=o.indexOf(n)-1,s=this.theme.value.title===t;return this.themes.set(this.themes.value.filter(a=>a.title!==t)),s&&this.theme.set(o[r]??o.at(-1)),this.save(),this}getTheme(e){return this.themes.value.find(t=>t.title===e)}applyTheme=e=>{if(this._log.fn(z("applyTheme")).debug({theme:this.theme.value.title,targets:this._targets,this:this}),!("document"in globalThis))return;let t=this.theme.value;if(!t)throw this._log.error("theme not found").debug({theme:t,this:this}),new Error("Theme not found.");return this.#o(t,e),this.node.setAttribute("theme",t.title),this.node.setAttribute("mode",this.activeMode),this.wrapper?.setAttribute("theme",t.title),this.wrapper?.setAttribute("mode",this.activeMode),this};fromJSON(e){let t=this.theme.value.title!==e.activeTheme,o=e.themes.find(n=>n.title===e.activeTheme);if(o??=this.themes.value.find(n=>n.title===e.activeTheme),!o)throw this._log.error("`activeTheme` not found in `themes` array.",{activeTheme:e.activeTheme,json:e,this:this}),new Error("Theme not found.");this.themes.set(e.themes),this.mode.set(e.mode),t&&this.applyTheme()}toJSON(){return{themes:this.themes.value,activeTheme:this.theme.value.title,mode:this.mode.value}}load=()=>{if(this._log.fn(z("load")).debug({this:this}),this._persistent&&"localStorage"in globalThis){let e=localStorage.getItem(this._key+"::themer");e&&this.fromJSON(JSON.parse(e))}return this};save(){if(this._log.fn(z("save")).debug({this:this}),!("localStorage"in globalThis)||!this._persistent)return;let e=this.toJSON(),t=`${this._key}themer`in localStorage;try{t&&JSON.parse(JSON.stringify(e))===JSON.parse(localStorage.getItem(`${this._key}themer`)||"")||localStorage.setItem(`${this._key}themer`,JSON.stringify(e))}catch(o){throw console.error(Y("Error")+": Failed to save to localStorage.",{error:o,this:this}),new Error("Failed to save to localStorage.")}return e}clear(){this._log.fn(z("clear")).debug({this:this}),"localStorage"in globalThis&&(localStorage.removeItem(`${this._key}themer`),this.themes.set([Qe]),this.theme.set(Qe),this.mode.set("system"))}addTarget(e){this._targets.add(e),this.applyTheme([e])}#o=(e,t=this._targets)=>{let o=e;this._log.fn(z("applyStyleProps")).debug({config:o,this:this});let n=o.vars.color[this.activeMode];if(!n)throw this._log.error("`theme` not found in `config`.",{theme:n,config:o,"this.activeMode":this.activeMode,this:this}),new Error("Theme not found.");let r=new Map;for(let s of t){for(let[a,l]of k(o.vars))if(a==="color")for(let[c,h]of[...k(l.base),...k(l[this.activeMode])])s.style.setProperty(`--${o.prefix}-${c}`,h),s.style.setProperty(`--${o.prefix}-${c}-rgb`,Zt(h));else{let c=o.vars[a];for(let[h,p]of k(c))if(h==="base")for(let[f,v]of k(p))r.set(f,v);else if(h===this.activeMode)for(let[f,v]of k(p))r.set(f,v)}for(let[a,l]of r)s.style.setProperty(`--${o.prefix}-${a}`,l)}};dispose(){for(let e of this._unsubs)e()}};var Qt=`<svg class="settings-icon gooey-cancel" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 26 26" overflow="visible">
  <path class="gear" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4.7c.2-.2.5-.3.7-.3l2.7.2h.4l.3-.1.2-.4 1.1-2.3.6-.5a13 13 0 0 1 6 0l.6.5 1.1 2.3.2.4.3.1h.4l2.7-.2c.2 0 .5.1.7.3 1.4 1.4 2.4 3 3 5 0 .2 0 .5-.2.7l-1.4 2-.3.5v.2l.3.4 1.4 2.1c.2.2.2.5.2.8-.6 1.8-1.6 3.5-3 4.9a1 1 0 0 1-.7.3l-2.7-.2h-.4l-.3.1-.2.4-1.1 2.3a1 1 0 0 1-.6.5 13 13 0 0 1-6 0 1 1 0 0 1-.6-.5l-1.1-2.3-.2-.4-.3-.1h-.4l-2.7.2a1 1 0 0 1-.7-.3c-1.4-1.4-2.4-3-3-5 0-.2 0-.5.2-.7l1.4-2L3 13l-.3-.4-1.4-2.1a.9.9 0 0 1-.2-.8c.6-1.8 1.6-3.5 3-4.9Z" />
  <circle fill="currentColor" class="dot-right" cx="22" cy="13" r="3" />
  <circle class="dot-left" fill="currentColor" cx="4" cy="13" r="3" />
  <circle class="dot-center" fill="currentColor" cx="13" cy="13" r="3" />
</svg>`;function tt(i,e){let t={};function o(n,r=""){for(let[s,a]of k(n))typeof a=="object"?o(a,`${r?r+"-":""}${s}`):t[`${r?r+"_":""}${s}`]=a}return o(i),t}var m="gooey",Uo={base:{"font-family":"'fredoka', sans-serif","font-size":"clamp(0.75rem, 3vw, 1rem)","shadow-lightness":"0%","shadow-opacity":"0.2","shadow-color":`hsla(250, 10%, var(--${m}-shadow-lightness), var(--${m}-shadow-opacity))`,"radius-xs":"0.125rem","radius-sm":"0.1875rem",radius:"0.3125rem","radius-md":"0.4375rem",filter:"none",opacity:"0.95","transition-duration":"75ms","backdrop-filter":"blur(10px)"},dark:{},light:{"shadow-lightness":"50%","shadow-opacity":"0.1"}},wt={base:{root:{width:"24rem","min-width":"20rem","max-width":"35rem","max-height":"90vh",opacity:"0.5","backdrop-filter":"blur(0.5rem)",header:{height:"1.75rem"}},header:{height:"1.75rem"},folder:{background:`color-mix(in sRGB, color-mix(in sRGB, var(--${m}-bg-a) 50%, var(--${m}-bg-b)) calc(var(--${m}-opacity) * 100%), transparent)`,header:{"padding-left":"0.25rem",color:`var(--${m}-fg-c)`,dim:{color:`var(--${m}-fg-d)`},background:`var(--${m}-bg-a)`,outline:"none","box-shadow":"none","font-size":`var(--${m}-font-size)`,"font-weight":"400","letter-spacing":"0.75px"},content:{"padding-left":"0.33rem","font-weight":"400","letter-spacing":"0.5px"}},toolbar:{icon:{color:`var(--${m}-bg-d)`,dim:{color:`var(--${m}-bg-c)`}}},controller:{"font-family":"'inconsolata', 'Comic Mono', 'Fira Code', monospace","font-size":"clamp(0.75rem, 3vw, 0.9rem)","border-radius":`var(--${m}-radius-sm)`,"box-shadow":`-1px 1px 2px hsla(250, 10%, var(--${m}-shadow-lightness), calc(0.7 * var(--${m}-shadow-opacity))), -1px 2px 5px hsla(250, 10%, var(--${m}-shadow-lightness), var(--${m}-shadow-opacity))`,background:`var(--${m}-bg-c)`,outline:`1px solid color-mix(in sRGB, var(--${m}-bg-d) 40%, transparent)`,color:`var(--${m}-fg-b)`,dim:{color:`var(--${m}-fg-c)`,background:`color-mix(in sRGB, color-mix(in sRGB, var(--${m}-bg-c) 75%, var(--${m}-bg-b)) calc(var(--${m}-opacity) * 100%), transparent)`}},input:{height:"2rem","section-1":{width:"clamp(6rem, 30%, 120px)"},"section-2":{width:"4rem"},"section-3":{width:"100%"},"font-size":"'clamp(0.75rem, 3vw, 0.9rem)'",container:{color:`var(--${m}-fg-d)`,outline:`1px solid color-mix(in sRGB, var(--${m}-bg-a) 20%, transparent)`,"box-shadow":`-0.15px 0.1px 1px hsla(220, 10%, 2%, calc(0.8 * var(--${m}-shadow-opacity))) inset, -2px 2px 15px hsla(220, 10%, 2%, calc(0.075 * var(--${m}-shadow-opacity))) inset, -3.0px 3px 25px hsla(220, 10%, 2%, calc(0.05 * var(--${m}-shadow-opacity))) inset, -10.0px 10px 50px hsla(220, 10%, 2%, calc(0.025 * var(--${m}-shadow-opacity))) inset`,background:`color-mix(in sRGB, var(--${m}-bg-a) calc(var(--${m}-opacity) * 100%), transparent)`},number:{range:{color:`var(--${m}-bg-c)`,background:`var(--${m}-bg-a)`,outline:`1px solid color-mix(in sRGB, var(--${m}-bg-c) 0%, transparent)`,"box-shadow":"-2px 2px 2.5px hsla(230, 20%, 0%, 0.2), 2px 2px 5px hsla(230, 20%, 0%, 0.2), 2px 3px 10px hsla(230, 20%, 0%, 0.2), 2px 4px 4px hsla(230, 25%, 0%, 0.2)"}}}},dark:{},light:{controller:{outline:`1px solid color-mix(in sRGB, var(--${m}-bg-d) 10%, transparent)`,background:`color-mix(in sRGB, var(--${m}-bg-a) calc(var(--${m}-opacity) * 100%), transparent)`,color:`var(--${m}-fg-a)`,dim:{background:`color-mix(in sRGB, var(--${m}-bg-a) calc(var(--${m}-opacity) * 100%), transparent)`,color:`var(--${m}-fg-c)`}},input:{number:{range:{background:`var(--${m}-bg-b)`,color:`var(--${m}-bg-d)`,"box-shadow":"-2px 2px 2px hsla(230, 20%, 30%, 0.1), 2px 2px 3px hsla(230, 20%, 30%, 0.1), 2px 2px 7px hsla(230, 20%, 30%, 0.1)"}}}}},_t={color:Fe.vars.color,utility:Uo,core:{base:tt(wt.base,m),dark:tt(wt.dark,m),light:tt(wt.light,m)}};var ot=class{pointer=-1;maxHistory=50;stack=[];lockedExternally=!1;_lockedInternally=!1;constructor(){}commit(e,t=100){if(this._lockedInternally||this.lockedExternally){this._lockedInternally=!1;return}let o=this.pointer+1-this.stack.length;o<0&&(this.stack=this.stack.slice(0,o)),this.pointer++,this.stack.push(e),this.stack.length>this.maxHistory&&(this.stack.shift(),this.pointer--)}undo=()=>{if(this.pointer===-1)return;this._lockedInternally=!0;let e=this.stack[this.pointer];e.setter?e.setter(e.from):e.target.set(e.from),this.pointer--};redo=()=>{if(this.pointer+1>this.stack.length-1)return;this._lockedInternally=!0;let e=this.stack[this.pointer+1];e.setter?e.setter(e.to):e.target.set(e.to),this.pointer++};clear(){this.stack=[],this.pointer=-1}};function jo(i){return typeof globalThis.navigator>"u"&&!i&&console.error("Error getting user-agent: Request object is required on the server, but was not provided."),i?.headers.get("user-agent")||globalThis.navigator?.userAgent}function _e(i,e){return!!jo(e)?.match(i)}function kt(i){return _e(/mac/i,i)&&!Wo(i)}function eo(i){return kt(i)||to(i)||we(i)||Yo(i)||we(i)}function Wo(i){return Xo(i)||to(i)||we(i)}function to(i){return _e(/iphone/i,i)}function Yo(i){return we(i)}function we(i){return _e(/ipad/i,i)}function Xo(i){return _e(/android/i,i)}function oo(i){return _e(/^((?!chrome|android).)*safari/i,i)}var Et=Object.freeze({InputText:"TextInputOptions",InputTextArea:"TextAreaInputOptions",InputNumber:"NumberInputOptions",InputColor:"ColorInputOptions",InputSelect:"SelectInputOptions",InputButton:"ButtonInputOptions",InputButtonGrid:"ButtonGridInputOptions",InputSwitch:"SwitchInputOptions"}),Ur=Object.freeze(Xt(Et)),jr=Object.freeze(Je(Et)),M=class{constructor(e,t){this.folder=t;this.opts=e,this.opts.saveable??=!0,this.opts.resettable??=!0,this.id=this.opts.presetId??`${t.presetId}_${this.opts.title}__${this.opts.__type}`,this.__log=new g(`SuperInput${this.opts.__type.replaceAll(/Options|Input/g,"")} ${this.opts.title}`,{fg:"skyblue"}),this.__log.fn("super constructor").debug({presetId:this.id,options:e,this:this}),this._title=this.opts.title??"",this._disabled=_(this.opts.disabled??!1),this._hidden=_(this.opts.hidden??!1),this._index=this.opts.order??this.folder.inputs.size,this._index+=1,this._dirty=()=>this.value!==this.initialValue,this.bound="binding"in this.opts,this.elements.container=d("div",{classes:["gooey-input-container"],parent:this.folder.elements.content}),this.title||this.element.style.setProperty("--gooey-input-section-1_width","0px"),this.elements.drawerToggle=d("div",{classes:["gooey-input-drawer-toggle"],parent:this.elements.container}),this.elements.title=d("div",{classes:["gooey-input-title"],parent:this.elements.container,textContent:this.title}),this.elements.content=d("div",{classes:["gooey-input-content"],parent:this.elements.container}),this.elements.resetBtn=d("div",{classes:["gooey-input-reset-btn"],parent:this.elements.title,tooltip:{text:"Reset",placement:"left",delay:0},onclick:()=>{this.__log.fn("reset").debug("resetting to initial value",this.initialValue),this.set(this.initialValue)}}),this.elements.drawer=d("div",{classes:["gooey-input-drawer"],parent:this.elements.content}),this._evm.listen(this.elements.drawerToggle,"click",()=>{console.log(this)}),"onChange"in e&&this._evm.on("change",e.onChange),this.index=this.index}opts;id;bound=!1;elements={controllers:{}};bubble=!1;_title="";_index;_disabled;_hidden;_undoLock=!1;lockCommit={};_dirty;_evm=new E(["change","refresh"]);listen=this._evm.listen.bind(this._evm);on=this._evm.on.bind(this._evm);__log;get value(){return this.state.value}get title(){return this._title}set title(e){this._title=e,this.elements.title.textContent=e}get element(){return this.elements.container}get index(){return this._index}set index(e){this._index=e,this.elements.container.style.order=e.toString()}get undoManager(){return this.folder.gooey?._undoManager}get disabled(){return this._disabled()}set disabled(e){this._disabled=_(e),this._disabled()?this.disable():this.enable()}get hidden(){return this.elements.container.classList.contains("hidden")}set hidden(e){this._hidden=_(e),this.elements.container.classList.toggle("hidden",this._hidden())}get dirty(){return this._dirty()}resolveState(e){if(e.binding){let t=b(e.binding.target[e.binding.key]);return this._evm.add(t.subscribe(o=>{e.binding.target[e.binding.key]=o})),t}else return b(e.value)}resolveInitialValue(e){let t=e.binding?e.binding.target[e.binding.key]:e.value;return H(t)?t.value:t}_emit(e,t=this.state.value){return this.opts.resettable&&this.elements.resetBtn.classList.toggle("dirty",this._dirty()),this._evm.emit(e,t),e==="change"&&this.folder.evm.emit("change",this),this}lock=(e=this.state.value)=>{this._undoLock=!0,this.lockCommit.from=e,this.__log.fn(K("lock")).debug("lockCommit:",this.lockCommit)};unlock=e=>{this.__log.fn(K("unlock")).debug("commit",{commit:e,lockCommit:this.lockCommit}),e??={},e.target??=this,e.to??=this.state.value,e.from??=this.lockCommit.from,this._undoLock=!1,this.commit(e)};commit(e){if(e.from??=this.state.value,e.target??=this,this._undoLock){this.__log.fn("commit").debug("prevented commit while locked");return}this.__log.fn("commit").debug("commited",e),this.undoManager?.commit(e)}enable(){return this._disabled=_(!1),this}disable(){return this._disabled=_(!0),this}refresh(e=this.state.value){if(this.opts.resettable)return this.opts.binding&&this.state.set(this.opts.binding.target[this.opts.binding.key]),this.elements.resetBtn.classList.toggle("dirty",this._dirty()),this._evm.emit("refresh",e),this}save(e={}){if(this.opts.saveable!==!0)throw new Error("Attempted to save unsaveable Input: "+this.title);let t={__type:Et[this.__type],title:this.title,value:this.state.value,disabled:this.disabled,presetId:this.id,hidden:this.hidden,order:this.index,resettable:this.opts.resettable??!0};return this.__log.fn("save").debug(t),Object.assign(t,e)}load(e){let t=typeof e=="string"?JSON.parse(e):e;this.id=t.presetId,this.disabled=t.disabled,this.hidden=t.hidden,this.initialValue=t.value,this.set(t.value)}dispose(){this.__log.fn("dispose").debug(this),this._evm.dispose();let e=t=>{if(t instanceof HTMLElement||t instanceof SVGElement)t.remove();else if(typeof t=="object")for(let o in t)e(t[o])};e(this.elements)}};var Jo={__type:"SwitchInputOptions",value:!0,labels:{true:{state:"on",verb:"Enable"},false:{state:"off",verb:"Disable"}}},ke=class extends M{__type="InputSwitch";state;initialValue;#e;constructor(e,t){let o=Object.assign({},Jo,e);super(o,t),this.#e=new g(`InputSwitch ${o.title}`,{fg:"cyan"}),this.#e.fn("constructor").debug({opts:o,this:this}),o.binding?(this.initialValue=o.binding.target[o.binding.key],this.state=b(!!this.initialValue),this._evm.add(this.state.subscribe(l=>{o.binding.target[o.binding.key]=l}))):(this.initialValue=o.value,this.state=b(!!o.value));let n=d("div",{classes:["gooey-input-switch-container"],parent:this.elements.content}),r=d("button",{classes:["gooey-controller","gooey-controller-switch"],parent:n,tooltip:{text:()=>(this.state.value?o.labels?.false.verb:o.labels?.true.verb)||"",anchor:".gooey-controller-switch-thumb",delay:750}}),s=d("div",{classes:["gooey-controller-switch-thumb"],parent:r}),a=d("div",{classes:["gooey-controller-switch-state-text"],parent:n,innerText:this.state.value?o.labels?.true.state:o.labels?.false.state,style:{opacity:"0.75"}});this.elements.controllers={container:n,input:r,thumb:s,stateText:a},this._evm.listen(this.elements.controllers.input,"click",()=>this.set()),this._evm.add(this.state.subscribe(this.refresh.bind(this)))}set(e=!this.state.value){if(this.#e.fn("set").debug({v:e,this:this}),typeof e=="boolean")this.undoManager?.commit({target:this,from:this.state.value,to:e}),this.state.set(e);else throw new Error(`InputBoolean.set() received an invalid value: ${JSON.stringify(e)} (${typeof e})`);return this._emit("change",e),this}refresh(e){return this.disabled?this:(this.#e.fn("refresh").debug({v:e,this:this}),typeof e>"u"&&(e=this.opts.binding?this.opts.binding.target[this.opts.binding.key]:this.state.value),this.elements.controllers.input.classList.toggle("active",e),this.elements.controllers.input?.tooltip?.refresh(),this.elements.controllers.stateText.innerText=(this.state.value?this.opts.labels?.true.state:this.opts.labels?.false.state)??"",this._emit("refresh",e),this)}enable(){return this.elements.controllers.input.disabled=!1,super.enable(),this}disable(){return this.elements.controllers.input.disabled=!0,super.disable(),this}dispose(){this.elements.controllers.input.tooltip?.dispose(),super.dispose()}};var qo={__type:"ButtonControllerOptions",text:()=>"click me",onClick:()=>{},id:void 0,disabled:!1,style:void 0,tooltip:void 0,active:!1,element:void 0,parent:void 0},re=class i{__type="ButtonController";static is(e){return e?.__type==="ButtonController"&&e instanceof i}_text;_active=()=>!1;_disabled=()=>!1;element;_evm=new E(["change","refresh","click"]);on=this._evm.on.bind(this._evm);_log=new g("ButtonController",{fg:"coral"});parent;constructor(e){let t=Object.assign({},qo,e);this._log.fn("constructor").debug({opts:t,this:this}),this.element=t.element?t.element:d("button",{id:t.id??S(8),classes:["gooey-controller","gooey-controller-button"],parent:t.parent}),this.text=t.text,this.active=t.active,typeof t.disabled<"u"&&(this.disabled=t.disabled),this._evm.listen(this.element,"click",this.click),t.onClick&&this._evm.on("click",t.onClick)}get text(){return this._text()}set text(e){this._text=_(e),this.element.innerHTML=this._text()}get active(){return this._active()}set active(e){typeof e>"u"||(this._active=_(e),this.element.classList.toggle("active",this._active()))}get disabled(){return this._disabled()}set disabled(e){typeof e>"u"||(this._disabled=_(e),this._disabled()?this.disable():this.enable())}set(e){Object.assign(this,e),this._evm.emit("change",this),this.refresh()}click=e=>{this._log.fn("click").debug({this:this}),this._evm.emit("click",{e,button:this}),this.refresh()};enable=()=>this.disabled?this.disabled=!1:(this.element.classList.remove("disabled"),this.element.removeAttribute("disabled"),this);disable=()=>this.disabled?(this.element.classList.add("disabled"),this.element.setAttribute("disabled","true"),this):this.disabled=!0;refresh=()=>(this.element.toggleAttribute("disabled",this.disabled),this.element.classList.toggle("disabled",this.disabled),this.element.innerHTML=this.text,this.element.classList.toggle("active",this.active),this._evm.emit("refresh"),this);dispose(){this.element.remove(),this._evm.dispose()}};var Zo={__type:"ButtonInputOptions",text:()=>"click me"},Ee=class extends M{__type="InputButton";initialValue={};state=b({});onClick=()=>{};button;_log;constructor(e,t){let o=Object.assign({},Zo,e,{__type:"ButtonInputOptions"});super(o,t),this._evm.registerEvents(["change","refresh","click"]),this._log=new g(`InputButton ${o.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:o,this:this}),o.value?this.onClick=o.value:o.onClick?this.onClick=o.onClick:!1;let n=d("div",{classes:["gooey-input-button-container"],parent:this.elements.content});this.button=new re({text:o.text,onClick:o.onClick,parent:n}),this.elements.controllers={container:n,button:this.button.element},this._evm.listen(this.elements.controllers.button,"click",this.click.bind(this)),this._evm.add(this.state.subscribe(this.refresh.bind(this)))}get text(){return this.button.text}set text(e){this.button.text=e}click(){this.button.click({...new MouseEvent("click"),target:this.button.element})}enable(){return this.button.enable(),super.enable(),this}disable(){return this.button.disable(),super.disable(),this}set=e=>{re.is(e)&&this.state.set(e)};refresh(){return this.button.refresh(),super.refresh(),this}dispose(){this.button.dispose(),super.dispose()}};function J(i){let e=()=>!1;return class extends i{get disabled(){return e()}set disabled(t){e=_(t),e()?this.disable():this.enable()}}}var Qo=i=>{if(!(i instanceof HTMLElement||i instanceof SVGElement))return!1;let e=getComputedStyle(i);return["overflow","overflow-x","overflow-y"].some(t=>{let o=e.getPropertyValue(t);return o==="auto"||o==="scroll"})},no=i=>{let e=i.parentElement;for(;e;){if(Qo(e))return e;e=e.parentElement}return document.scrollingElement||document.documentElement};var Z=class{__type="Select";element;_opts;elements;options;optionMap=new Map;expanded=!1;initialValue;initialOptions;disableClicks=!1;bubble=!0;_selected;_currentSelection;_scrollParent;_evm=new E(["change","refresh","cancel","open","close"]);on=this._evm.on.bind(this._evm);_log;constructor(e){let t={...e,selected:q(e.selected?e.selected:e.options[0]),options:e.options.map(s=>q(s)),selectOnHover:e.selectOnHover??!0};this._opts=t,e?.title?this._log=new g(`Select ${e.title}`,{fg:"burlywood"}):this._log=new g("Select",{fg:"blueviolet"}),this._selected=this._currentSelection=this.initialValue=this._opts.selected,this.options=this.initialOptions=this._opts.options;let o=d("div",{classes:["gooey-controller-select-container"],parent:e.container});this.element=o;let n=d("div",{classes:["gooey-controller-select-selected"],parent:o,textContent:String(this.getLabel(this.selected))});this._evm.listen(n,"click",()=>{this.disableClicks||this.toggle()});let r=d("div",{classes:["gooey-controller-select-dropdown"]});this.elements={container:o,selected:n,dropdown:r,options:[]};for(let s of this.options)this.add(s);this.disabled=this._opts.disabled,this._log.fn("constructor").debug({opts:this._opts,this:this})}get selected(){return this._selected}set selected(e){this._log.fn("set selected").debug(e);let t=H(e)?q(e.value):q(e);if(this._selected=t,this.elements.selected.innerHTML=t.label,!this.bubble){this.bubble=!0;return}this._evm.emit("change",this.selected)}getLabel(e){return H(e)?e.value.label:e.label}add(e){let t=q(e),o=d("div",{classes:["gooey-controller-select-option"],parent:this.elements.dropdown,innerText:t.label}),n=this._evm.listen(o,"click",this.select);return o.dataset.optionId=n,this.optionMap.set(n,{option:t,element:o}),this.elements.options.push(o),this._log.fn("add").debug({option:e,added:this.optionMap.get(n),id:n,this:this}),this}remove(e,t=!1){let o=this.optionMap.get(e);if(!o)throw console.error({this:this}),new Error("No option found in map for id: "+e);let n=o;if(this._log.fn("remove").debug({btn:n,id:e,this:this}),t&&JSON.stringify(this.selected.value)===JSON.stringify(n.option.value)){let r=this.options.indexOf(n.option)+1,s=this.options[r%this.options.length];this._log.fn("remove").debug("Auto-selecting fallback btn",{fallback:s,btn:n,id:e,this:this}),this.select(s,!1)}this.elements.options=this.elements.options.filter(r=>r!==n.element),n.element.remove(),this.options=this.options.filter(r=>r.label!==n.option.label),this.optionMap.delete(e)}clear(){this._log.fn("clear").debug({this:this});for(let e of this.optionMap.keys())this.remove(e,!1);this.options=[],this.optionMap.clear()}select=(e,t=!0)=>{if(this.disabled)return this;if(this._log.fn("select").debug("v",e,{this:this}),e instanceof Event){let o=e.target,n=o.dataset.optionId;if(typeof n!="string")throw console.error({target:o}),new Error("No option id found on select click");let r=this.optionMap.get(n);if(!r)throw console.error({target:o}),new Error("No option found in map");for(let[,{element:s}]of this.optionMap)s.classList.toggle("selected",s===r.element);this.close(),this.selected=r.option}else{let o=q(e);if(H(o))this.selected=o.value;else if(F(o))this.bubble=t,this.selected=o;else throw new Error("Invalid value: "+o)}return this};refresh=()=>(this._log.fn("refresh").debug({this:this}),this.elements.selected.innerHTML=this.selected.label,this);toggle=()=>{this._log.fn("toggle").debug({this:this}),this.expanded?(this._evm.emit("cancel"),this.close()):this.open()};open=()=>{if(this.expanded=!0,this._opts.input.folder.gooey.wrapper.appendChild(this.elements.dropdown),this.elements.dropdown.classList.add("expanded"),this.elements.selected.classList.add("active"),this.updatePosition(),this._scrollParent??=no(this.elements.selected),this._scrollParent?.addEventListener("scroll",this.updatePosition),this._evm.listen(window,"keydown",this._closeOnEscape,{},"dropdown"),this._evm.listen(window,"click",this._clickOutside,{},"dropdown"),this._opts.selectOnHover){this._currentSelection=this.selected;for(let[,{option:e,element:t}]of this.optionMap){t.classList.toggle("selected",e.label===this.selected.label);let o=()=>{this._log.fn("on(mouseenter)").debug("currentSelection",{option:e,element:t,this:this}),this.select(e)};this._evm.listen(t,"mouseenter",o,{},"dropdown")}}this._evm.emit("open"),setTimeout(()=>{this.elements.dropdown.style.pointerEvents="all"},200)};updatePosition=()=>{if(!this.expanded)return;this.elements.dropdown.style.setProperty("width","unset"),this.elements.dropdown.style.setProperty("top","unset");let{dropdown:e,selected:t}=this.elements,o=this._opts.input.folder.root.elements.content.scrollTop,{top:n,left:r}=t.getBoundingClientRect();this.elements.dropdown.style.setProperty("width",`${Math.max(t.offsetWidth,e.offsetWidth)}px`),this.elements.dropdown.style.setProperty("top",`${n+t.offsetHeight-o}px`),this.elements.dropdown.style.setProperty("left",`${r+t.offsetWidth/2-e.offsetWidth/2}px`)};close=()=>{this.expanded=!1,this.elements.dropdown.classList.remove("expanded"),this.elements.selected.classList.remove("active"),this.elements.dropdown.style.pointerEvents="none",this._evm.clearGroup("dropdown"),this._evm.emit("close"),setTimeout(()=>{this.elements.dropdown.remove()},200)};_closeOnEscape=e=>{e.key==="Escape"&&this._cancel()};_clickOutside=e=>{let t=e.composedPath();!t.includes(this.elements.selected)&&!t.includes(this.elements.dropdown)&&this._cancel()};_cancel(){this.close(),this._opts.selectOnHover&&this.select(this._currentSelection),this._evm.emit("cancel")}enable(){return this.elements.selected.classList.remove("disabled"),this.elements.selected.removeAttribute("disabled"),this}disable(){return this.elements.selected.classList.add("disabled"),this.elements.selected.setAttribute("disabled","true"),this}dispose(){for(let e of Je(this.elements))Array.isArray(e)?e.forEach(t=>t.remove()):e.remove();this._scrollParent?.removeEventListener("scroll",this.updatePosition),removeEventListener("click",this._clickOutside),this._evm.dispose()}};Z=L([J],Z);function F(i){return typeof i=="object"&&Object.keys(i).length===2&&"label"in i&&"value"in i}function q(i){if(F(i))return i;if(["string","number"].includes(typeof i))return{label:String(i),value:i};if(H(i))return F(i.value)?i.value:{label:String(i.value),value:i};if(i&&typeof i=="object")return{label:JSON.stringify(i),value:i};throw console.error("Invalid option:",i,". Please provide a named option ({ label: string, value: T })and place your value in the `value` property."),new Error("Missing label:"+JSON.stringify(i),{cause:{v:i}})}function St(i){function e(t){return t}if(F(i))return i.value;if(H(i)){let t=i.value;return F(t)?t.value:t}return i}var en={__type:"SelectInputOptions",options:[]},ae,Q,se=class extends M{constructor(t,o){let n=Object.assign({},en,t,{__type:"SelectInputOptions"});super(n,o);w(this,"__type","InputSelect");w(this,"initialValue");w(this,"state");G(this,ae);w(this,"select");G(this,Q,!0);w(this,"labeledSelection");w(this,"_log");w(this,"refresh",()=>{let t=this.state.value;if(this._log.fn("refresh").debug({v:t,this:this}),!this.labeledSelection)throw new Error("Failed to find labeled selection.");let o=this.options.filter(n=>!this.select.options.some(r=>r.label===n.label));for(let n of o)this.select.add(n);return this.select.select(this.labeledSelection,!1),super.refresh(),this});this._evm.registerEvents(["preview","open","close","cancel"]),this._log=new g(`InputSelect ${n.title}`,{fg:"slategrey"}),this._log.fn("constructor").debug({opts:n,this:this}),n.value??=n.binding?.initial??oe(this.targetValue),this.initialValue=this.resolveInitialValue(n),this.labeledSelection={value:St(this.initialValue),label:this.resolveInitialLabel(this.initialValue,n)},N(this,ae,_(this.opts.options??[])),this.state=b(this.initialValue);let r=d("div",{classes:["gooey-input-select-container"],parent:this.elements.content});this.select=new Z({input:this,container:r,options:this.options,selected:this.labeledSelection,title:this.title}),this.elements.controllers={container:r,select:this.select.elements},this.disabled=n.disabled??!1,this._evm.add(this.state.subscribe(s=>{if(this.select.bubble){if(this.targetObject&&(H(this.targetValue)?(this._log.fn("updating binding").debug({from:this.targetValue.value,to:s.value}),this.targetValue.set(s.value)):this.targetValue=s.value),C(this,Q)){N(this,Q,!1),this._log.fn("state.subscribe").debug("Stopped propagation.  Subscribers will not be notified.");return}this.set(s)}})),t.onChange&&this._evm.on("change",s=>{this._log.fn("calling options onChange").debug(s),t.onChange?.(q(s))}),this.select.on("change",s=>{this._log.fn("select.onChange").debug(s),!C(this,Q)&&(N(this,Q,!0),this.set(s))}),this.listen(this.select.element,"preview",()=>{this._emit("preview")}),this.listen(this.select.element,"open",()=>{this._emit("open")}),this.listen(this.select.element,"close",()=>{this._emit("close")}),this.listen(this.select.element,"cancel",()=>{this._emit("cancel")}),this._dirty=()=>this.value.label!==this.initialValue.label,this._log.fn("constructor").debug({this:this})}set options(t){this._log.fn("set options").debug(t),t??=[],N(this,ae,_(t)),this.select.clear();for(let o of oe(C(this,ae).call(this)))this.select.add(o)}get options(){return this.resolveOptions(C(this,ae).call(this))}resolveOptions(t){function o(r){return F(r[0])}let n=_(oe(t))();if(!o(n)){if(!Array.isArray(n))throw new Error(`gooey: Invalid options array: "${n}"`);if(n.every(r=>typeof r=="string"))return n.map(r=>({label:r,value:r}));if(!this.opts.labelKey)throw new Error("Recieved unlabeled options with no `labelKey` specified.  Please label your options or provide the `labelKey` to use as a label.");return n.map(r=>({label:r[this.opts.labelKey],value:r}))}return n}resolveInitialValue(t){let o=t.binding?t.binding.target[t.binding.key]:t.value,n=oe(o);if(!F(n)){if(typeof n=="string")return{label:n,value:n};if(!t.labelKey)throw console.error("Error:",{v:n,value:o,opts:t}),new Error("Cannot resolve initial value.  Please provide a `labelKey` or use labeled options.");return{label:n[t.labelKey],value:n}}return n}resolveInitialLabel(t,o){let n=H(t)?t.value:t;return this._log.fn("resolveInitialLabel").debug({v:n,initialValue:t,opts:o}),F(n)?n.label:o.labelKey?t[o.labelKey]:ze(n)}get targetObject(){return this.opts.binding?.target}get targetKey(){return this.opts.binding?.key}get targetValue(){return this.targetObject?.[this.targetKey]}set targetValue(t){if(F(t)&&(t=St(t)),this._log.fn("set targetValue").debug(t),typeof t>"u")throw console.error("Cannot set target value to undefined"),console.error("this",this),new Error("Cannot set target value to undefined");let o=this.targetObject,n=this.targetKey;o&&n&&(H(o[n])?o[n].set(t):o[n]=t)}set(t){return this._log.fn("set").debug(t),N(this,Q,!0),this.select.select(t,!1),this.state.set(t),this._emit("change",t),this}enable(){return this._log.fn("enable").debug(),this.select.enable(),super.enable(),this}disable(){return this._log.fn("disable").debug(),this.select.disable(),super.disable(),this}dispose(){super.dispose()}};ae=new WeakMap,Q=new WeakMap,se=L([J],se);var nt=()=>{let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width","24"),i.setAttribute("height","24"),i.setAttribute("viewBox","-2 -2 28 28"),i.setAttribute("stroke","currentColor"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round");let e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","m18 15-6-6-6 6"),i.appendChild(e),i};var it=class{constructor(e,t,o){this.input=e;this.opts=t;this.parent=o;this.elements.container=d("div",{classes:["gooey-input-number-buttons-container"],parent:o}),this.elements.increment=d("div",{classes:["gooey-controller","gooey-input-number-button","gooey-input-number-buttons-increment"],parent:this.elements.container}),this.elements.increment.appendChild(nt()),e.listen(this.elements.increment,"pointerdown",this.rampChangeUp.bind(this)),this.elements.decrement=d("div",{classes:["gooey-controller","gooey-input-number-button","gooey-input-number-buttons-decrement"],parent:this.elements.container});let n=nt();n.setAttribute("style","transform: rotate(180deg)"),this.elements.decrement.appendChild(n),e.listen(this.elements.decrement,"pointerdown",this.rampChangeDown.bind(this))}elements={};rampChange(e=1){let t="step"in this.opts?this.opts.step:1,o=300,n=!1,r=0,s,a=()=>{clearTimeout(s),!n&&(r+=o,r>1e3&&(o/=2,r=0),this.input.set(this.input.state.value+t*e),s=setTimeout(a,o))},l=()=>{n=!0,window.removeEventListener("pointerup",l),window.removeEventListener("pointercancel",l)};window.addEventListener("pointercancel",l,{once:!0}),window.addEventListener("pointerup",l,{once:!0}),a()}rampChangeUp(){this.rampChange(1)}rampChangeDown(){this.rampChange(-1)}};function ro(i){return kt()?i.metaKey:i.ctrlKey}function so(){return eo()?io.metaKey.mac.icon:io.ctrlKey.windows.icon}var io={metaKey:{mac:{icon:"\u2318",name:"command",key:"meta"},windows:{icon:"\u229E Win",name:"windows",key:"win"},linux:{icon:"Super",name:"super",key:"meta"}},altKey:{mac:{icon:"\u2325",name:"option",key:"alt"},windows:{icon:"Alt",name:"alt",key:"alt"},linux:{icon:"Alt",name:"alt",key:"alt"}},shiftKey:{mac:{icon:"\u21E7",name:"shift",key:"shift"},windows:{icon:"Shift",name:"shift",key:"shift"},linux:{icon:"Shift",name:"shift",key:"shift"}},ctrlKey:{mac:{icon:"\u2303",name:"control",key:"ctrl"},windows:{icon:"Ctrl",name:"control",key:"ctrl"},linux:{icon:"Ctrl",name:"control",key:"ctrl"}}};var tn=i=>{if(typeof i!="object")throw new Error("element must be an object");if("computedStyleMap"in i)return i.computedStyleMap();{let e=getComputedStyle(i),t=new Map;for(let o=0;o<e.length;o++){let n=e[o],r=e.getPropertyValue(n);r&&t.set(n,r)}return t}},rt=(i,e)=>tn(i).get(e);var U=class{constructor(e,t,o){this.input=e;this.opts=t;this.parent=o;this._log=new g(`NumberController ${this.input.title}`,{fg:"darkgoldenrod"}),this.element=d("input",{type:"number",classes:["gooey-controller","gooey-controller-number"],value:String(e.state.value),parent:o,tooltip:{text:`Hold <span class="fractils-hotkey">${so()}</span> to drag`,placement:"top",delay:1500,parent:o,styles:{background:"var(--gooey-bg-a)",color:"var(--gooey-fg-a)","--fractils-hotkey_background":"var(--gooey-bg-b)","--fractils-hotkey_color":"var(--gooey-fg-a)"}}}),"step"in t&&(this.element.step=String(t.step)),e.listen(this.element,"pointerenter",this.hoverStart)}element;dragEnabled=!1;dragging=!1;hovering=!1;delta=0;_log;hoverStart=e=>{this._log.fn("hoverStart").debug(e),this.hovering=!0,this.element.classList.add("hovering"),this.maybeEnableDrag(e),this.element.removeEventListener("pointerleave",this.hoverEnd),this.element.addEventListener("pointerleave",this.hoverEnd),document.removeEventListener("keydown",this.maybeEnableDrag),document.addEventListener("keydown",this.maybeEnableDrag)};hoverEnd=e=>{this._log.fn("hoverEnd").debug(e),this.hovering=!1,this.element.classList.remove("hovering"),this.cancelDrag(e),this.element.removeEventListener("pointerleave",this.hoverEnd),document.removeEventListener("keydown",this.maybeEnableDrag)};dragKeyHeld=e=>ro(e);cancelDrag=e=>{this._log.fn("cancelDrag").debug(e),this.dragEnabled=e.type==="keyup"?this.dragKeyHeld(e):!1,document.removeEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),this.dragEnabled||(this.element.style.cursor=this.element.dataset.cursor??"text",this.dragging&&this.dragEnd())};maybeEnableDrag=e=>{this._log.fn("maybeEnableDrag").debug(e),this.dragKeyHeld(e)&&(this.dragEnabled=!0,document.removeEventListener("keyup",this.cancelDrag),document.addEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.addEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),this.element.addEventListener("pointerdown",this.maybeDragStart),this.element.dataset.cursor=rt(this.element,"cursor"),this.element.style.cursor="ns-resize")};maybeDragStart=()=>{this.hovering&&this.dragEnabled&&this.dragStart()};dragStart=async()=>{this._log.fn("dragStart").debug(),this.dragging=!0,this.element.dispatchEvent(new Event("dragStart")),this.element.tooltip.hide(),this.element.removeEventListener("pointermove",this.drag),this.element.addEventListener("pointermove",this.drag),document.removeEventListener("pointerup",this.dragEnd),document.addEventListener("pointerup",this.dragEnd),this.element.classList.add("dragging"),await this.element.requestPointerLock(),this.element.blur()};dragEnd=()=>{this._log.fn("dragEnd").debug(),this.dragging=!1,this.element.classList.remove("dragging"),this.element.removeEventListener("pointermove",this.drag),document.removeEventListener("pointerup",this.dragEnd),document.exitPointerLock(),this.element.dispatchEvent(new Event("dragEnd"))};drag=e=>{if(!this.dragging)return;let t=e.shiftKey?4:e.altKey?.1:1,o=Math.sign(e.movementY);if(this.delta+=Math.abs(e.movementY),this.delta>+this.element.step){let n=+this.element.step*t*-o;this.element.value=String(this.element.valueAsNumber+n),o===-1?this.element.stepUp(+this.element.step*t):this.element.stepDown(+this.element.step*t),this.delta=0,this.element.dispatchEvent(new Event("input"))}};dispose(){this.element.removeEventListener("pointerenter",this.hoverStart),this.element.removeEventListener("pointerleave",this.hoverEnd),this.element.removeEventListener("pointermove",this.drag),document.removeEventListener("keydown",this.maybeEnableDrag),document.removeEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),document.removeEventListener("pointerup",this.dragEnd),this.element.tooltip.dispose(),this.element.remove()}};var ao=(i,e,t)=>{let o=d("input",{type:"range",classes:["gooey-controller","gooey-input-number-range"],value:String(i.state.value),parent:t});return"min"in e&&(o.min=String(e.min)),"max"in e&&(o.max=String(e.max)),"step"in e&&(o.step=String(e.step)),i.listen(o,"input",i.set.bind(i)),o};var on={__type:"NumberInputOptions"},Se=class extends M{__type="InputNumber";_log;initialValue;state;dragEnabled=!1;numberController;numberButtonsController;constructor(e,t){let o=Object.assign({},on,e,{__type:"NumberInputOptions"}),n=o.binding?.initial??o.value??1;o.value??=n;let r=0,s=1,a=.01;(n<0||n>1)&&(r??=n<=0?n*2:0,s??=n<=0?n*-2:n*2,a=n/100<=.1?.001:.1),o.min??=r,o.max??=s,o.step??=a,super(o,t),this._log=new g(`InputNumber ${o.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:o,this:this}),this.initialValue=this.resolveInitialValue(o),this.state=this.resolveState(o);let l=d("div",{classes:["gooey-input-number-container"],parent:this.elements.content});this.numberController=new U(this,o,l),this.numberButtonsController=new it(this,o,l),this.elements.controllers={container:l,input:this.numberController.element,buttons:this.numberButtonsController.elements,range:ao(this,o,l)},this._evm.add(this.state.subscribe(this.refresh)),this._evm.listen(this.elements.controllers.range,"pointerdown",this.lock),this._evm.listen(this.elements.controllers.range,"pointerup",()=>this.unlock()),this._evm.listen(this.elements.controllers.input,"input",this.set),this._evm.listen(this.elements.controllers.input,"dragStart",this.lock),this._evm.listen(this.elements.controllers.input,"dragEnd",()=>this.unlock())}set=e=>{if(this._log.fn("set").debug(e),typeof e>"u")return;let t=e;return e instanceof Event&&e?.target&&"valueAsNumber"in e.target&&(t=+e.target.value||0),this.commit({to:t}),this.state.set(t),this._emit("change",t),this};enable(){return this._log.fn("enable").debug(),this.elements.controllers.input.disabled=!1,super.enable(),this}disable(){return this._log.fn("disable").debug(),this.elements.controllers.input.disabled=!0,super.disable(),this}refresh=()=>{let e=this.state.value;return this._log.fn("refresh").debug(e),this.elements.controllers.range.value=String(e),this.elements.controllers.input.value=String(e),super.refresh(e),this};dispose(){this._log.fn("dispose").debug(),super.dispose()}};var nn="[-\\+]?\\d+%?",rn="[-\\+]?\\d*\\.\\d+%?",le="(?:"+rn+")|(?:"+nn+")",lo="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?",co="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?",po=new RegExp("rgb"+lo),ho=new RegExp("rgba"+co),uo=new RegExp("hsl"+lo),go=new RegExp("hsla"+co),st="^(?:#?|0x?)",ce="([0-9a-fA-F]{1})",de="([0-9a-fA-F]{2})",mo=new RegExp(st+ce+ce+ce+"$"),fo=new RegExp(st+ce+ce+ce+ce+"$"),yo=new RegExp(st+de+de+de+"$"),bo=new RegExp(st+de+de+de+de+"$");function at(i){let e=i/100,t,o,n;return e<66?(t=255,o=-155.25485562709179-.44596950469579133*(o=e-2)+104.49216199393888*Math.log(o),n=e<20?0:-254.76935184120902+.8274096064007395*(n=e-10)+115.67994401066147*Math.log(n)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*Math.log(t),o=325.4494125711974+.07943456536662342*(o=e-50)-28.0852963507957*Math.log(o),n=255),{r:x(Math.floor(t),0,255),g:x(Math.floor(o),0,255),b:x(Math.floor(n),0,255)}}var sn=2e3,an=4e4;function vo(i){let{r:e,b:t}=i,o=.4,n=sn,r=an,s;for(;r-n>o;){s=(r+n)*.5;let a=at(s);a.b/a.r>=t/e?r=s:n=s}return s}function xo(i){let e=i.r/255,t=i.g/255,o=i.b/255,n=Math.max(e,t,o),r=Math.min(e,t,o),s=n-r,a=0,l=n,c=n===0?0:s/n;switch(n){case r:a=0;break;case e:a=(t-o)/s+(t<o?6:0);break;case t:a=(o-e)/s+2;break;case o:a=(e-t)/s+4;break}return{h:a*60%360,s:x(c*100,0,100),v:x(l*100,0,100)}}function To(i){let e=i.l*2,t=i.s*(e<=100?e:200-e)/100,o=e+t<1e-9?0:2*t/(e+t);return{h:i.h,s:x(o*100,0,100),v:x((e+t)/2,0,100)}}function wo(i){let e=i.s/100,t=i.v/100,o=(2-e)*t,n=o<=1?o:2-o,r=n<1e-9?0:e*t/n;return{h:i.h,s:x(r*100,0,100),l:x(o*50,0,100)}}function _o(i){let e=i.h/60,t=i.s/100,o=i.v/100,n=Math.floor(e),r=e-n,s=o*(1-t),a=o*(1-r*t),l=o*(1-(1-r)*t),c=n%6,h=[o,a,s,s,l,o][c],p=[l,o,o,a,s,s][c],f=[s,s,l,o,o,a][c];return{r:x(h*255,0,255),g:x(p*255,0,255),b:x(f*255,0,255)}}function ko(i){if(i.length!==2)throw new Error("Invalid hex string: "+i);return parseInt(i,16)}function j(i,e){let t=i.indexOf("%")>-1,o=parseFloat(i);return t?e/100*o:o}function ee(i){return i.toString(16).padStart(2,"0")}var ln={h:0,s:0,v:0,a:1},D=class i{isColor=!0;#e;#t;constructor(e){return this.#e=ln,e&&this.set(e),this.#t=structuredClone(this.#e),this}set(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof i?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value: "+e)}setChannel(e,t,o){this[e]={...this[e],[t]:o}}reset(){this.hsva=this.#t}clone(){return new i(this)}get hsv(){let{h:e,s:t,v:o}=this.#e;return{h:e,s:t,v:o}}set hsv(e){let o={...this.#e,...e};this.#e.h===o.h&&this.#e.s===o.s&&this.#e.v===o.v&&this.#e.a===o.a||(this.#e={h:Math.round(o.h),s:Math.round(o.s),v:Math.round(o.v),a:o.a})}get hsva(){return structuredClone(this.#e)}set hsva(e){this.hsv=e}get hue(){return this.#e.h}set hue(e){this.hsv={h:e}}get saturation(){return this.#e.s}set saturation(e){this.hsv={s:e}}get value(){return this.#e.v}set value(e){this.hsv={v:e}}get lightness(){return this.hsl.l}set lightness(e){this.hsl={...this.hsl,l:e}}get alpha(){return this.#e.a??1}set alpha(e){this.hsv={...this.hsv,a:e}}get kelvin(){return vo(this.rgb)}set kelvin(e){this.rgb=at(e)}get red(){return this.rgb.r}set red(e){this.rgb={...this.rgb,r:e}}get r(){return this.rgb.r/255}set r(e){this.red=e*255}get green(){return this.rgb.g}set green(e){this.rgb={...this.rgb,g:e}}get g(){return this.rgb.g/255}set g(e){this.green=e*255}get blue(){return this.rgb.b}set blue(e){this.rgb={...this.rgb,b:e}}get b(){return this.rgb.b/255}set b(e){this.blue=e*255}get rgb(){let{r:e,g:t,b:o}=_o(this.#e);return{r:Math.round(e),g:Math.round(t),b:Math.round(o)}}set rgb(e){this.hsv={...xo(e),a:"a"in e?e.a:1}}get rgbf(){return{r:this.r,g:this.g,b:this.b}}set rgbf(e){this.rgb={r:e.r,g:e.g,b:e.b}}get rgba(){return{...this.rgb,a:this.alpha}}set rgba(e){this.rgb=e}get hsl(){let{h:e,s:t,l:o}=wo(this.#e);return{h:Math.round(e),s:Math.round(t),l:Math.round(o)}}set hsl(e){this.hsv={...To(e),a:"a"in e?e.a:1}}get hsla(){return{...this.hsl,a:this.alpha}}set hsla(e){this.hsl=e}get rgbString(){return`rgb(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b})`}set rgbString(e){let t,o,n,r,s=1;if(t=po.exec(e))o=j(t[1],255),n=j(t[2],255),r=j(t[3],255);else if(t=ho.exec(e))o=j(t[1],255),n=j(t[2],255),r=j(t[3],255),s=j(t[4],1);else throw new Error("Invalid rgb string: "+e);this.rgb={r:o,g:n,b:r,a:s}}get rgbaString(){let e=this.rgba;return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}set rgbaString(e){this.rgbString=e}get hex(){return this.hex8String}set hex(e){this.hexString=e}get color(){return this}set color(e){this.hsva=e.hsva}get hexString(){let e=this.rgb;return`#${ee(e.r)}${ee(e.g)}${ee(e.b)}`}set hexString(e){let t=e.match(mo)||e.match(fo)||e.match(yo)||e.match(bo);if(!t)throw new Error("Invalid hex string");let[o,n,r,s=255]=t.slice(1).map(a=>ko(a.length===1?`${a}${a}`:a));this.rgb={r:o,g:n,b:r,a:+s/255}}get hex8(){return this.hex8String}get hex8String(){let e=this.rgba;return`#${ee(e.r)}${ee(e.g)}${ee(e.b)}${ee(Math.floor((e.a??1)*255))}`}set hex8String(e){this.hexString=e}get hslString(){let e=this.hsl;return`hsl(${e.h}, ${e.s}%, ${e.l}%)`}set hslString(e){let t=uo.exec(e)||go.exec(e);if(!t)throw new Error("Invalid rgb string: "+e);let[o,n,r,s=1]=t.slice(1).map((a,l)=>j(a,l<3?255:1));this.rgb={r:o,g:n,b:r,a:s}}get hslaString(){let e=this.hsla;return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${e.a})`}set hslaString(e){this.hslString=e}toString(){return this.hex8String}toJSON(){return{isColor:!0,...this.rgba,hex:this.hex8String}}};function pe(i){return!!i.isColor}function It(i){return typeof lt(i)<"u"}function lt(i){if(typeof i=="string"){if(i.match(/^#?[0-9a-fA-F]{6}$/))return"HexString";if(i.match(/^#?[0-9a-fA-F]{8}$/))return"Hex8String";if(i.match(/^rgba?/))return"RgbaString";if(i.match(/^hsla?/))return"HslaString"}else if(typeof i=="object"){if(i instanceof D)return"Color";if("r"in i&&"g"in i&&"b"in i)return"RgbColor";if("h"in i&&"s"in i&&"v"in i)return"HsvColor";if("h"in i&&"s"in i&&"l"in i)return"HslColor";if("kelvin"in i)return"number"}}var cn={disabled:!1},V,he,Ie,Oe,Ce,Le,ve=class{constructor(e,t){this.input=e;G(this,he);w(this,"opts");w(this,"element");w(this,"elements");w(this,"select");w(this,"_evm",new E);w(this,"_mode");w(this,"_locked",!1);w(this,"_log");w(this,"updateMode",(e=this.mode)=>{if(this._log.fn("updateMode",e).debug(),this._mode=e,Te(this,he,Ie).call(this)==="text"){this.elements.text.classList.add("visible");for(let[,t]of k(this.elements.numbers))t.classList.remove("visible");C(this,Oe).call(this)}else{this.elements.text.classList.remove("visible");for(let[,t]of k(this.elements.numbers))t.classList.add("visible");this.mode==="rgba"&&(C(this,V).call(this,this.elements.numbers.a,{min:0,max:255,step:1}),C(this,V).call(this,this.elements.numbers.b,{min:0,max:255,step:1}),C(this,V).call(this,this.elements.numbers.c,{min:0,max:255,step:1}),C(this,V).call(this,this.elements.numbers.d,{min:0,max:1,step:.01})),["hsla","hsva"].includes(this.mode)&&(C(this,V).call(this,this.elements.numbers.a,{min:0,max:360,step:1}),C(this,V).call(this,this.elements.numbers.b,{min:0,max:100,step:1}),C(this,V).call(this,this.elements.numbers.c,{min:0,max:100,step:1}),C(this,V).call(this,this.elements.numbers.d,{min:0,max:1,step:.01})),this.elements.select.selected.innerHTML=[...e].map((t,o)=>`<span class="${["a","b","c","d"][o]}">${t}</span>`).join("")}this.refresh()});G(this,V,(e,t)=>{this._log.fn("#setProps",e,t).debug();for(let[o,n]of k(t))e[o]=String(n)});G(this,Oe,()=>{this.elements.text.value=this.color[this.mode.startsWith("hex")?this.mode+"String":this.mode]});G(this,Ce);G(this,Le);w(this,"refresh",()=>{this._log.fn("refresh").debug();let e=this.input.state.value.hex8String,t=this.mode;return C(this,Ce)===e&&t===C(this,Le)?this:(N(this,Ce,e),N(this,Le,t),this._locked?(this._locked=!1,this):(Te(this,he,Ie).call(this)==="text"?C(this,Oe).call(this):(this.elements.numbers.a.value=String(this.a),this.elements.numbers.b.value=String(this.b),this.elements.numbers.c.value=String(this.c),this.elements.numbers.d.value=String(this.d)),this))});let o={...cn,...t};this._log=new g(`ColorComponents ${e.title}`,{fg:"wheat"}),this.opts=o,this._mode=e.mode;let n=o.container??e.elements.controllers.container,r=d("div",{classes:["gooey-input-color-components-container"],parent:n});this.element=r;let s=d("div",{classes:["gooey-input-color-components-select-container"],parent:r});this.select=new Z({input:this.input,disabled:this.disabled,container:s,options:["hex","hex8","rgba","hsla","hsva"]}),this.select.on("change",h=>{this.updateMode(h.value)});let a=d("div",{classes:["gooey-input-color-components-numbers-container"],parent:r}),l={a:new U(this.input,this.input.opts,a).element,b:new U(this.input,this.input.opts,a).element,c:new U(this.input,this.input.opts,a).element,d:new U(this.input,this.input.opts,a).element};l.a.classList.add("a"),l.b.classList.add("b"),l.c.classList.add("c"),l.d.classList.add("d");for(let[h,p]of k(l)){let f=()=>{this[h]=+p.value,this.input.set(this.color)};Te(this,he,Ie).call(this)==="text"&&p.classList.add("visible"),this._evm.listen(p,"input",f)}let c=d("input",{classes:["gooey-controller","gooey-controller-text","gooey-input-color-components-text"],parent:r});this._evm.listen(c,"change",h=>{let p=h.target,f=lt(p.value);f&&(f=f[0].toLowerCase()+f.slice(1),this.input.set(p.value))}),Te(this,he,Ie).call(this)==="text"&&c.classList.add("visible"),this.elements={container:r,title:s,select:this.select.elements,numbers:l,text:c},this.mode=this._mode,typeof t?.disabled<"u"&&(this.disabled=t.disabled)}get color(){return this.input.state.value}get mode(){return this._mode}set mode(e){this._log.fn("set mode",e).debug(),this._mode=e,this.select.selected=e}get a(){return this.mode==="rgba"?this.color.rgba.r:this.color.hsla.h}set a(e){this.mode==="rgba"?this.color.red=e:this.color.hue=e,this._locked=!0,this.input.refresh()}get b(){return this.mode==="rgba"?this.color.rgba.g:this.color.hsla.s}set b(e){this.mode==="rgba"?this.color.green=e:this.color.saturation=e,this._locked=!0,this.input.refresh()}get c(){switch(this.mode){case"rgba":return this.color.blue;case"hsla":return this.color.lightness;case"hsva":default:return this.color.value}}set c(e){this.mode==="rgba"?this.color.blue=e:this.mode==="hsla"?this.color.lightness=e:this.mode==="hsva"&&(this.color.value=e),this._locked=!0,this.input.refresh()}get d(){return this.color.alpha}set d(e){this.color.alpha=e,this._locked=!0,this.input.refresh()}disable(){this.disabled||(this.disabled=!0),this.select.disable(),this.elements.text.disabled=!0;for(let[,e]of k(this.elements.numbers))e.disabled=!0;return this}enable(){this.disabled&&(this.disabled=!1),this.select.enable(),this.elements.text.disabled=!1;for(let[,e]of k(this.elements.numbers))e.disabled=!1;return this}dispose(){this.elements.title.remove(),this.elements.numbers.a.remove(),this.elements.numbers.b.remove(),this.elements.numbers.c.remove(),this.elements.container.remove(),this.elements.text.remove(),this.select.dispose(),this._evm.dispose()}};V=new WeakMap,he=new WeakSet,Ie=function(){return["rgba","hsla","hsva"].includes(this.mode)?"numbers":"text"},Oe=new WeakMap,Ce=new WeakMap,Le=new WeakMap,ve=L([J],ve);var Me=(i,e,t,o,n)=>(i-e)*(n-o)/(t-e)+o;function Eo(i,e=50){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{t=null,i(...o)},e)}}var dn={color:"#fff",swatches:[],handleSize:10,container:void 0,disabled:!1},xe=class{constructor(e,t){this.input=e;let o={...dn,...t};this.opts=o,this._log=new g(`ColorPicker ${e.title}`,{fg:"lightgreen"}),this._log.fn("constructor").debug({opts:o,this:this}),this._lastColor=this.input.state.value.clone();let n=e.expanded?{}:{height:"0px"},r=d("div",{classes:["gooey-input-color-picker-container"],parent:t?.container??e.elements.controllers.container,style:n});this.element=r;let s=d("canvas",{classes:["gooey-input-color-picker-canvas"],parent:r,height:this._height}),a=Eo(this._updateHandle,100);this._resizeObserver=new ResizeObserver(()=>a()),this._resizeObserver.observe(s);let l=d("div",{classes:["gooey-input-color-picker-handle"],parent:r,style:{background:e.state.value.hexString}}),c=d("input",{type:"range",classes:["gooey-input-range","gooey-input-color-picker-hue"],parent:r,min:0,max:359});this._evm.listen(c,"input",this._updateStateFromHue),xt(c,{parent:r,text:()=>`${this.input.state.value.hsla.h}`,placement:"top",offsetX:"0px",anchor:{x:"mouse",y:c.querySelector("#thumb")},style:{background:"var(--gooey-bg-a)",color:"var(--gooey-fg-a)"}});let h=d("input",{type:"range",classes:["gooey-input-range","gooey-input-color-picker-alpha"],parent:r,min:0,max:1,step:.01});this._evm.listen(h,"input",this.setAlpha),xt(h,{parent:r,text:()=>`${this.input.state.value.alpha}`,placement:"top",offsetX:"0px",anchor:{x:"mouse",y:h.querySelector("#thumb")},style:{background:"var(--gooey-bg-a)",color:"var(--gooey-fg-a)"}}),this.elements={container:r,canvas:s,handle:l,hueSlider:c,alphaSlider:h},this.disabled=this.opts.disabled,this._ctx=s.getContext("2d"),this.canvas.width=this._width,this._evm.listen(this.canvas,"click",this._onClick),this._evm.listen(this.canvas,"pointerdown",this._onPointerDown),this._evm.listen(this.input.elements.container,"pointermove",this._onPointerMove,{passive:!0}),this._updateGradients(),setTimeout(this.draw,10),setTimeout(this._updateHandle,20)}opts;elements;element;_ctx;_height=16*3;_width=256;_resizeObserver;_gradientWhite;_gradientBlack;_dragging=!1;_lockCursorPosition=!1;_lastColor;_log;_evm=new E(["pointerdown","pointerup"]);on=this._evm.on.bind(this._evm);get canvas(){return this.elements.canvas}get hue(){return this.input.state.value.hue}get alpha(){return this.input.state.value.alpha}enable=()=>(this.disabled&&(this.disabled=!1),this.elements.container.classList.remove("gooey-disabled"),this.elements.alphaSlider.disabled=!1,this.elements.hueSlider.disabled=!1,this.elements.canvas.style.pointerEvents="auto",this);disable=()=>(this.disabled||(this.disabled=!0),this.elements.container.classList.add("gooey-disabled"),this.elements.alphaSlider.disabled=!0,this.elements.hueSlider.disabled=!0,this.elements.canvas.style.pointerEvents="none",this);set(e){this.input.state.value.set(e),this.input.refresh(),this.refresh()}setAlpha=e=>{this.input.state.value.alpha=Number(e.target.value),this.input.refresh()};refresh=()=>{this._log.fn("refresh").debug();let e=this.input.state.value;return this._lastColor?.hex===e.hex8String?this:(this._lastColor=e.clone(),this.elements.hueSlider.value=String(this.hue),this.elements.alphaSlider.value=String(this.alpha),this.elements.alphaSlider.style.color=e.hexString,this.draw(),this._lockCursorPosition?(this.elements.handle.style.background=e.hexString,this._lockCursorPosition=!1):this._updateHandle(),this)};draw=()=>{this._fill(`hsl(${this.hue}, 100%, 50%)`),this._fill(this._gradientWhite),this._fill(this._gradientBlack)};_fill(e){this._ctx.fillStyle=e,this._ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}_updateGradients(){this._gradientWhite=this._ctx.createLinearGradient(0,0,this.canvas.width,0),this._gradientWhite.addColorStop(0,"rgba(255,255,255,1)"),this._gradientWhite.addColorStop(1,"rgba(255,255,255,0)"),this._gradientBlack=this._ctx.createLinearGradient(0,0,0,this.canvas.height),this._gradientBlack.addColorStop(0,"rgba(0,0,0,0)"),this._gradientBlack.addColorStop(1,"rgba(0,0,0,1)")}_pointerUpClickLatch=!1;_onPointerDown=e=>{this._log.fn("_onPointerDown").debug(),this._evm.emit("pointerdown"),this._dragging=!0,this._updateFromMousePosition(e),addEventListener("pointerup",this._onPointerUp,{once:!0})};_onPointerMove=e=>{this._log.fn("_onPointerMove").debug(),this._dragging&&this._updateFromMousePosition(e)};_onPointerUp=()=>{this._log.fn("_onPointerUp").debug(),this._evm.emit("pointerup"),this._dragging=!1,this._pointerUpClickLatch=!0};_onClick=e=>{if(this._log.fn("_onClick"),this._pointerUpClickLatch){this._log.debug("Click latch triggered. Aborting."),this._pointerUpClickLatch=!1;return}this._log.debug(),this._updateFromMousePosition(e),this._dragging=!1};_updateFromMousePosition(e){this._log.fn("_updateFromMousePosition").debug();let{left:t,top:o,width:n,height:r}=this.canvas.getBoundingClientRect(),s=x(e.clientX-t,0,n),a=x(e.clientY-o,0,r),{s:l,v:c}=this._getColorAtPosition(s,a);this.input.state.value.hsv={h:this.hue,s:l,v:c},this.input.set(this.input.state.value),this._drawHandle(this._getHandlePosition(this.input.state.value))}_getColorAtPosition=(e,t)=>{this._log.fn("_getColorAtPosition").debug();let{width:o,height:n}=this.canvas.getBoundingClientRect(),r=this.opts.handleSize/3;return{s:Me(e,r,o-r,0,100),v:Me(t,r,n-r,100,0)}};_updateStateFromHue=e=>{this._log.fn("_updateStateFromHue").debug(),this._lockCursorPosition=!0;let t=Number(e.target.value),{s:o,v:n,a:r}=this.input.state.value.hsva;this.input.state.value.hsva={h:t,s:o,v:n,a:r},this.input.set(this.input.state.value),this.elements.handle.style.background=this.input.state.value.hexString,this.draw()};_updateHandle=(e=this.input.state.value)=>{this._drawHandle(this._getHandlePosition(e))};_getHandlePosition=e=>{let{width:t,height:o}=this.canvas.getBoundingClientRect(),n=this.opts.handleSize/2;return{x:Me(e.hsv.s,0,100,n,t-n),y:Me(e.hsv.v,0,100,o-n,n)}};_drawHandle=e=>{this.elements.handle.style.transform=`translate(${e.x}px, ${e.y}px)`,this.elements.handle.style.background=this.input.state.value.hexString};dispose(){this._ctx=null,this.elements.alphaSlider.remove(),this.elements.hueSlider.remove(),this.elements.handle.remove(),this.elements.canvas.remove(),this.elements.container.remove(),this._resizeObserver.disconnect(),this._evm.dispose()}};xe=L([J],xe);function So(...i){let e=0,t=[...i],o=t.shift(),n=t.shift();function r(...s){if(e++>500)throw new Error("infinite loop detected! (500 iteration limit)");o&&n&&o.appendChild(n),o=n,n=s.shift(),n&&r(...s)}r(...t)}var ct=class{svg;back;front;check;constructor(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("icon","copy"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round");let t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.classList.add("front"),t.setAttribute("width","13"),t.setAttribute("height","13"),t.setAttribute("rx","1"),t.setAttribute("ry","1"),t.setAttribute("x","8"),t.setAttribute("y","8");let o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.classList.add("back"),o.setAttribute("width","15"),o.setAttribute("height","15"),o.setAttribute("rx","1"),o.setAttribute("ry","1"),o.setAttribute("x","1"),o.setAttribute("y","1");let n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.classList.add("check"),n.setAttribute("d","M17 9l-7 7-4-4"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","2"),e.appendChild(t),e.appendChild(o),e.appendChild(n),this.svg=e,this.back=o,this.front=t,this.check=n,this}appendTo(e){e.appendChild(this.svg)}};var dt=class{constructor(e,t,o="Copy"){this.container=e;this.text=t;this.message=o;let n=d("div",{classes:["copy-button"],title:"Copy",attributes:{"aria-label":"Copy",title:"Copy"}}),r=d("div",{classes:["copy-button-svg-container"]});this.button=n,this.icon=new ct,this.button.addEventListener("click",this.copy),So(e,this.button,r,this.icon.svg),this.tooltip=new R(this.button,{text:o,placement:"top",offsetY:"6px",delay:600})}button;icon;active=!1;outro=!1;#e;tooltip;copy=()=>{if(typeof navigator>"u"||this.active)return;let e=this.text();e&&(typeof e=="object"&&(e=JSON.stringify(e)),navigator.clipboard?.writeText?.(e),clearTimeout(this.#e),this.#t())};#t=()=>{this.active=!0,this.tooltip.show(),this.button.blur(),this.button.classList.add("active"),this.icon.svg.classList.add("active"),this.icon.front.setAttribute("x","5.5"),this.icon.front.setAttribute("y","5.5"),this.icon.front.setAttribute("rx","10"),this.icon.front.setAttribute("ry","10"),this.tooltip.text="Copied!",setTimeout(this.#o,1250)};#o=()=>{this.active=!1,this.outro=!0,this.button.classList.remove("active"),this.icon.svg.classList.remove("active"),this.icon.svg.classList.add("outro"),this.button.classList.add("outro"),this.icon.front.setAttribute("x","8"),this.icon.front.setAttribute("y","8"),this.icon.front.setAttribute("rx","1"),this.icon.front.setAttribute("ry","1"),setTimeout(this.#i,900)};#i=()=>{this.button.classList.remove("outro"),this.icon.svg.classList.remove("outro"),this.outro=!1,this.tooltip.hide(),clearTimeout(this.#e),this.#e=setTimeout(()=>{this.tooltip.text=this.message},300)}};var pn={__type:"ColorInputOptions",value:"#FF0000FF",mode:"hex",expanded:!1},Pe=class i extends M{__type="InputColor";initialValue;state;picker;components;expanded;_mode;get mode(){return this._mode}set mode(e){this._mode=e,this.components.mode=e}_log;constructor(e,t){let o=Object.assign({},pn,e,{__type:"ColorInputOptions"});super(o,t),this.expanded=o.expanded,this._mode=o.mode,this._log=new g(`InputColor ${o.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:o,this:this}).groupEnd(),o.binding?(this.initialValue=new D(o.binding.target[o.binding.key]),this.state=b(this.initialValue.clone()),this._evm.add(this.state.subscribe(s=>{o.binding.target[o.binding.key]=s}))):(this.initialValue=new D(o.value),this.state=b(this.initialValue.clone()));let n=d("div",{classes:["gooey-input-color-container"],parent:this.elements.content});this.elements.controllers.container=n,this.elements.controllers.currentColor=this._createCurrentColor(n);let r=d("div",{classes:["gooey-input-color-body"],parent:n});this.picker=new xe(this,{container:r}),this.components=new ve(this,{container:r}),this.elements.controllers.body={container:r,picker:this.picker.elements,components:this.components.elements},this._dirty=()=>this.state.value.hex!==this.initialValue.hex,setTimeout(()=>{this.expanded?this.open():this.close(0)},10),this._emit("change"),this.refresh(),this.picker.on("pointerdown",this._lock),this.picker.on("pointerup",this._unlock)}set(e){if(pe(e))this.commit({to:e.rgba,from:this.state.value.rgba,setter:o=>{this.state.value.set(o),this.state.refresh(),this.refresh()}}),this.state.set(new D(e.rgba));else{let o=new D(e);this.commit({to:o.rgba,from:this.state.value.rgba,setter:n=>{this.state.value.set(n),this.state.refresh(),this.refresh()}}),this.state.set(o)}let t=this.state.value;return this._log.fn("set").debug({v:e,newValue:t,this:this}),this._emit("change",t),this.refresh(t),this}refresh=(e=this.state.value)=>(this._log.fn("refresh").debug({v:e,this:this}),this.elements.controllers.currentColor.display.style.backgroundColor=e.hex,this.picker.refresh(),this.components.refresh(),super.refresh(),this);get aTitle(){return this.mode==="rgba"?"r":"h"}get bTitle(){return this.mode==="rgba"?"g":"s"}get cTitle(){return this.mode==="rgba"?"b":this.mode==="hsla"?"l":"v"}get dTitle(){return"a"}_createCurrentColor(e){let t=d("div",{classes:["gooey-input-color-current-color-container"],parent:e}),o=d("div",{classes:["gooey-input-color-current-color-background"],parent:t}),n=d("div",{classes:["gooey-input-color-current-color-display"],parent:o});this._evm.listen(n,"click",this.togglePicker);let r=new dt(t,()=>this.state.value.hex,"Copy Hex");return{container:t,displayBackground:o,display:n,copyButton:r}}static#e="75px";get _pickerContainer(){return this.picker.elements.container}togglePicker=async()=>{this.expanded?await this.close():await this.open()};open=async()=>{this.expanded=!0,this.elements.container.dataset.search_height="100px";let e=this._pickerContainer?.animate([{height:"0px",clipPath:"inset(0 0 100% 0)"},{height:i.#e,clipPath:"inset(0 0 -50% 0)"}],{duration:200,easing:"cubic-bezier(.08,.38,0,0.92)",fill:"forwards"}),t=this.elements.container.animate({maxHeight:"100px",height:"100px"},{duration:200,easing:"cubic-bezier(.08,.38,0,0.92)",fill:"forwards"});this._pickerContainer?.style.setProperty("overflow","visible"),this._pickerContainer?.classList.add("expanded"),await Promise.all([e?.finished,t?.finished]),this._pickerContainer&&document.contains(this._pickerContainer)&&e?.commitStyles(),this.elements.container&&document.contains(this.elements.container)&&t?.commitStyles()};close=async(e=300)=>{this.expanded=!1,delete this.elements.container.dataset.search_height;let t=this._pickerContainer?.animate([{height:i.#e,clipPath:"inset(0 0 -100% 0)"},{height:"0px",clipPath:"inset(0 0 100% 0)"}],{duration:e,easing:"cubic-bezier(.13,.09,.02,.96)",fill:"forwards"}),o=this.elements.container.animate({minHeight:"var(--gooey-input_height)",maxHeight:"var(--gooey-input_height)",height:"var(--gooey-input_height)"},{duration:e,easing:"cubic-bezier(.13,.09,.02,.96)",fill:"forwards"});this._pickerContainer?.style.setProperty("overflow","hidden"),this._pickerContainer?.classList.remove("expanded"),await Promise.all([t?.finished,o?.finished]),this._pickerContainer&&document.contains(this._pickerContainer)&&t?.commitStyles(),this.elements.container&&document.contains(this.elements.container)&&o?.commitStyles()};_lock=()=>{this.lock(this.state.value.rgba)};_unlock=()=>{this.unlock({target:this,to:this.state.value.rgba,setter:e=>{this.state.value.set(e),this.state.refresh(),this._emit("change",this.state.value),this.refresh()}})};enable(){return this.picker.enable(),super.enable(),this}disable(){return this.picker.disable(),super.disable(),this}save(){return super.save({value:this.state.value.hex})}load(e){let t=typeof e=="string"?JSON.parse(e):e;this.id=t.presetId,this.disabled=t.disabled,this.hidden=t.hidden,this.initialValue=new D(t.value),this.set(this.initialValue.clone())}dispose(){this._log.fn("dispose").debug({this:this}),this.picker.dispose(),super.dispose()}};var Io=(i,e,t)=>d("input",{type:"textarea",classes:["gooey-controller","gooey-controller-text"],value:i.state.value,parent:t,attributes:{spellcheck:"false"}});var hn={__type:"TextInputOptions",value:"foo",maxLength:50},Re=class extends M{__type="InputText";initialValue;state;#e;constructor(e,t){let o=Object.assign({},hn,e);super(o,t),this.#e=new g(`InputText ${o.title}`,{fg:"cyan"}),this.#e.fn("constructor").debug({opts:o,this:this}),o.binding?(this.initialValue=o.binding.target[o.binding.key],this.state=b(this.initialValue),this._evm.add(this.state.subscribe(r=>{o.binding.target[o.binding.key]=r}))):(this.initialValue=o.value,this.state=b(o.value));let n=d("div",{classes:["gooey-input-text-container"],parent:this.elements.content});this.elements.controllers={container:n,input:Io(this,o,n)},this._evm.listen(this.elements.controllers.input,"input",this.set),this._evm.add(this.state.subscribe(()=>{this.refresh()}))}enable(){return super.enable(),this.elements.controllers.input.disabled=!1,this}disable(){return super.disable(),this.elements.controllers.input.disabled=!0,this}set=e=>{if(!(typeof e>"u"))return typeof e!="string"?e?.target&&"value"in e.target&&(this.commit({to:e.target.value}),this.state.set(e.target.value)):(this.commit({to:e}),this.state.set(e)),this._emit("change",this.state.value),this};refresh=()=>{let e=this.state.value;return this.elements.controllers.input.value=e,super.refresh(e),this};dispose(){super.dispose()}};var un={__type:"ButtonGridInputOptions",value:[[{text:"",onClick:()=>{}}]],style:{gap:"0.5em"},activeOnClick:!1,resettable:!1},pt=class extends M{__type="InputButtonGrid";initialValue={};state=b({});buttons=new Map;buttonGrid;_log;constructor(e,t){let o=Object.assign({},un,e);super(o,t),this._evm.registerEvents(["click"]),this.initialValue=o.value,this._log=new g(`InputButtonGrid ${o.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:o,this:this});let n=d("div",{classes:["gooey-input","gooey-input-buttongrid-container"],parent:this.elements.content});this.elements.controllers={container:n,buttonGrid:[]},this.buttonGrid=this.toGrid(this.initialValue),this.refresh()}onClick(e){this._evm.on("click",()=>e(this.state.value))}toGrid(e){let t=[],o=e.length,n=Math.max(...e.map(r=>r.length));for(let{element:r}of this.buttons.values())r.remove();this.buttons.clear();for(let r=0;r<o;r++){let s=d("div",{classes:["gooey-controller-buttongrid-row"],parent:this.elements.controllers.container,style:{gap:"0.5em"}});t[r]=[];for(let a=0;a<n;a++){let l=e[r]?.[a];if(l){let c=this.addButton(l,l.id??S(8),r,a);s.appendChild(c.element),t[r][a]=c}}}return this.elements.container.style.setProperty("height",rt(this.elements.controllers.container,"height")),t}addButton(e,t,o,n){let r=_(e.text),s=e.tooltip?Object.assign({placement:"top",delay:1e3},e.tooltip):void 0;e.element=d("button",{id:t,classes:["gooey-controller","gooey-controller-button","gooey-controller-buttongrid-button"],innerHTML:r(),dataset:{id:t,row:String(o),col:String(n)},style:{...e.style,width:"100%"},tooltip:s});let a=new re(e);return typeof e.active!="function"&&this.opts.activeOnClick&&(a.active=()=>this.state.value===a),a.on("click",({button:l})=>{this.set(l)}),this.buttons.set(r()??t,a),a}set(e){this.state.set(e),this._emit("click",e),this.refresh()}refresh(){this._log.fn("refresh").debug({this:this});for(let e of this.buttons.values())e.refresh();return super.refresh(),this}enable(){for(let e of this.buttons.values())e.enable();return super.enable(),this}disable(){for(let e of this.buttons.values())e.disable();return super.disable(),this}dispose(){for(let e of this.buttons.values())e.dispose();this.buttons.clear(),super.dispose()}};function Ot(i){let r="var(--gooey-theme-a)",s="var(--gooey-theme-a)",a=document.createElement("div");a.classList.add("gooey-folder-icon-container");let l=i.allChildren.length+i.inputs.size;a.style.setProperty("filter",`hue-rotate(${i.hue}deg)`);let c=[{id:1,cx:16.43,cy:11.93,r:1.1103},{id:2,cx:15.13,cy:15.44,r:.8081},{id:3,cx:15.13,cy:8.423,r:.8081},{id:4,cx:12.49,cy:16.05,r:.4788},{id:5,cx:12.42,cy:7.876,r:.545},{id:6,cx:10.43,cy:15.43,r:.2577},{id:7,cx:10.43,cy:8.506,r:.2769},{id:8,cx:17.85,cy:14.59,r:.5635},{id:9,cx:17.85,cy:9.295,r:.5635},{id:10,cx:19.19,cy:12.95,r:.5635},{id:11,cx:19.19,cy:10.9,r:.5635},{id:12,cx:20.38,cy:11.96,r:.2661},{id:13,cx:19.74,cy:14.07,r:.2661},{id:14,cx:19.74,cy:9.78,r:.2661},{id:15,cx:20.7,cy:12.96,r:.2661},{id:16,cx:20.7,cy:10.9,r:.2661},{id:17,cx:21.38,cy:11.96,r:.2661}];function h(I){return`<circle
				class="alt c${I.id}"
				cx="${I.cx*1.1}"
				cy="${I.cy}"
				r="${I.r}"
				style="transition-delay: ${I.id*.05}s;"
			/>`}function p(I){return I.map($=>h(c[$-1])).join(`
`)}let v=p({0:[],1:[1],2:[2,3],3:[1,2,3],4:[2,3,4,5],5:[1,2,3,4,5],6:[2,3,4,5,6,7],7:[1,2,3,4,5,6,7],8:[1,2,3,4,5,6,7,8],9:[1,2,3,4,5,6,7,8,9],10:[1,2,3,4,5,6,7,8,9,10],11:[1,2,3,4,5,6,7,8,9,10,11],12:[1,2,3,4,5,6,7,8,9,10,11,12],13:[1,2,3,4,5,6,7,8,9,10,11,12,13],14:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],15:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],17:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]}[Math.min(l,c.length)]),T="cubic-bezier(0.36, 0, 0.66, -0.56)",u="cubic-bezier(0.23, 1, 0.320, 1)",y=`
			.gooey-folder-icon {
				overflow: visible;
				backface-visibility: hidden;
			}

			.gooey-folder-icon circle, .gooey-folder-icon line {
				transform-origin: center;

				transition-duration: 0.25s;
				transition-timing-function: ${u};
				backface-visibility: hidden;
			}

			/*  Circle A  */
			.closed .gooey-folder-icon circle.a {
				transform: scale(1);

				stroke: transparent;
				fill: ${r};

				transition: all .5s ${T}, stroke 2s ${T}, fill .2s ${T} 0s;
			}
			.gooey-folder-icon circle.a {
				transform: scale(0.66);

				stroke: ${r};
				fill: ${s};

				transition: all .33s ${T}, stroke 2s ${T}, fill .2s ease-in 0.25s;
			}

			/*  Circle Alt  */
			.closed .gooey-folder-icon circle.alt {
				transform: translate(-3px, 0) scale(1.8);

				transition-duration: 0.5s;
				transition-timing-function: ${u};
			}
			 .gooey-folder-icon circle.alt {
				transform: translate(0, 0) scale(0);

				stroke: none;
				fill: ${s};

				transition-duration: 0.75s;
				transition-timing-function: ${u};
			}
		`.trim();return a.innerHTML=`
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="100%"
			height="100%"
			viewBox="0 0 24 24"
			fill="none"
			stroke-width="1"
			stroke-linecap="round"
			stroke-linejoin="round"
			class="gooey-folder-icon"
			overflow="visible"
		>
			<circle class="a" cx="12" cy="12" r="4" stroke="${s}" fill="${r}" />

			${v}

			<style lang="css">
				${y}
			</style>
		</svg>`.trim(),a}function Oo(i,e){let t=i.element,o=20,n=i.element.scrollHeight,r=1,s=S(),a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("class","gooey-connector-svg"),a.setAttribute("width",`${o}`),a.setAttribute("stroke-width",`${r}`),a.setAttribute("viewBox",`0 0 ${o} ${n}`),a.setAttribute("backface-visibility","hidden"),a.setAttribute("preserveAspectRatio","xMinYMin slice"),a.style.setProperty("filter",`hue-rotate(${i.hue}deg)`);let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("vector-effect","non-scaling-stroke"),l.setAttribute("fill","none"),l.setAttribute("stroke","var(--gooey-theme-a)"),l.setAttribute("stroke-width",`${r}`),l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("d",`M10,0 Q0,0 0,10 L0,${n}`);let c=document.createElementNS("http://www.w3.org/2000/svg","defs"),h=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");h.setAttribute("id",`gradient-${s}`),h.setAttribute("x1","0%"),h.setAttribute("y1","0%"),h.setAttribute("x2","0%"),h.setAttribute("y2","100%");function p($,Rt,Po="var(--gooey-theme-a)"){let He=document.createElementNS("http://www.w3.org/2000/svg","stop");return He.setAttribute("offset",`${$}%`),He.setAttribute("style",`stop-color: ${Po}; stop-opacity: ${Rt}`),h.appendChild(He),He}p(0,.5),p(1,.5),p(5,.4),p(20,.3),p(40,.2),p(100,.2),l.setAttribute("stroke",`url(#gradient-${s})`),c.appendChild(h),a.insertBefore(c,a.firstChild),a.appendChild(l),t.appendChild(a);let f=a.getBoundingClientRect(),v=e.getBoundingClientRect(),T=f.top,u=v.top,y=T-u-r+"px";a.style.top=y;let I=e.scrollHeight/2+r+2;return a.style.top=I+"px",{container:t,svg:a,path:l}}function Ct(i,e){if(!i.graphics?.connector)return Promise.resolve();let o=i.graphics.connector.path.getTotalLength(),n=e==="open"?{duration:800,delay:0,easing:"cubic-bezier(.29,.1,.03,.94)",offset:{from:o,to:0},array:{from:o,to:o*1.2}}:{duration:250,delay:0,easing:"cubic-bezier(.15,.84,.19,.98)",offset:{from:0,to:o},array:{from:o*1.2,to:o}},r=[{strokeDashoffset:n.offset.from,strokeDasharray:n.array.from},{strokeDashoffset:n.offset.to,strokeDasharray:n.array.to}],s={duration:n.duration,delay:n.delay,easing:n.easing,fill:"forwards"};return i.graphics.connector.path.animate(r,s).finished}function Co(i,e){return i.composedPath().some(t=>t.classList?.contains(e))}var ue=class{class="gooey-terminal-icon";element;classes=[this.class,"gooey-cancel"];constructor(e){let t=e.isRoot?e.elements.header:e.elements.title;e.isRoot&&this.classes.push("gooey-terminal-icon-root"),this.element=d("div",{parent:t,classes:this.classes,innerHTML:`
                <svg class="icon terminal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="4 17 10 11 4 5"></polyline>
                    <line x1="12" x2="20" y1="19" y2="19"></line>
                </svg>
                `.replaceAll(/\t|\n/g,""),tooltip:{text:"<code>console.log(folder)</code>",delay:1500,placement:"right"},onclick:o=>{o.stopPropagation(),o.preventDefault(),console.log(e)}})}};w(ue,"style",`
        .gooey-terminal-icon {
            position: absolute;
            right: -1.5rem;
            top: 0;
            bottom: 0;

            width: 16px;
            height: 16px;

            color: var(--gooey-fg-d);
            transform: translateY(15%);
            opacity: 0;

            transition: opacity 0.2s;
            transition-delay: 0.5s;

            z-index: 1;
        }

        .gooey-terminal-icon-root {
            right: unset;
            left: 0.5rem;
            top: 0.25rem;
        }


        .gooey-terminal-icon:hover {
            opacity: 0.75;
        }

        .gooey-terminal-icon svg {
            width: 100%;
            height: 100%;
        }
    `),ue=L([X],ue);function Lo(i,e){let t=i.length,o=e.length;if(t>o)return!1;if(t===o)return i===e;e:for(let n=0,r=0;n<t;n++){let s=i.charCodeAt(n);for(;r<o;)if(e.charCodeAt(r++)===s)continue e;return!1}return!0}var ht=class{constructor(e){this.folder=e;let t=d("div",{classes:["gooey-toolbar-item","gooey-search-container"]});e.elements.toolbar.container.prepend(t);let o=d("input",{classes:["gooey-controller-text","gooey-search-input","gooey-cancel"],parent:t});this._evm.listen(o,"input",s=>this.search(s.target.value));let n=d("button",{classes:["gooey-search-button","gooey-cancel"],parent:t});this.tooltip=new R(n,{text:this.defaultTooltipText,placement:"left",delay:500});let r=this._searchIcon();return n.appendChild(r),this._evm.listen(n,"click",this.toggle),this.elements={container:t,input:o,button:n,icon:r},this}elements;needle="";showing=!1;tooltip;get defaultTooltipText(){return"Search "+(this.folder.isRoot?"All":this.folder.title)}_evm=new E;search=e=>{this.needle=e;for(let[t,o]of this.folder.allInputs){let n=Lo(this.needle.toLocaleLowerCase(),t.toLowerCase())?"hit":"miss",r=this.needle===""?"hit":n,s=o.elements.container;if(s.dataset.search===r)continue;let a=getComputedStyle(s);s.dataset.search_height??=a.minHeight,s.dataset.search_overflow??=a.overflow??"unset",s.dataset.search_contain??=a.contain??"none",s.dataset.search_opacity??=a.opacity??1,r==="hit"?this._expandInput(s):r==="miss"&&this._collapseInput(s),s.dataset.search=r}};_expandInput=async e=>{if(e.dataset.search==="miss"){e.style.setProperty("overflow",e.dataset.search_overflow),e.style.setProperty("contain",e.dataset.search_contain);let t=e.dataset.search_height??"100%",o=e.animate([{opacity:0,height:"0px",minHeight:"0px"},{opacity:1,height:t,minHeight:t}],{duration:300,easing:"cubic-bezier(0.23, 1, 0.32, 1)",fill:"forwards"});await o.finished,o.commitStyles()}};_collapseInput=async e=>{e.style.setProperty("overflow","hidden"),e.style.setProperty("contain","size");let t=e.animate([{opacity:0,height:"0px",minHeight:"0px"}],{duration:300,easing:"cubic-bezier(0.23, 1, 0.32, 1)",fill:"forwards"});await t.finished,t.commitStyles()};clear=()=>{for(let[,e]of this.folder.allInputs)this._expandInput(e.elements.container)};toggle=e=>{e?.stopImmediatePropagation(),this.showing?this.close():this.open()};_tooltipTimeout;open=()=>{this.showing=!0,this.elements.container.classList.add("active"),this.elements.input.focus(),removeEventListener("click",this._clickOutside),addEventListener("click",this._clickOutside),removeEventListener("keydown",this._escape),addEventListener("keydown",this._escape),this.tooltip.hide(),clearTimeout(this._tooltipTimeout),this._tooltipTimeout=setTimeout(()=>{this.tooltip.text="Cancel (esc)",this.tooltip.placement="top",this.tooltip.offsetX="-40px",this.tooltip.offsetY="-2px"},100);for(let e of this.folder.allChildren)e.closed.value&&(e.element.dataset.searchclosed="true",e.open())};close=()=>{this.showing=!1,this.elements.container.classList.remove("active"),(document.activeElement===this.elements.input||document.activeElement===this.elements.button)&&document.activeElement?.blur(),this.clear(),removeEventListener("click",this._clickOutside),removeEventListener("keydown",this._escape),this.tooltip.hide(),clearTimeout(this._tooltipTimeout),this._tooltipTimeout=setTimeout(()=>{this.tooltip.text=this.defaultTooltipText,this.tooltip.placement="left",this.tooltip.offsetX=qe.offsetX,this.tooltip.offsetY=qe.offsetY},100);for(let e of this.folder.allChildren)e.element.dataset.searchclosed&&(e.element.dataset.searchclosed="",e.close())};_clickOutside=e=>{!this.needle&&!e.composedPath().includes(this.elements.container)&&this.close()};_escape=e=>{e.key==="Escape"&&this.close()};_searchIcon(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("aria-hidden","true"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("viewBox","0 0 20 20"),e.setAttribute("fill","none"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round");let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M13.34 13.34 L19 19"),e.appendChild(t);let o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttribute("cx","8"),o.setAttribute("cy","8"),o.setAttribute("r","7"),e.appendChild(o),e.style.setProperty("width","1.5rem"),e.classList.add("search-icon"),e.style.pointerEvents="none",e}dispose(){this._evm.dispose(),this.tooltip.dispose(),this.elements.container.remove()}};var gn=Object.freeze({presetId:"",title:"",children:[],closed:!1,hidden:!1,controls:new Map,saveable:!0}),Mo={__type:"InternalFolderOptions",parentFolder:void 0,isRoot:!0,_skipAnimations:!0,gooey:void 0,_headerless:!1},Ae=class i{__type="Folder";isRoot=!0;id=S();gooey;presetId;saveable;children=[];inputs=new Map;inputIdMap=new Map;root;parentFolder;settingsFolder;closed;element;elements={};graphics;evm=new E(["change","refresh","toggle","mount"]);on=this.evm.on.bind(this.evm);initialHeight=0;initialHeaderHeight=0;_title;_hidden=()=>!1;_log;_disabledTimer;_clickTime=200;_clicksDisabled=!1;_depth=-1;static _presetIdMap=new Map;constructor(e){if(!("container"in e))throw new Error("Folder must have a container.");let t=Object.assign({},gn,Mo,{gooey:this.gooey,isRoot:!0},e);if(this._log=new g(`Folder ${t.title}`,{fg:"DarkSalmon"}),this._log.fn("constructor").debug({opts:t,this:this}),this.isRoot=t.isRoot,this.isRoot)this._depth=0,this.parentFolder=this,this.root=this;else{if(!t.parentFolder)throw new Error("Non-root folders must have a parent folder.");this.parentFolder=t.parentFolder,this._depth=this.parentFolder._depth+1,this.root=this.parentFolder.root}this.gooey=t.gooey,this._title=t.title??"",this.element=this._createElement(t),this.elements=this._createElements(this.element),this.presetId=this._resolvePresetId();let o=t.closed??!1;typeof this.gooey.opts.storage=="object"&&typeof this.gooey.opts.storage.closed=="boolean"&&(o=this.gooey._closedMap.get()[this.presetId]),this.closed=b(o),this.saveable=!!t.saveable,(this.isRoot||t.searchable)&&new ht(this),t._skipAnimations&&(this.element.classList.add("instant"),this.initialHeight=this.element.scrollHeight,this.initialHeaderHeight=this.elements.header.scrollHeight,this.initialHeaderHeight===0&&console.error(`${this.title} header has a height of 0.`,this.elements.header),setTimeout(()=>{this.element.classList.remove("instant")},0)),this.hidden=t.hidden?_(t.hidden):()=>!1,this._createGraphics(t._headerless).then(()=>{this.evm.emit("mount"),this.evm.add(this.closed.subscribe(n=>{n?this.close():this.open(),this.evm.emit("toggle",n),this.gooey._closedMap.update(r=>(r[this.presetId]=n,r))})),t.closed&&this.closed.set(t.closed)})}get title(){return this._title}set title(e){e!==this._title&&(this._title=e,this.elements.title.animate({opacity:0,transform:"translateY(-0.33rem)"},{duration:75,easing:"ease-out",fill:"forwards"}).onfinish=()=>{this.elements.title.textContent=e,this.elements.title.animate([{opacity:0,transform:"translateY(.33rem)"},{opacity:1,transform:"translateY(0rem)"}],{delay:0,duration:75,easing:"ease-in",fill:"forwards"})})}get hidden(){return this._hidden()}set hidden(e){this._hidden=_(e),this._hidden()?this.hide():this.show()}get allChildren(){return this.children.flatMap(e=>[e,...e.allChildren])}get allInputs(){let e=new Map;for(let t of[this,...this.allChildren])for(let[o,n]of t.inputs.entries())e.set(o,n);return e}isRootFolder(){return this.isRoot}addFolder(e,t){t??={},t.title??=e,this._log.fn("addFolder").debug({options:t,this:this});let o=Object.assign({},Mo,{parentFolder:this,depth:this._depth+1,gooey:this.gooey}),n={__type:"InternalFolderOptions",container:this.elements.content,gooey:this.gooey,isRoot:!1},r=Object.assign({},o,t,n),s=new i(r);return s.on("change",a=>this.evm.emit("change",a)),this.children.push(s),r._headerless&&(s.initialHeaderHeight??=s.elements.header.scrollHeight,s.elements.header.style.display="none"),s}_handleClick(e){if(e.button===0){if(this._log.fn("#handleClick").debug({event:e,this:this}),this.element.removeEventListener("pointerup",this.toggle),this.element.addEventListener("pointerup",this.toggle,{once:!0}),Co(e,"gooey-cancel"))return this._disableClicks();clearTimeout(this._disabledTimer),this._disabledTimer=setTimeout(()=>{this.elements.header.removeEventListener("pointermove",this._disableClicks),this.elements.header.addEventListener("pointermove",this._disableClicks,{once:!0}),this._disabledTimer=setTimeout(()=>{this.elements.header.removeEventListener("pointermove",this._disableClicks),this.element.removeEventListener("pointerup",this.toggle),this._clicksDisabled=!1},this._clickTime)},150),this._clicksDisabled}}_disableClicks=()=>{this._clicksDisabled||(this._clicksDisabled=!0,this._log.fn("disable").debug("Clicks DISABLED")),this._clicksDisabled=!0,clearTimeout(this._disabledTimer)};_resetClicks(){this._log.fn("cancel").debug("Clicks ENABLED"),removeEventListener("pointerup",this.toggle),this._clicksDisabled=!1}toggle=()=>{if(this._log.fn("toggle").debug(),clearTimeout(this._disabledTimer),this._clicksDisabled)return this._resetClicks(),this;if(this.element.classList.contains("gooey-dragged"))return this.element.classList.remove("gooey-dragged"),this;let e=!this.closed.value;return this.closed.set(e),this.evm.emit("toggle",e),this};open(e=!1){return this._log.fn("open").debug(),this.element.classList.remove("closed"),this.evm.emit("toggle",!1),e&&this.closed.set(!1),this._clicksDisabled=!1,this.#t(),Ct(this,"open"),this}close(e=!1){return this._log.fn("close").debug(),this.element.classList.add("closed"),e&&this.closed.set(!0),this.evm.emit("toggle",!0),this._clicksDisabled=!1,this.#t(),Ct(this,"close"),this}toggleHidden(){return this._log.fn("toggleHidden").debug(),this.element.classList.toggle("hidden"),this}hide(){return this._log.fn("hide").error(),this.element.classList.add("hidden"),this}show(){return this._log.fn("show").debug(),this.element.classList.remove("hidden"),this}#e;#t=()=>{this.element.classList.add("animating"),clearTimeout(this.#e),this.#e=setTimeout(()=>{this.element.classList.remove("animating")},600)};_resolvePresetId=(e=[],t)=>{let o=[],n=t?.presetId;if(!n){let s=this;for(;!s.isRoot;)o.unshift(s.title),s=s.parentFolder;o.unshift(this.root.title)}n??=[...o,...e].join("__");let r=0;for(;this.inputs.has(n);)r++,n=r?`${n}_${r}`:n;return this._log.fn("resolvePresetId",this.title,...e).debug({id:n,opts:t,this:this}),n};save(){if(this._log.fn("save").debug({this:this}),this.saveable!==!0)throw new Error("Attempted to save unsaveable Folder: "+this.title);return{__type:"FolderPreset",id:this.presetId,title:this.title,hidden:_(this._hidden)(),children:this.children.filter(t=>t.title!==this.gooey.settingsFolder.title&&t.saveable).map(t=>t.save()),inputs:Array.from(this.inputs.values()).filter(t=>t.opts.saveable).map(t=>t.save())}}load(e){this._log.fn("load").debug({preset:e,this:this}),this.hidden=e.hidden;for(let t of this.children){let o=e.children?.find(n=>n.id===t.presetId);o?t.load(o):console.warn("Missing folder for preset:",{presetId:t.presetId,child:t,folderPreset:o,this:this})}for(let t of this.inputs.values()){let o=e.inputs.find(n=>n.presetId===t.id);o?t.load(o):console.warn("Missing input for preset:",{preset:e,input:t})}return this}refresh(){this._log.fn("refresh").debug(this);for(let e of this.inputs.values())e.refresh();return this}refreshAll(){for(let e of this.allInputs.values())e.refresh();return this.evm.emit("refresh"),this}_registerInput(e,t){let o=0,n=e.title;for(;this.inputs.has(n);)n=`${e.title}_${o}`,o++;return this.inputs.set(n,e),i._presetIdMap.set(e.id,t),this._refreshIcon(),e}_resolveOpts(e,t,o){return o??={},o.title??=e,t&&(o.value??=t),o.presetId??=this._resolvePresetId([e]),o}add(e,t,o){let n=this._resolveOpts(e,t,o),r=this._createInput(n);return this.inputs.set(n.presetId,r),this._refreshIcon(),r}addMany(e,t){let o=t?.folder??this;for(let[n,r]of Object.entries(e))if(typeof r=="object"){if(pe(r)){this.addColor(n,r);continue}let s=o.addFolder(n);s.addMany(r,{folder:s})}else{let s={binding:{target:e,key:n}};this.add(n,r,s)}return this}bind(e,t,o={}){let n=o.title??t,r=this._resolveOpts(n,e[t],o);r.value??=e[t],r.binding={target:e,key:t,initial:r.value};let s=this._createInput(r);return this._registerInput(s,r.presetId),s}_transientRoot=null;bindMany(e,t,o){let n,r={},s=this;if(typeof e=="string"){if(!t||typeof t!="object")throw new Error("No target object provided.");n=t,r=o||{},s=this.addFolder(e,r.folderOptions)}else n=e,r=t||{};this._transientRoot||(this._transientRoot=s);for(let[l,c]of Object.entries(n)){let h=l==="themes"?console.warn:()=>{},p=r[l]||{},f={};typeof c=="object"?(h("themes A"),pe(c)?this.bindColor(c,"color",{title:l,...p}):("folderOptions"in p?f=p.folderOptions:"folderOptions"in c&&(f=c.folderOptions),this.addFolder(l,f).bindMany(c,p))):"options"in p?(h("themes B"),this.bindSelect(n,l,p)):(h("themes C"),this.bind(n,l,p))}let a=this._transientRoot;return this._transientRoot=null,a}addNumber(e,t,o={}){let n=this._resolveOpts(e,t,o),r=new Se(n,this);return this._registerInput(r,n.presetId)}bindNumber(e,t,o){let n=this._resolveBinding(e,t,o);return this.addNumber(t,n.value,n)}addText(e,t,o){let n=this._resolveOpts(e,t,o),r=new Re(n,this);return this._registerInput(r,n.presetId)}bindText(e,t,o){let n=this._resolveBinding(e,t,o);return this.addText(t,n.value,n)}addColor(e,t,o){let n=this._resolveOpts(e,t,o),r=new Pe(n,this);return this._registerInput(r,n.presetId)}bindColor(e,t,o){let n=this._resolveBinding(e,t,o);return this.addColor(t,n.value,n)}addButton(e,t,o){let n=this._resolveOpts(e,t,o),r=new Ee(n,this);return this._registerInput(r,n.presetId)}bindButton(e,t,o){return this.addButton(t,e[t],o)}addButtonGrid(e,t,o){let n=this._resolveOpts(e,t,o),r=new pt(n,this);return this._registerInput(r,n.presetId)}bindButtonGrid(e,t,o){return this.addButtonGrid(t,e[t],o)}addSelect(e,t,o){let n=this._resolveOpts(e,t,o);if(n.options=t,n.value=o?.initialValue??oe(t)?.at(0)??o?.binding?.initial,!n.value)throw console.warn("No value provided for select:",{title:e,array:t,options:o,opts:n}),new Error("No value provided for select.");return this._registerInput(new se(n,this),n.presetId)}bindSelect(e,t,o={}){let n=this._resolveBinding(e,t,o);return n.value=e[t],this.addSelect(t,n.options,n)}addSwitch(e,t,o){let n=this._resolveOpts(e,t,o),r=new ke(n,this);return this._registerInput(r,n.presetId)}bindSwitch(e,t,o){let n=this._resolveBinding(e,t,o);return this.addSwitch(t,n.value,n)}_validateBinding(e,t){if(e.title??=e.binding?.key,t){let o=e.binding,n=e.value;if(n||(n=o?.target[o?.key]),!n)if(o){let r=!1;if(typeof o.target>"u"&&(r=!0,console.error('\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m Binding "target" is undefined:',o)),typeof o.key>"u"&&(r=!0,console.error('\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m Binding "key" is undefined:',o)),typeof o.target[o.key]>"u"&&(r=!0,console.error(`\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m The provided binding key \x1B[33m"${o.key}"\x1B[39m does not exist on provided \x1B[33mtarget\x1B[39m:`,o)),r)throw new Error("gooey ~ Failed to bind input to the provided target object.",{cause:e})}else throw new Error("gooey ~ No value or binding provided.",{cause:e})}return e}_createInput(e){this._log.fn("#createInput").debug(this);let t=this._resolveType(e);switch(e=this._validateBinding(e,!1),t){case"InputText":return new Re(e,this);case"InputNumber":return new Se(e,this);case"InputColor":return new Pe(e,this);case"InputSelect":return new se(e,this);case"InputButton":return new Ee(e,this);case"InputSwitch":return new ke(e,this)}throw new Error("Invalid input type: "+t+" for options: "+e)}_resolveBinding(e,t,o={}){let n=o.title??t,r=this._resolveOpts(n,e[t],o);return r.binding={target:e,key:t,initial:r.value},this._validateBinding(r,!0)}_resolveType(e){this._log.fn("resolveType").debug({options:e,this:this});let t=e.value??e.binding?.target[e.binding.key];if("onClick"in e)return"InputButton";if("options"in e&&Array.isArray(e.options)||F(t))return t??=e.options[0],e.value??=t,"InputSelect";switch(typeof t){case"boolean":return"InputSwitch";case"number":return"InputNumber";case"string":return It(t)?"InputColor":"InputText";case"function":return"InputButton";case"object":{if(Array.isArray(t))return"InputSelect";if(pe(t))return"InputColor";if(F(t))return"InputSelect";throw new Error("Invalid input view: "+JSON.stringify(t))}default:throw new Error("Invalid input view: "+t)}}_createElement(e){if(this._log.fn("#createElement").debug({el:e.container,this:this}),this.isRoot){let t=e.width;return d("div",{id:`gooey-root_${this.id}`,classes:["gooey-root","gooey-folder","closed"],dataset:{theme:this.gooey.theme??"default"},parent:O(e.container)[0],style:t?{width:t}:void 0})}return d("div",{parent:this.parentFolder.elements.content,classes:["gooey-folder","closed"],style:{order:this.parentFolder.children.length+this.parentFolder.inputs.size+1}})}_createElements(e){this._log.fn("#createElements").debug({element:e,this:this});let t=d("div",{parent:e,classes:["gooey-header"]});t.addEventListener("pointerdown",this._handleClick.bind(this));let o=d("div",{parent:t,classes:["gooey-title"],textContent:this.title}),n=d("div",{parent:t,classes:["gooey-toolbar"]}),r=d("div",{classes:["gooey-content-wrapper"],parent:e}),s=d("div",{classes:["gooey-content"],parent:r});return{header:t,toolbar:{container:n},title:o,contentWrapper:r,content:s}}async _createGraphics(e=!1){this.isRootFolder()||(this._log.fn("createGraphics").debug({this:this}),await new Promise(t=>setTimeout(t,0)),this.isRootFolder()||(this.graphics={icon:Ot(this)},this.elements.header.prepend(this.graphics.icon),e||(this.initialHeaderHeight??=this._resolveHeaderHeight(),this.graphics.connector=Oo(this,this.graphics.icon))),!1)}_resolveHeaderHeight(){let e=28,t=this.root?.gooey?.wrapper;if(!t)throw new Error("No wrapper found!  This should never happen...");let o=getComputedStyle(t).getPropertyValue("--gooey-header_height");if(o.endsWith("px"))e=parseFloat(o);else if(o.endsWith("em")){let n=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;e=parseFloat(o)*n}else console.error("Invalid header height for",this.title),console.error({prop:o});return e}get hue(){let e=this.parentFolder.children.indexOf(this),t=this.parentFolder.isRootFolder()?e-1:e,o=this._depth-1;return t*20+o*80}#o;_refreshIcon(){this._log.fn("#refreshIcon").debug(this),this.graphics&&(clearTimeout(this.#o),this.#o=setTimeout(()=>{this.graphics?.icon.replaceWith(Ot(this))},1))}disposed=!1;dispose(){if(this.disposed&&!1){this._log.fn("dispose").error("Already disposed.",this);return}this.elements.header.removeEventListener("click",this.toggle),this.elements.header.addEventListener("pointerdown",this._handleClick),this.element.remove();for(let e of this.inputs.values())e.dispose();for(let e of this.children)e.dispose();try{this.parentFolder.children.splice(this.parentFolder.children.indexOf(this),1)}catch(e){this._log.fn("dispose").error("Error removing folder from parent",{err:e})}this.disposed=!0}};var Lt={__type:"GooeyStorageOptions",key:"gooey",closed:!0,theme:!0,presets:!0,position:!0,size:!0},ut={__type:"WindowManagerOptions",preserveZ:!1,zFloor:0,bounds:void 0,obstacles:void 0,resizable:{grabberSize:9,color:"var(--bg-d)",sides:["right","left"],corners:[]},draggable:{bounds:void 0,classes:{default:"gooey-draggable",dragging:"gooey-dragging",cancel:"gooey-cancel",dragged:"gooey-dragged"}}},Mt={__type:"GooeyOptions",title:"gooey",storage:!0,closed:!1,position:"top-right",margin:16,container:"body",theme:"vanilla",themeMode:"dark",themes:[Fe,Bt,Ft],resizable:!0,draggable:!0,loadDefaultFont:!0,settingsFolder:{closed:!0}},mn=["on","add","addMany","addButtonGrid","addSelect","addButton","addText","addNumber","addSwitch","addColor","bind","bindMany","bindButtonGrid","bindSelect","bindButton","bindText","bindNumber","bindSwitch","bindColor"],Pt=class i{__type="Gooey";id=S();folder;opts;presetManager;dirty=!1;wrapper;container;settingsFolder;_undoManager=new ot;themer;windowManager;_isWindowManagerOwner=!1;_birthday=Date.now();_honeymoon=1e3;_theme;_log;_closedMap;static _initialized=!1;constructor(e){if(!i._initialized&&globalThis.document){i._initialized=!0;let c=new CSSStyleSheet;c.replaceSync(Vt),globalThis.document.adoptedStyleSheets.push(c)}let t=A([Mt,e??{}],{concatArrays:!1});t.container??=document.body,typeof t.storage=="object"&&(t.storage=Object.assign({},Lt,t.storage));let o=!1,n=ye(t.storage,Lt);n?(t.storage={...n,key:`${n.key}::${t.title?.toLowerCase().replaceAll(/\s/g,"-")}`},`${t.storage.key}::wm::0::position`in localStorage||(o=!0)):o=!0,this.opts=t,this._log=new g(`Gooey ${this.opts.title}`,{fg:"palevioletred"}),this._log.fn("constructor").debug({options:e,opts:t}),this.opts.loadDefaultFont!==!1&&(new FontFace("fredoka",`url(${encodeURI?.("https://cdn.jsdelivr.net/fontsource/fonts/fredoka:vf@latest/latin-wdth-normal.woff2")})`,{style:"normal",display:"swap",weight:"300 700",stretch:"75% 125%",unicodeRange:"U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD"}).load().then(p=>{document.fonts.add(p)}),new FontFace("inconsolata",`url(${encodeURI?.("https://cdn.jsdelivr.net/fontsource/fonts/inconsolata:vf@latest/latin-wdth-normal.woff2")})`,{style:"normal",display:"swap",weight:"300 700",stretch:"75% 125%",unicodeRange:"U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD"}).load().then(p=>{document.fonts.add(p)})),this.container=O(this.opts.container)[0],this.wrapper=d("div",{classes:["gooey-wrapper"],style:{display:"contents"},parent:this.container}),this._closedMap=Ue("gooey::closed-map",{}),this._closedMap,this.folder=new Ae({...this.opts,__type:"FolderOptions",container:this.wrapper,gooey:this});for(let c of mn)this[c]=this.folder[c].bind(this.folder);let r=c=>{globalThis.navigator?.userAgent?.match(/mac/i)?c.metaKey&&c.key==="z"&&(c.preventDefault(),c.shiftKey?this._undoManager.redo():this._undoManager.undo()):c.ctrlKey&&(c.key==="z"&&(c.preventDefault(),this._undoManager.undo()),c.key==="y"&&(c.preventDefault(),this._undoManager.redo()))};removeEventListener("keydown",r),addEventListener("keydown",r);let{button:s,updateIcon:a}=this._createSettingsButton(this.folder.elements.toolbar.container);this.folder.elements.toolbar.settingsButton=s;let l=Mt.settingsFolder.closed;return typeof t.storage=="object"&&t.storage.closed!==!1?l=this._closedMap.value[`${this.title}__gooey_settings_folder`]??!0:t.settingsFolder?.closed&&(l=t.settingsFolder.closed),this.settingsFolder=this.addFolder("gooey_settings_folder",{_headerless:!0,...t.settingsFolder,closed:l}),this.settingsFolder.element.classList.add("gooey-folder-alt"),a(),this.themer=this.opts._themer??this._createThemer(this.settingsFolder),this.theme=this.opts.theme,this.presetManager=this._createPresetManager(this.settingsFolder),this.windowManager??=this._createWindowManager(this.opts,this.opts.storage),this._reveal(o),this}async _reveal(e){if(!this.container)return;let t=this.wrapper.cloneNode(!0);t.style.visibility="hidden",this.container.prepend(t);let o=t.children[0].getBoundingClientRect();if(t.remove(),typeof this.opts.position=="string"){let n=je(o,this.opts.position,{bounds:this.opts.container,margin:this.opts.margin});if(e||this.opts.storage&&this.opts.storage.position===!1){let r=this.window;r?.draggableInstance&&(r.draggableInstance.position=n)}}this.container.appendChild(this.wrapper),this.folder.element.animate([{opacity:0},{opacity:1}],{fill:"none",duration:400}),oo()&&setTimeout(()=>{this.folder.element.style.display="table",this.folder.element.offsetHeight,this.folder.element.style.display="flex"},500)}get title(){return this.folder.title}set title(e){this.folder.title=e}get closed(){return this.folder.closed}get inputs(){return this.folder.inputs}get allInputs(){return new Map([...this.folder.allInputs.entries()].filter(([e])=>!e.startsWith("ui")&&!e.startsWith("presets")))}get window(){return this.windowManager?.windows.get(this.folder.element.id)}set theme(e){this._theme=e,this.folder.element.setAttribute("theme",e),this.folder.element.setAttribute("mode",this.themer.mode.value)}get theme(){return this._theme}addFolder(e,t){return this._honeymoon&&this._birthday-Date.now()<1e3&&(this._honeymoon=!1,this._reveal(!0)),this.folder.addFolder(e,{...t,gooey:this})}save(e,t=S(10)){return this._log.fn("save").debug({title:e,id:t}),{__type:"GooeyPreset",__version:0,id:t,title:e,data:this.folder.save()}}load(e){this._log.fn("load").debug({preset:e}),this.dirty=!1,this._lockCommits(e),this.folder.load(e.data),Promise.resolve().then(()=>this._unlockCommits())}_undoLock=!1;_lockCommit={from:void 0};_commit(e){if(this._undoLock){this._log.fn("commit").debug("LOCKED: prevented commit while locked");return}this._log.fn("commit").debug("commited",e),this._undoManager?.commit(e)}_lockCommits=e=>{this._undoManager.lockedExternally=!0,this._lockCommit.from=e,this._log.fn(K("lock")).debug("commit",{from:e,lockCommit:this._lockCommit})};_unlockCommits=e=>{e??={},e.target??=this,e.from??=this._lockCommit.from,this._undoManager.lockedExternally=!1,this._commit(e),this._log.fn(K("unlock")).debug("commit",{commit:e,lockCommit:this._lockCommit})};_createThemer(e){this._log.fn("createThemer").debug({folder:e});let t,o=this.opts._themer,n={localStorageKey:this.opts.storage?this.opts.storage.key+"::themer":void 0,mode:this.opts.themeMode,autoInit:!this.themer,persistent:!!(this.opts.storage&&this.opts.storage.theme),themes:this.opts.themes,theme:this.opts.themes.find(s=>s.title===this.opts.theme),vars:_t};n.vars=A([_t,n.vars]),o?t=o:(n.wrapper=this.wrapper,t=new et(this.folder.element,n));let r=e.addFolder("ui");return r.on("mount",()=>{r.graphics?.connector?.svg.style.setProperty("filter","saturate(0.1)"),r.graphics?.icon.style.setProperty("filter","saturate(0)")}),e&&(r.addSelect("theme",t.themes.value,{labelKey:"title",initialValue:t.theme.value}).on("change",a=>{t.theme.set(a.value)}),r.addButtonGrid("mode",[["light","dark","system"].map(a=>({text:a,onClick:()=>t?.mode.set(a),active:()=>t?.mode.value===a}))],{activeOnClick:!0})),t}_createSettingsButton(e){let t=d("button",{parent:e,classes:["gooey-toolbar-item","gooey-settings-button"],innerHTML:Qt,tooltip:{text:()=>this.settingsFolder?.closed.value?"Open Settings":"Close Settings",placement:"left",delay:750,delayOut:0,hideOnClick:!0}}),o=()=>{this.folder.elements.toolbar.settingsButton?.classList.toggle("open",!this.settingsFolder.closed.value)};return t.addEventListener("click",()=>{this.settingsFolder.toggle(),o(),this.folder.closed&&this.folder.open()}),{button:t,updateIcon:o}}_createPresetManager(e){let{presets:t,defaultPreset:o,storage:n}=this.opts,r;return typeof n=="object"&&n.presets&&(r=n.key+"::presets"),new Ze(this,e,{presets:t,defaultPreset:o,localStorageKey:r})}_createWindowManager(e,t){if(this.windowManager)return this.windowManager;let o;this.opts.draggable&&(o=Object.assign({},ut.draggable),o.handle=this.folder.elements.header,o.position=this.opts.position,o.localStorageKey=t&&t.key?t.key:void 0,o.bounds=this.container,t&&t.position===!1&&(o.localStorageKey=void 0));let n;if(this.opts.resizable&&(n=Object.assign({},ut.resizable),n.bounds=this.container,n.localStorageKey=t&&t.key?t.key:void 0,t&&t.size===!1&&(n.localStorageKey=void 0)),e?._windowManager instanceof be){let a=e._windowManager;return a.add(this.folder.element,{id:this.id,resizable:n,draggable:o}),a}let r=ye({...ut,draggable:o,resizable:n},Xe);this._log.fn("_createWindowManager").debug({windowManagerOpts:r,options:e,opts:this.opts,dragOpts:o,resizeOpts:n});let s=new be({...r,draggable:o,resizable:n});return this._isWindowManagerOwner=!0,s.add(this.folder.element,{id:this.id}),s}dispose=()=>{this._log.fn("dispose").debug(this),this.themer?.dispose(),this._isWindowManagerOwner&&this.windowManager?.dispose(),this.presetManager.folder.dispose(),this.settingsFolder?.dispose(),this.folder?.dispose()}};export{D as Color,Ae as Folder,Mt as GUI_DEFAULTS,Lt as GUI_STORAGE_DEFAULTS,ut as GUI_WINDOWMANAGER_DEFAULTS,Pt as Gooey,g as Logger,be as WindowManager,pe as isColor,It as isColorFormat,Bo as logger,lt as parseColorFormat,b as state};
