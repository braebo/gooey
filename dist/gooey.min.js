"use strict";var gooey=(()=>{var St=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Ai=Object.getOwnPropertyNames;var Bi=Object.prototype.hasOwnProperty;var $e=n=>{throw TypeError(n)};var Hi=(n,t,e)=>t in n?St(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Fi=(n,t)=>{for(var e in t)St(n,e,{get:t[e],enumerable:!0})},$i=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ai(t))!Bi.call(n,r)&&r!==e&&St(n,r,{get:()=>t[r],enumerable:!(i=Fe(t,r))||i.enumerable});return n};var zi=n=>$i(St({},"__esModule",{value:!0}),n),C=(n,t,e,i)=>{for(var r=i>1?void 0:i?Fe(t,e):t,o=n.length-1,s;o>=0;o--)(s=n[o])&&(r=(i?s(t,e,r):s(r))||r);return i&&r&&St(t,e,r),r};var x=(n,t,e)=>Hi(n,typeof t!="symbol"?t+"":t,e),ye=(n,t,e)=>t.has(n)||$e("Cannot "+e);var L=(n,t,e)=>(ye(n,t,"read from private field"),e?e.call(n):t.get(n)),N=(n,t,e)=>t.has(n)?$e("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),K=(n,t,e,i)=>(ye(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),It=(n,t,e)=>(ye(n,t,"access private method"),e);var br={};Fi(br,{Color:()=>z,Folder:()=>Et,GUI_DEFAULTS:()=>He,GUI_STORAGE_DEFAULTS:()=>ve,GUI_WINDOWMANAGER_DEFAULTS:()=>Dt,Gui:()=>H,isColor:()=>Z,isColorFormat:()=>oe,parseColorFormat:()=>Rt,state:()=>b});function A(n,t){let[e,...i]=n,{concatArrays:r=!0}=t??{};return i.reduce((o,s)=>{if(!s)return o;let a=Object.keys(s);for(let l=0;l<a.length;l++){let c=a[l],p=o[c],h=s[c];Array.isArray(p)&&Array.isArray(h)?r?o[c]=[...new Set([...p,...h])]:o[c]=h:p&&typeof p=="object"?h!==!0&&(h&&typeof h=="object"?typeof globalThis.window<"u"&&h instanceof Element?o[c]=h:o[c]=A([{...p},h],t):(h||h===!1)&&(o[c]=h)):h!==void 0&&(o[c]=h)}return o},{...e})}function $(n,t={}){let e=n.resolved?{}:{base:n.vars.color.base,dark:{"bg-a":n.vars.color.dark?.["bg-a"]||n.vars.color.base["dark-a"],"bg-b":n.vars.color.dark?.["bg-b"]||n.vars.color.base["dark-b"],"bg-c":n.vars.color.dark?.["bg-c"]||n.vars.color.base["dark-c"],"bg-d":n.vars.color.dark?.["bg-d"]||n.vars.color.base["dark-d"],"bg-e":n.vars.color.dark?.["bg-e"]||n.vars.color.base["dark-e"],"fg-a":n.vars.color.dark?.["fg-a"]||n.vars.color.base["light-a"],"fg-b":n.vars.color.dark?.["fg-b"]||n.vars.color.base["light-b"],"fg-c":n.vars.color.dark?.["fg-c"]||n.vars.color.base["light-c"],"fg-d":n.vars.color.dark?.["fg-d"]||n.vars.color.base["light-d"],"fg-e":n.vars.color.dark?.["fg-e"]||n.vars.color.base["light-e"],...n.vars.color.dark},light:{"bg-a":n.vars.color.light?.["bg-a"]||n.vars.color.base["light-a"],"bg-b":n.vars.color.light?.["bg-b"]||n.vars.color.base["light-b"],"bg-c":n.vars.color.light?.["bg-c"]||n.vars.color.base["light-c"],"bg-d":n.vars.color.light?.["bg-d"]||n.vars.color.base["light-d"],"bg-e":n.vars.color.light?.["bg-e"]||n.vars.color.base["light-e"],"fg-a":n.vars.color.light?.["fg-a"]||n.vars.color.base["dark-a"],"fg-b":n.vars.color.light?.["fg-b"]||n.vars.color.base["dark-b"],"fg-c":n.vars.color.light?.["fg-c"]||n.vars.color.base["dark-c"],"fg-d":n.vars.color.light?.["fg-d"]||n.vars.color.base["dark-d"],"fg-e":n.vars.color.light?.["fg-e"]||n.vars.color.base["dark-e"],...n.vars.color.light}};return{title:n.title,prefix:n.prefix||"fractils",vars:A([{color:e},t,n.vars]),resolved:!0}}var Vt=$({title:"default",prefix:"fracgui",vars:{color:{base:{"theme-a":"#00bcd4","dark-a":"#0B0B11","dark-b":"#1b1d29","dark-c":"#46465e","dark-d":"#55566a","dark-e":"#787b89","light-a":"#ffffff","light-b":"#c9ccd7","light-c":"#a9adba","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}},core:{light:{"controller-dim_background":"color-mix(in sRGB, var(--fracgui-bg-a) 75%, transparent)"}}}});var ze=$({title:"scout",prefix:"fracgui",vars:{color:{base:{"theme-a":"#ff4221","theme-b":"#ff9215","theme-c":"#ff8bd3","dark-a":"#15161d","dark-b":"#282a36","dark-c":"#272d30","dark-d":"#3a3a44","dark-e":"#4d4d58","light-a":"#dfe1e9","light-b":"#c3c4c7","light-c":"#777d8f","light-d":"#5f6377","light-e":"#363945"},dark:{},light:{}},utility:{dark:{filter:"contrast(1.05) brightness(1.05)"}},core:{dark:{"folder-header_background":"color-mix(in sRGB, var(--fracgui-bg-a) 100%, transparent)"},light:{"controller-dim_background":"#96a09c"}}}});var Ge=$({title:"flat",prefix:"fracgui",vars:{color:{base:{"theme-a":"#00bcd4","theme-b":"#f8d2c9","theme-c":"#ba788a","dark-a":"#0B0B11","dark-b":"#15161D","dark-c":"#1F202D","dark-d":"#353746","dark-e":"#474A5B","light-a":"#ffffff","light-b":"#dfe1e9","light-c":"#BABECA","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}},core:{dark:{"input-number-range_outline":"1px solid color-mix(in sRGB, var(--fracgui-bg-c) 33%, transparent)"}}}});var De=`@charset "UTF-8";
.fracgui-root {
  z-index: 0;
}

.fracgui-header {
  z-index: 2;
}

.fracgui-toolbar {
  z-index: 3;
}

.fracgui-root .fracgui-content,
.fracgui-root .fracgui-content-wrapper,
.fracgui-folder .fracgui-content,
.fracgui-folder .fracgui-content-wrapper {
  display: grid;
  grid-template-rows: 1fr;
  animation-name: open;
  animation-duration: 0.25s;
  animation-fill-mode: forwards;
  animation-timing-function: cubic-bezier(0.1, 1, 0.1, 1);
}
.fracgui-root .fracgui-header,
.fracgui-folder .fracgui-header {
  height: var(--fracgui-header_height);
  max-height: var(--fracgui-header_height);
}
.fracgui-root.closed .fracgui-content,
.fracgui-root.closed .fracgui-content-wrapper,
.fracgui-folder.closed .fracgui-content,
.fracgui-folder.closed .fracgui-content-wrapper {
  animation-name: close;
  animation-duration: 0.25s;
  animation-fill-mode: forwards;
  animation-timing-function: cubic-bezier(0.05, 1, 0.2, 1);
}
.fracgui-root.closed .fracgui-folder .fracgui-header,
.fracgui-folder.closed .fracgui-folder .fracgui-header {
  max-height: 0;
}
.fracgui-root.instant .fracgui-content-wrapper,
.fracgui-folder.instant .fracgui-content-wrapper {
  grid-template-rows: 1fr;
  animation: none;
}
.fracgui-root.instant .fracgui-folder .fracgui-header,
.fracgui-folder.instant .fracgui-folder .fracgui-header {
  height: var(--fracgui-header_height);
  max-height: var(--fracgui-header_height);
}

.fracgui-root.closed .fracgui-content {
  transition: opacity 0.1s;
  transition-delay: 0.1s;
  opacity: 0 !important;
}
.fracgui-root.closed .fracgui-content.instant {
  transition: none;
}

.fracgui-root.animating .fracgui-content,
.fracgui-root.animating .fracgui-content-wrapper, .fracgui-root.closed .fracgui-content,
.fracgui-root.closed .fracgui-content-wrapper,
.fracgui-folder.animating .fracgui-content,
.fracgui-folder.animating .fracgui-content-wrapper,
.fracgui-folder.closed .fracgui-content,
.fracgui-folder.closed .fracgui-content-wrapper {
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);
  overflow: hidden;
}
.fracgui-root.animating .fracgui-content::-webkit-scrollbar-thumb,
.fracgui-root.animating .fracgui-content-wrapper::-webkit-scrollbar-thumb, .fracgui-root.closed .fracgui-content::-webkit-scrollbar-thumb,
.fracgui-root.closed .fracgui-content-wrapper::-webkit-scrollbar-thumb,
.fracgui-folder.animating .fracgui-content::-webkit-scrollbar-thumb,
.fracgui-folder.animating .fracgui-content-wrapper::-webkit-scrollbar-thumb,
.fracgui-folder.closed .fracgui-content::-webkit-scrollbar-thumb,
.fracgui-folder.closed .fracgui-content-wrapper::-webkit-scrollbar-thumb {
  transition: none !important;
  background: transparent !important;
}
@-moz-document url-prefix() {
  .fracgui-root.animating .fracgui-content,
  .fracgui-root.animating .fracgui-content-wrapper, .fracgui-root.closed .fracgui-content,
  .fracgui-root.closed .fracgui-content-wrapper,
  .fracgui-folder.animating .fracgui-content,
  .fracgui-folder.animating .fracgui-content-wrapper,
  .fracgui-folder.closed .fracgui-content,
  .fracgui-folder.closed .fracgui-content-wrapper {
    transition: none !important;
    scrollbar-color: transparent transparent;
  }
}

@keyframes reveal {
  from {
    grid-template-rows: 0fr;
  }
  to {
    grid-template-rows: 1fr;
  }
}
@keyframes open {
  from {
    grid-template-rows: 0fr;
  }
  to {
    grid-template-rows: 1fr;
  }
}
@keyframes close {
  from {
    grid-template-rows: 1fr;
  }
  to {
    grid-template-rows: 0fr;
  }
}
.fracgui-folder {
  contain: content;
  height: fit-content;
}
.fracgui-folder.hidden {
  display: none;
}
.fracgui-folder:not(.fracgui-root) {
  position: relative;
}

.fracgui-folder .fracgui-header {
  contain: strict;
  position: relative;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding-left: var(--fracgui-folder-header_padding-left);
  outline-offset: -1px;
  color: var(--fracgui-folder-header-dim_color);
  background: var(--fracgui-folder-header_background);
  outline: var(--fracgui-folder-header_outline, 1px solid color-mix(in sRGB, var(--fracgui-bg-b) 50%, transparent));
  box-shadow: var(--fracgui-folder-header_box-shadow, 0 0 0.1rem #000 inset);
  transition: opacity var(--fracgui-transition-duration);
  cursor: pointer;
}
.fracgui-folder .fracgui-header .fracgui-title {
  contain: layout style paint;
  position: relative;
  width: fit-content;
  font-size: calc(var(--fracgui-font-size) * 0.9);
  font-weight: var(--fracgui-folder-header_font-weight);
  letter-spacing: var(--fracgui-folder-header_letter-spacing);
  font-variation-settings: "wght" var(--fracgui-folder-header_font-weight), "wdth" 100;
  transition: color var(--fracgui-transition-duration);
}
.fracgui-folder .fracgui-header .fracgui-folder-icon-container {
  contain: strict;
  width: 1.1rem !important;
  height: 1.1rem !important;
  color: var(--fracgui-fg-c);
  backface-visibility: hidden;
}
.fracgui-folder .fracgui-header .fracgui-folder-icon-container .fracgui-folder-icon {
  transition: opacity var(--fracgui-transition-duration);
  contain: strict;
  backface-visibility: hidden;
}

.fracgui-connector-svg {
  contain: strict;
  display: flex;
  position: absolute;
  top: 0;
  left: 0;
  width: 20px;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 10;
  backface-visibility: hidden;
}

.fracgui-folder {
  contain: content;
}
.fracgui-folder .fracgui-content {
  contain: content;
  display: flex;
  flex-direction: column;
  width: 100%;
  border-left: var(--fracgui-folder-content_padding-left) solid var(--fracgui-folder-header_background);
}

.fracgui-folder:hover:not(.fracgui-root) > .fracgui-header {
  color: var(--fracgui-folder-header_color);
}
.fracgui-folder:hover:not(.fracgui-root) > .fracgui-content {
  opacity: 1;
}

.fracgui-root {
  contain: content;
  position: absolute;
  display: flex;
  flex-direction: column;
  inset: 0;
  width: var(--fracgui-root_width);
  min-width: var(--fracgui-root_min-width);
  max-width: var(--fracgui-root_max-width);
  height: fit-content;
  background: var(--fracgui-folder_background);
  border-radius: var(--fracgui-radius-md);
  filter: var(--fracgui-filter);
  font-family: var(--fracgui-font-family);
  font-weight: var(--fracgui-folder-content_font-weight);
  user-select: none;
  z-index: 99;
}

.fracgui-root > .fracgui-header {
  contain: strict;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-around;
  gap: 0.5rem;
  width: 100%;
  min-height: var(--fracgui-root-header_height);
  color: var(--fracgui-fg-c);
  background: var(--fracgui-bg-a);
  border-radius: var(--fracgui-radius-md);
  border-bottom-left-radius: var(--fracgui-radius-xs);
  border-bottom-right-radius: var(--fracgui-radius-xs);
  cursor: pointer;
  cursor: grab;
}
.fracgui-root > .fracgui-header .fracgui-title {
  contain: layout style paint;
  position: relative;
  width: fit-content;
  height: var(--fracgui-root-header_height);
  font-size: var(--fracgui-font-size);
  font-weight: var(--fracgui-root-header_font-weight);
  font-variation-settings: "wght" var(--fracgui-root-header_font-weight), "wdth" 100;
  letter-spacing: var(--fracgui-root-header_letter-spacing);
  line-height: var(--fracgui-root-header_height);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  pointer-events: none;
}

.fracgui-root > .fracgui-content-wrapper > .fracgui-content {
  display: flex;
  flex-direction: column;
  width: 100%;
  margin: 0;
  max-height: var(--fracgui-root_max-height);
  border-radius: var(--fracgui-radius-md);
  border-top-left-radius: var(--fracgui-radius-sm);
  border-top-right-radius: var(--fracgui-radius-sm);
  background: var(--fracgui-root-content_background);
  backdrop-filter: var(--fracgui-backdrop-filter);
  outline-offset: -1px;
  box-shadow: 0 0 4.5px 0.5px hsla(0, 10%, var(--fracgui-shadow-lightness), var(--fracgui-shadow-opacity)) inset;
  overflow-y: scroll;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  backface-visibility: hidden;
}
@-moz-document url-prefix() {
  .fracgui-root > .fracgui-content-wrapper > .fracgui-content {
    transition: none !important;
    scrollbar-color: var(--fracgui-bg-b) var(--fracgui-bg-a);
    scrollbar-width: thin;
    scrollbar-gutter: auto;
  }
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-webkit-scrollbar {
  width: 5px;
  height: 0px;
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-moz-scrollbar {
  width: 5px;
  height: 0px;
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-webkit-scrollbar-thumb {
  background: var(--fracgui-controller_background);
  border: none;
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-moz-scrollbar-thumb {
  background: var(--fracgui-controller_background);
  border: none;
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-webkit-scrollbar-track {
  background: var(--fracgui-folder-header_background);
  border-bottom-right-radius: var(--fracgui-radius-sm);
}
.fracgui-root > .fracgui-content-wrapper > .fracgui-content::-moz-scrollbar-track {
  background: var(--fracgui-folder-header_background);
  border-bottom-right-radius: var(--fracgui-radius-sm);
}

@-moz-document url-prefix() {
  .fracgui-root.animating > .fracgui-content-wrapper > .fracgui-content {
    overflow: hidden;
  }
}

.fracgui-controller,
.fracgui-controller-text,
.fracgui-controller-switch,
.fracgui-controller-button {
  color: var(--fracgui-controller-dim_color);
  background: var(--fracgui-controller-dim_background);
}
.fracgui-controller.disabled,
.fracgui-controller-text.disabled,
.fracgui-controller-switch.disabled,
.fracgui-controller-button.disabled {
  opacity: 0.75;
  filter: brightness(0.75);
  color: var(--fracgui-bg-e);
  pointer-events: none;
}

.fracgui-controller {
  contain: layout style;
  width: 100%;
  box-shadow: var(--fracgui-controller_box-shadow);
  border-radius: var(--fracgui-controller_border-radius);
  outline: var(--fracgui-controller_outline);
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color, background, opacity;
}
.fracgui-controller:hover:not(:disabled), .fracgui-controller:focus-visible:not(:disabled), .fracgui-controller:active:not(:disabled) {
  opacity: 1;
  color: var(--fracgui-controller_color);
  background: var(--fracgui-controller_background);
}

.fracgui-controller-button {
  contain: strict;
  cursor: pointer;
  height: 1.5rem;
  margin: 0;
  padding: 0;
  border: none;
  border-radius: var(--fracgui-controller_border-radius);
  outline: var(--fracgui-controller_outline);
  outline-offset: -1px;
  box-shadow: 1px 2px 6px var(--fracgui-shadow-color), 1px -1px 1px hsla(250, 10%, calc(var(--fracgui-shadow-lightness)), calc(var(--fracgui-shadow-opacity))) inset, 1px -1px 1px hsla(250, 10%, calc(var(--fracgui-shadow-lightness)), calc(var(--fracgui-shadow-opacity))) inset, -0.5px 0.5px 0.5px hsla(250, 10%, 50%, calc(var(--fracgui-shadow-opacity))) inset;
  font-family: var(--fracgui-controller_font-family);
  font-size: calc(var(--fracgui-font-size) * 0.85);
  font-variation-settings: "wght" 400;
  text-align: center;
  transform: scale(1);
  backface-visibility: hidden;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: background, color, transform, box-shadow;
}
.fracgui-controller-button svg {
  width: 100%;
  height: 100%;
}
.fracgui-root[mode=dark] .fracgui-controller-button {
  outline: none;
}

.fracgui-controller-button:hover:not(:disabled), .fracgui-controller-button:active:not(:disabled) {
  background: var(--fracgui-controller_background);
  color: var(--fracgui-controller_color);
}
.fracgui-controller-button:active {
  transform: scale(0.975);
  color: var(--fracgui-theme-a);
  box-shadow: 0px 0px 3px var(--fracgui-shadow-color), 0px 0px 5px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 3), calc(var(--fracgui-shadow-opacity) / 1)) inset, 0px 0px 10px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 2), calc(var(--fracgui-shadow-opacity) / 2)) inset, 0px 0px 20px hsla(250, 10%, calc(var(--fracgui-shadow-lightness) / 1), calc(var(--fracgui-shadow-opacity) / 2)) inset;
}
.fracgui-controller-button:disabled {
  opacity: 0.5;
  cursor: default;
  pointer-events: none;
}

.fracgui-controller-select-container {
  contain: content;
  position: relative;
  outline: none;
  border: none;
}
.fracgui-controller-select-container[contenteditable=true] .fracgui-controller-select-selected {
  cursor: text;
  outline: 1px solid var(--fracgui-theme-a);
}

.fracgui-controller-select-selected {
  border-radius: var(--fracgui-radius-xs);
  outline: 1px solid color-mix(in sRGB, var(--fracgui-bg-d) 0%, transparent);
  text-align: center;
  letter-spacing: var(--fracgui-folder-content_letter-spacing);
  overflow: hidden;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: background, color, filter;
  cursor: pointer;
}
.fracgui-controller-select-selected.active, .fracgui-controller-select-selected:hover, .fracgui-controller-select-selected:focus-visible, .fracgui-controller-select-selected:active {
  filter: contrast(1.1) brightness(1.25);
}

@keyframes dropdown {
  from {
    transform: translateY(0rem);
  }
  to {
    transform: translateY(0.25rem);
  }
}
.fracgui-controller-select-dropdown {
  contain: layout style;
  backface-visibility: hidden;
  display: none;
  position: absolute;
  display: flex;
  flex-direction: column;
  width: 0px;
  height: 0px;
  padding: 0;
  margin: 0;
  background: color-mix(in sRGB, var(--fracgui-folder-header_background) calc(var(--fracgui-opacity) / 4 * 100%), transparent);
  color: var(--fracgui-controller-dim_color);
  backdrop-filter: var(--fracgui-backdrop-filter);
  outline: 1px solid var(--fracgui-bg-b);
  border-radius: var(--fracgui-radius);
  box-shadow: 0px 0.3px 0.3px hsla(var(--fracgui-shadow-lightness), 0.49), -0.1px 2.1px 2.2px -0.6px hsla(var(--fracgui-shadow-lightness), 0.47), -0.2px 4.6px 4.9px -1.2px hsla(var(--fracgui-shadow-lightness), 0.45), -0.4px 9.2px 9.8px -1.7px hsla(var(--fracgui-shadow-lightness), 0.42), -0.7px 17.4px 18.5px -2.3px hsla(var(--fracgui-shadow-lightness), 0.4), -1.2px 30.6px 32.6px -2.9px hsla(var(--fracgui-shadow-lightness), 0.38);
  z-index: 100;
  transition: opacity 0.2s cubic-bezier(0.23, 1, 0.32, 1), transform 0.2s cubic-bezier(0.23, 1, 0.32, 1);
  opacity: 0;
  pointer-events: none;
  transform: translate(0, 0) scaleY(0);
  transform-origin: top center;
}
.fracgui-controller-select-dropdown.expanded {
  contain: content;
  display: block;
  width: fit-content;
  height: fit-content;
  padding: 0.1rem;
  opacity: 1;
  transform: translate(0, 0.5rem) scaleY(1);
  animation: dropdown 0.15s forwards;
}

.fracgui-controller-select-option {
  contain: content;
  padding: 0.1rem 0.75rem;
  line-height: 1.5rem;
  font-family: var(--fracgui-font, var(--font-d));
  font-size: calc(var(--fracgui-font-size) * 0.8);
  letter-spacing: 0.5px;
  color: var(--fracgui-fg-d);
  transition-duration: 0.15s;
  transition-property: background, color, filter;
  cursor: pointer;
}
.fracgui-controller-select-option:hover, .fracgui-controller-select-option:focus-visible {
  color: var(--fracgui-controller_color);
  background: color-mix(in sRGB, var(--fracgui-controller_background) 50%, var(--fracgui-folder_background));
}
.fracgui-controller-select-option:first-of-type {
  border-top-left-radius: var(--fracgui-radius-sm);
  border-top-right-radius: var(--fracgui-radius-sm);
}
.fracgui-controller-select-option:last-of-type {
  border-bottom-left-radius: var(--fracgui-radius-sm);
  border-bottom-right-radius: var(--fracgui-radius-sm);
}
.fracgui-controller-select-option.selected, .fracgui-controller-select-option:hover {
  color: var(--fracgui-fg-a);
}

.fracgui-wrapper[mode=light] .fracgui-controller-select-option.selected, .fracgui-wrapper[mode=light] .fracgui-controller-select-option:hover {
  background: var(--fracgui-folder-header_background);
}

.fracgui-toolbar {
  contain: content;
  backface-visibility: hidden;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 75%;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.5rem;
  pointer-events: none;
}

.fracgui-toolbar-item svg {
  max-height: 1rem;
}

.fracgui-search-container {
  contain: content;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.25rem;
  padding: 0.25rem 0.1rem 0.25rem 0;
  cursor: pointer;
  pointer-events: all;
}

.fracgui-header:hover .fracgui-search-button {
  opacity: 1;
}

.fracgui-search-button {
  contain: strict;
  all: unset;
  display: flex;
  align-items: center;
  width: 1.5rem;
  height: 0.9rem;
  transition-duration: 0.5s;
  transition-property: color, opacity;
}
.fracgui-search-button svg {
  pointer-events: none;
}
.fracgui-search-button svg path {
  transform: translate(0, 0) scale(1);
  transform-origin: 50% 50%;
  transition-duration: 0.15s;
  transition: transform 0.15s;
}
.fracgui-search-button svg circle {
  fill: transparent;
  transform: translate(0, 0) scale(1);
  transition-duration: 0.15s;
  transition: transform 0.15s;
}

.fracgui-search-button {
  color: var(--fracgui-toolbar-icon-dim_color);
  opacity: 0;
}

.fracgui-search-button:hover {
  color: var(--fracgui-fg-e);
  opacity: 1;
  transition-duration: 0.15s;
}

.fracgui-search-button:active {
  transition-duration: 0.05s;
  background: transparent;
  color: var(--fracgui-fg-d);
  opacity: 1;
  scale: 0.9;
}

.fracgui-search-container.active .fracgui-search-button {
  color: var(--fracgui-bg-e);
  opacity: 1;
}
.fracgui-search-container.active .fracgui-search-button path {
  transform: translate(-10%, 10%) scale(0);
  transform-origin: 60% 60%;
}
.fracgui-search-container.active .fracgui-search-button circle {
  fill: var(--fracgui-bg-e);
  transform: translate(-10%, 20%) scale(0.75);
}

input.fracgui-search-input {
  contain: content;
  width: 6rem;
  height: 1rem;
  padding: 0 0.25rem;
  color: var(--fracgui-fg-c);
  background: var(--fracgui-bg-b);
  border-radius: var(--fracgui-radius-sm);
  box-shadow: 0 0 11px rgba(0, 0, 0, 0.2666666667) inset;
  outline: none;
  border: none;
  font-size: calc(var(--fracgui-font-size) * 0.75);
  caret-color: var(--fracgui-bg-e);
  caret-shape: block;
  line-height: 4px !important;
  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
}
.fracgui-root[mode=light] input.fracgui-search-input {
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.0666666667) inset;
}

.fracgui-search-input {
  max-width: 0rem;
  opacity: 0;
  pointer-events: none;
  transition-duration: 1s;
}

.fracgui-search-container.active .fracgui-search-input {
  max-width: 6rem;
  opacity: 1;
  pointer-events: all;
  transition-duration: 0.33s;
}

.fracgui-settings-button {
  contain: content;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.25rem;
  border: none;
  width: 1rem;
  margin: 0;
  padding: 0;
  margin-right: 0.5rem;
  color: var(--fracgui-toolbar-icon-dim_color);
  background: none;
  cursor: pointer;
  transition: color 0.15s;
  pointer-events: all;
}
.fracgui-settings-button:hover {
  color: var(--fracgui-toolbar-icon_color);
}
.fracgui-settings-button .gear,
.fracgui-settings-button .dot-left,
.fracgui-settings-button .dot-center,
.fracgui-settings-button .dot-right {
  transition-duration: 0.5s;
  transition-timing-function: cubic-bezier(0.16, 0.9, 0, 1.01);
  transition-property: opacity, transform;
  transform-origin: center;
  pointer-events: none;
}
.fracgui-settings-button .gear {
  transition: all 0.5s cubic-bezier(0.16, 0.9, 0, 1.01), transform 0.33s cubic-bezier(0, 1.07, 0.48, 1.27);
  opacity: 0;
  transform: scale(1.33) rotate(-180deg);
}
.fracgui-settings-button:hover .gear {
  transition: 0.5s cubic-bezier(0.16, 0.9, 0, 1.01);
}
.fracgui-settings-button.open .gear {
  transition: 0.33s cubic-bezier(0, 1.07, 0.48, 1.5);
}
.fracgui-settings-button .dot-left {
  opacity: 1;
  transform: translateX(0);
}
.fracgui-settings-button .dot-center {
  opacity: 1;
}
.fracgui-settings-button .dot-right {
  opacity: 1;
  transform: scale(1) translateX(0);
}
.fracgui-settings-button:hover .gear, .fracgui-settings-button.open .gear {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}
.fracgui-settings-button:hover .dot-left, .fracgui-settings-button.open .dot-left {
  opacity: 0;
  transform: translateX(36%);
}
.fracgui-settings-button:hover .dot-center, .fracgui-settings-button.open .dot-center {
  transform: scale(1.25);
}
.fracgui-settings-button:hover .dot-right, .fracgui-settings-button.open .dot-right {
  opacity: 0;
  transform: scale(1.2) translateX(-36%);
}
.fracgui-settings-button.open .gear {
  opacity: 1;
  transform: scale(1) rotate(58deg);
}
.fracgui-settings-button:active {
  background: none;
}

.fracgui-folder .copy-button {
  contain: content;
  cursor: pointer;
  height: 2rem;
  padding: 10%;
  color: var(--fracgui-fg-a);
  background: color-mix(in sRGB, var(--fracgui-bg-a) 0%, transparent);
  outline: 1px solid transparent;
  border-radius: 0.2rem;
  transition-property: all, background, color;
  transition-delay: 0s, 1s, 0.75s;
  transition-duration: 0.25s, 0.5s;
  font-size: 0.8rem;
  font-family: var(--fracgui-font-family);
}
.fracgui-folder .copy-button:not(.active, .outro):hover {
  color: var(--fracgui-fg-b);
  background: color-mix(in sRGB, var(--fracgui-bg-a) 75%, transparent);
  transition-duration: 0.15s, 0.25s;
  transition-delay: 0s;
}
.fracgui-folder .copy-button:not(.active, .outro):active, .fracgui-folder .copy-button:not(.active, .outro):focus {
  color: var(--fracgui-fg-c);
  background: var(--fracgui-bg-c);
}
.fracgui-folder .copy-button.active, .fracgui-folder .copy-button.outro {
  color: var(--fracgui-fg-a);
  outline-color: transparent !important;
  background: color-mix(in sRGB, var(--fracgui-bg-a) 0%, transparent);
  opacity: 1 !important;
  transition-delay: 0s;
  transition-duration: 0.25s;
}
.fracgui-folder .copy-button-svg-container {
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  grid-area: 1/1;
}
.fracgui-folder .copy-button-svg-container svg {
  overflow: visible;
  width: 100%;
  height: 100%;
}
.fracgui-folder .copy-button-svg-container svg .front,
.fracgui-folder .copy-button-svg-container svg .back,
.fracgui-folder .copy-button-svg-container svg .check {
  transform-origin: 50% 50%;
}
.fracgui-folder .copy-button-svg-container svg .front {
  transition-duration: 0.66s !important;
  transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  stroke: currentColor;
}
.fracgui-folder .copy-button-svg-container svg.active .front {
  transition-timing-function: cubic-bezier(0.2, 2, 0.2, 0.85);
  transition-duration: 0.2s;
  transform: scale(2);
  fill: #12a084 !important;
  stroke: #12a084 !important;
}
.fracgui-folder .copy-button-svg-container svg.outro .front {
  transition-duration: 0.5s !important;
}
.fracgui-folder .copy-button-svg-container svg .back {
  opacity: 1;
  transform: translate(0, 0);
  transition-duration: 0.33s;
  transition-timing-function: cubic-bezier(0.77, 0, 0.175, 1);
}
.fracgui-folder .copy-button-svg-container svg.active .back {
  opacity: 0;
  transform: translate(15%, 15%);
}
.fracgui-folder .copy-button-svg-container svg.outro .back {
  transition: opacity 0.25s 0.25s, transform 1s 0s;
}
.fracgui-folder .copy-button-svg-container svg .check {
  stroke: var(--fracgui-light-a);
  opacity: 0;
  transform: scale(0);
  transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0s;
}
.fracgui-folder .copy-button-svg-container svg.active .check {
  opacity: 1;
  transform: scale(1.25);
  transition: 0.3s cubic-bezier(0.2, 2, 0.2, 0.85) 0.1s;
}

.fracgui-input-drawer-toggle {
  contain: strict;
  right: 0.5rem;
  top: 0.5rem;
  min-width: 0.33rem;
  height: 75%;
  color: var(--fracgui-fg-c);
  background: var(--fracgui-drawer-toggle_background);
  transition: background var(--fracgui-transition-duration);
  box-shadow: -1px 0 1px 0.5px color-mix(in sRGB, var(--fracgui-bg-a) 50%, transparent) inset;
  border-top-right-radius: var(--fracgui-radius-sm);
  border-bottom-right-radius: var(--fracgui-radius-sm);
  cursor: pointer;
}
.fracgui-input-drawer-toggle:hover {
  background: var(--fracgui-bg-c);
}

@property --fracgui-resetbtn-gradstart {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}
@property --fracgui-resetbtn-gradend {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
.fracgui-input-reset-btn {
  contain: strict;
  --fracgui-resetbtn-gradstart: 5%;
  --fracgui-resetbtn-gradend: 16%;
  position: absolute;
  right: 5px;
  top: 0;
  bottom: 0;
  width: 20px;
  height: 20px;
  margin: auto 0;
  transform: translateX(0);
  opacity: 0;
  border-radius: 50%;
  color: var(--fracgui-fg-c);
  background-image: radial-gradient(circle, var(--fracgui-theme-a) 0%, var(--fracgui-theme-a) var(--fracgui-resetbtn-gradstart), transparent var(--fracgui-resetbtn-gradend), transparent 100%);
  cursor: pointer;
  pointer-events: none;
  transition: opacity 0.25s cubic-bezier(0.215, 0.61, 0.355, 1), --fracgui-resetbtn-gradstart 0.25s cubic-bezier(0.215, 0.61, 0.355, 1), --fracgui-resetbtn-gradend 0.25s cubic-bezier(0.215, 0.61, 0.355, 1);
}
.fracgui-input-reset-btn:hover {
  --fracgui-resetbtn-gradStart: 37.5%;
  --fracgui-resetbtn-gradend: 45%;
}
.fracgui-input-reset-btn.dirty {
  opacity: 1;
  pointer-events: all;
}

.fracgui-input-title {
  position: relative;
  contain: content;
  max-width: var(--fracgui-input-section-1_width);
  min-width: var(--fracgui-input-section-1_width);
  text-wrap: balance;
  padding-left: 8px;
  font-size: calc(var(--fracgui-font-size) * 0.85);
  letter-spacing: var(--fracgui-folder-content_letter-spacing);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color;
}

.fracgui-input-container {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  height: 0%;
  min-height: var(--fracgui-input_height);
  color: var(--fracgui-input-container_color);
  outline: var(--fracgui-input-container_outline);
  box-shadow: var(--fracgui-input-container_box-shadow);
  transition: opacity 0.15s ease-in 0.2s;
}
.fracgui-input-container:first-of-type {
  border-top-left-radius: var(--fracgui-radius-sm);
  border-top-right-radius: var(--fracgui-radius-sm);
}
.fracgui-input-container:first-of-type::before {
  content: "";
  position: absolute;
  background-color: transparent;
  bottom: 1rem;
  width: 0.5rem;
  height: 1rem;
  border-top-left-radius: 0.25rem;
  box-shadow: 0 -0.5rem 0 0 var(--fracgui-folder-header_background);
  clip-path: inset(0 0 0 0);
  opacity: 1;
  transition: inherit;
}
.fracgui-input-container:first-of-type::after {
  content: "";
  position: absolute;
  background-color: transparent;
  right: 0;
  bottom: 1rem;
  width: 0.5rem;
  min-height: 1rem;
  border-top-right-radius: 0.25rem;
  box-shadow: 0 -0.5rem 0 0 var(--fracgui-folder-header_background);
  clip-path: inset(0 0 0 0);
  opacity: 1;
  transition: inherit;
}
.fracgui-folder:not(:last-of-type) .fracgui-input-container:last-of-type {
  border-bottom-left-radius: var(--fracgui-radius-sm);
  border-bottom-right-radius: var(--fracgui-radius-sm);
}
.fracgui-folder:not(:last-of-type) .fracgui-input-container:last-of-type::before {
  content: "";
  position: absolute;
  background-color: transparent;
  top: 1rem;
  height: 1rem;
  width: 0.5rem;
  border-bottom-left-radius: 0.25rem;
  box-shadow: 0 0.5rem 0 0 var(--fracgui-folder-header_background);
  clip-path: inset(0 0 0 0);
}
.fracgui-folder:not(:last-of-type) .fracgui-input-container:last-of-type::after {
  content: "";
  position: absolute;
  background-color: transparent;
  right: 0;
  top: 1rem;
  height: 1rem;
  width: 0.5rem;
  border-bottom-right-radius: 0.25rem;
  box-shadow: 0 0.5rem 0 0 var(--fracgui-folder-header_background);
  clip-path: inset(0 0 0 0);
}

.fracgui-input-container:hover {
  color: var(--fracgui-fg-b);
}
.fracgui-input-container:has(input:active) .fracgui-controller-number, .fracgui-input-container:has(.fracgui-controller:active) .fracgui-controller-number {
  opacity: 1;
  background: var(--fracgui-controller_background);
}
.fracgui-input-container:has(input:active) .fracgui-input-title, .fracgui-input-container:has(.fracgui-controller:active) .fracgui-input-title {
  color: var(--fracgui-theme-a);
}
.fracgui-input-container.fracgui-search-hit {
  min-height: var(--fracgui-input_height);
}
.fracgui-input-container.fracgui-search-hit .fracgui-input-title {
  color: var(--fracgui-theme-a);
}
.fracgui-input-container.fracgui-search-miss {
  min-height: 0rem;
  overflow: hidden;
}
.fracgui-input-container.fracgui-search-miss::after {
  opacity: 0;
  transition: inherit;
}
.fracgui-input-container.fracgui-search-miss::before {
  opacity: 0;
  transition: inherit;
}
.fracgui-input-container.expanded .fracgui-input-container {
  min-height: unset;
}
.fracgui-input-container .fracgui-input-content {
  contain: content;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  width: 100%;
  margin: 0;
  padding-right: 0.5rem;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container {
  contain: content;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-left: 1px;
  width: 100%;
  height: 90%;
  border-radius: var(--fracgui-radius-sm);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container {
  contain: strict;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  width: 2rem;
  height: 1.5rem;
  margin: 0;
  padding: 0;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button {
  contain: strict;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 90%;
  height: 50%;
  outline: none;
  opacity: 0.5;
  border: none;
  border-radius: var(--fracgui-radius-xs);
  box-shadow: none;
  background: transparent;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color, background, box-shadow, opacity;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button svg {
  width: 1rem;
  height: 1rem;
  color: var(--fracgui-fg-d);
  opacity: 0.1;
  scale: 1;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color, opacity;
  user-select: none;
  pointer-events: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:hover, .fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:active {
  opacity: 1;
  box-shadow: 0px 0px 1px 0px hsl(0, 0%, 0%) inset;
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:hover, .fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:active {
  box-shadow: 0px 0px 1px 0px hsl(0, 0%, 100%) inset;
}

.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:hover svg, .fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:active svg {
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button:active svg {
  color: var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-buttons-increment {
  border-top-left-radius: var(--fracgui-radius);
  border-top-right-radius: var(--fracgui-radius);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-buttons-decrement {
  border-bottom-left-radius: var(--fracgui-radius);
  border-bottom-right-radius: var(--fracgui-radius);
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range {
  contain: layout style size;
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 0.5rem;
  accent-color: var(--fracgui-input-number-range_color);
  background: var(--fracgui-input-number-range_background);
  border-radius: var(--fracgui-radius-xs);
  box-shadow: var(--fracgui-input-number-range_box-shadow);
  outline: var(--fracgui-input-number-range_outline);
  opacity: 0.7;
  transition: 0.15s;
  overflow: visible;
  min-width: 1rem;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range:hover {
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range:active {
  background: color-mix(in lch, var(--fracgui-theme-a), var(--fracgui-input-number-range_background));
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 0.5rem;
  height: 1rem;
  background: var(--fracgui-input-number-range_color);
  border-radius: var(--fracgui-radius-xs);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range::-moz-range-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 0.5rem;
  height: 1rem;
  background: var(--fracgui-input-number-range_color);
  border-radius: var(--fracgui-radius-xs);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range:active::-webkit-slider-thumb {
  background: var(--fracgui-theme-a);
  box-shadow: 0 0 20px var(--fracgui-theme-a);
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range:active::-moz-range-thumb {
  background: var(--fracgui-theme-a);
  box-shadow: 0 0 20px var(--fracgui-theme-a);
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range::-moz-range-track {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 9;
}
.fracgui-input-container .fracgui-input-content input.fracgui-input-number-range::-webkit-slider-runnable-track {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 9;
}
.fracgui-input-container .fracgui-input-content .fracgui-controller-number,
.fracgui-input-container .fracgui-input-content .fracgui-controller-text {
  -webkit-appearance: textfield;
  -moz-appearance: textfield;
  appearance: textfield;
  width: 100%;
  min-width: 2rem;
  max-width: var(--fracgui-input-section-2_width);
  height: 1.25rem;
  border: none;
  outline: var(--fracgui-controller_outline);
  font-family: var(--fracgui-controller_font-family);
  font-size: calc(var(--fracgui-font-size) * 0.85);
  font-variation-settings: "wght" 400;
  text-align: center;
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color, background, box-shadow;
  overflow: visible;
}
.fracgui-input-container .fracgui-input-content .fracgui-controller-number::-webkit-inner-spin-button, .fracgui-input-container .fracgui-input-content .fracgui-controller-number::-webkit-outer-spin-button,
.fracgui-input-container .fracgui-input-content .fracgui-controller-text::-webkit-inner-spin-button,
.fracgui-input-container .fracgui-input-content .fracgui-controller-text::-webkit-outer-spin-button {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  display: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-controller-number.dragging,
.fracgui-input-container .fracgui-input-content .fracgui-controller-text.dragging {
  outline: 1px solid color-mix(in sRGB, var(--fracgui-theme-a) 50%, transparent);
  box-shadow: 0 0 0.75rem color-mix(in sRGB, var(--fracgui-theme-a) 33%, transparent);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-text-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.25rem;
  width: 100%;
  height: 100%;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-text-container .fracgui-controller-text {
  width: 100%;
  max-width: unset;
  height: 1.25rem;
  border: none;
  outline: var(--fracgui-controller_outline);
  font-family: var(--fracgui-controller_font-family);
  font-size: calc(var(--fracgui-font-size) * 0.85);
  font-variation-settings: "wght" 400;
  text-align: center;
  text-align: start;
  padding-left: 0.5rem;
  transition: 0.1s;
  overflow: visible;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-text-container .fracgui-controller-text:hover {
  color: var(--fracgui-controller_color);
  background: var(--fracgui-controller_background);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  gap: 0.75rem;
  width: 100%;
  margin: 0.25rem 0;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container {
  position: relative;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container .copy-button {
  position: absolute;
  top: -5px;
  right: -7px;
  height: 1.15rem;
  padding: 3px;
  background: none !important;
  color: var(--fracgui-fg-d);
  filter: brightness(0.75) contrast(0.8);
  backdrop-filter: none;
  opacity: 0;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container .copy-button svg .back {
  fill: var(--fracgui-fg-d);
  stroke: var(--fracgui-fg-d);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container .copy-button:hover {
  filter: brightness(1) contrast(1);
  backdrop-filter: none;
  color: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container .copy-button:hover svg .back {
  fill: var(--fracgui-fg-a);
  stroke: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-container:hover .copy-button {
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-background {
  width: var(--fracgui-input-section-2_width);
  min-width: var(--fracgui-input-section-2_width);
  height: 1.5rem;
  background-image: linear-gradient(45deg, var(--fracgui-bg-a) 25%, transparent 25%), linear-gradient(-45deg, var(--fracgui-bg-a) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--fracgui-bg-a) 75%), linear-gradient(-45deg, transparent 75%, var(--fracgui-bg-a) 75%);
  background-size: 16px 16px;
  background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
  border-radius: var(--fracgui-radius-sm);
  overflow: hidden;
  cursor: pointer;
  clip-path: xywh(0 12% 100% 72% round var(--fracgui-radius-sm));
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-current-color-display {
  height: 100%;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 0;
  width: var(--fracgui-input-section-3_width);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container {
  position: relative;
  display: flex;
  flex-direction: column;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-canvas {
  display: flex;
  width: 100%;
  height: 3rem;
  border-radius: var(--fracgui-radius);
  cursor: pointer;
  overflow: hidden;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-handle {
  position: absolute;
  top: 0;
  left: 0;
  width: 0.5rem;
  height: 0.5rem;
  translate: -50% -50%;
  border-radius: 50%;
  border: 1px solid var(--fracgui-fg-a);
  box-shadow: 0 0 0.25rem 0rem var(--fracgui-bg-d);
  opacity: 0;
  transition-property: all, opacity;
  transition-delay: 0s, 0s;
  transition-duration: 0.2s, 0.33s;
  transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  pointer-events: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container.expanded .fracgui-input-color-picker-handle {
  opacity: 1;
  transition-delay: 0s, 0.25s;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-hue {
  appearance: none;
  width: 99%;
  border-radius: var(--fracgui-radius-sm);
  background: none;
  height: 0.5rem;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-hue::-webkit-slider-thumb {
  appearance: none;
  width: 0.25rem;
  height: 0.5rem;
  padding: 0;
  background-color: var(--fracgui-input-number-range_color);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-hue::-moz-range-thumb {
  appearance: none;
  width: 0.25rem;
  height: 0.5rem;
  padding: 0;
  background-color: var(--fracgui-input-number-range_color);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-hue::-webkit-slider-runnable-track {
  appearance: none;
  background: linear-gradient(to right, hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%), hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(0, 100%, 50%));
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 1;
  background-color: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-hue::-moz-range-track {
  appearance: none;
  background: linear-gradient(to right, hsl(0, 100%, 50%), hsl(60, 100%, 50%), hsl(120, 100%, 50%), hsl(180, 100%, 50%), hsl(240, 100%, 50%), hsl(300, 100%, 50%), hsl(0, 100%, 50%));
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 1;
  background-color: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-alpha {
  appearance: none;
  width: 99%;
  border-radius: var(--fracgui-radius-sm);
  background-color: transparent;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-alpha::-webkit-slider-thumb {
  appearance: none;
  width: 0.25rem;
  height: 0.5rem;
  padding: 0;
  background-color: var(--fracgui-input-number-range_color);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-alpha::-moz-range-thumb {
  appearance: none;
  width: 0.25rem;
  height: 0.5rem;
  padding: 0;
  background-color: var(--fracgui-input-number-range_color);
  border: none;
  transition: 0.15s;
  cursor: pointer;
  z-index: 10;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-alpha::-webkit-slider-runnable-track {
  appearance: none;
  background: linear-gradient(to right, transparent, currentColor);
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 1;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-picker-container .fracgui-input-color-picker-alpha::-moz-range-track {
  appearance: none;
  background: linear-gradient(to right, transparent, currentColor);
  border-radius: var(--fracgui-radius-sm);
  border: none;
  cursor: pointer;
  z-index: 1;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container {
  display: grid;
  grid-template-columns: 2rem 1fr;
  align-items: center;
  gap: 0.75rem;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-select-container {
  width: 2rem;
  grid-area: 1/1;
  color: var(--fracgui-fg-d);
  font-size: var(--fracgui-font-size);
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-select-container {
  color: var(--fracgui-bg-e);
}

.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-select-container span {
  transition: 0.4s;
  text-shadow: 0 0 0 transparent;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-select-container .fracgui-controller-select-selected {
  font-size: calc(var(--fracgui-font-size) * 0.8);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.a.hovering) .fracgui-input-color-components-select-container span.a {
  color: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.a.dragging) .fracgui-input-color-components-select-container span.a {
  color: var(--fracgui-theme-a);
  text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.b.hovering) .fracgui-input-color-components-select-container span.b {
  color: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.b.dragging) .fracgui-input-color-components-select-container span.b {
  color: var(--fracgui-theme-a);
  text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.c.hovering) .fracgui-input-color-components-select-container span.c {
  color: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.c.dragging) .fracgui-input-color-components-select-container span.c {
  color: var(--fracgui-theme-a);
  text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.d.hovering) .fracgui-input-color-components-select-container span.d {
  color: var(--fracgui-fg-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container:has(input.d.dragging) .fracgui-input-color-components-select-container span.d {
  color: var(--fracgui-theme-a);
  text-shadow: 0 0 0.5rem var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-text {
  max-width: 5rem;
  grid-area: 1/2;
  opacity: 0;
  transform: translateX(-0.5rem);
  pointer-events: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-text.visible {
  opacity: 1;
  transform: translateX(0);
  pointer-events: all;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-numbers-container {
  grid-area: 1/2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.25rem;
  width: 90%;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-numbers-container .fracgui-controller-number {
  height: 1.25rem;
  max-width: unset;
  transition: 0.15s;
  overflow: visible;
  opacity: 0;
  transform: translateX(-0.5rem);
  pointer-events: none;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-color-container .fracgui-input-color-body .fracgui-input-color-components-container .fracgui-input-color-components-numbers-container .fracgui-controller-number.visible {
  opacity: 1;
  transform: translateX(0);
  pointer-events: all;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.5rem;
  width: 100%;
  height: 100%;
  height: var(--fracgui-input_height);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 66%;
  width: calc(var(--fracgui-input-section-1_width) * 0.6);
  margin: 0;
  padding: 0;
  border-radius: var(--fracgui-radius-sm);
  overflow: hidden;
  border: none;
  outline: none;
  transition-duration: 0.25s;
  transition-timing-function: cubic-bezier(0.01, 1.06, 0.8, 1.01);
  box-shadow: -1px 1px 7px 0px hsla(250, 10%, var(--fracgui-shadow-lightness), 0.33) inset, -1px 1px 1px 0px hsla(250, 10%, var(--fracgui-shadow-lightness), 0.5) inset;
  background: var(--fracgui-input-number-range_background);
  background-image: radial-gradient(circle at 25% 50% in lab, var(--fracgui-theme-a) 0%, color-mix(in sRGB, var(--fracgui-theme-a) 50%, transparent) 3%, color-mix(in sRGB, var(--fracgui-theme-a) 20%, transparent) 10%, color-mix(in sRGB, var(--fracgui-theme-a) 15%, transparent) 20%, color-mix(in sRGB, var(--fracgui-theme-a) 10%, transparent) 30%, color-mix(in sRGB, var(--fracgui-theme-a) 10%, transparent) 50%, var(--fracgui-input-number-range_background) 100%);
  opacity: 0.7;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch:hover:not(:disabled), .fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch:focus-visible:not(:disabled) {
  color: var(--fracgui-controller_color);
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch {
  box-shadow: -1px 1px 7px 0px rgba(0, 0, 0, 0.1333333333) inset, -1px 1px 1px 0px rgba(0, 0, 0, 0.1333333333) inset;
  background-image: radial-gradient(circle at 25% 50% in lab, var(--fracgui-theme-a) 3%, color-mix(in sRGB, var(--fracgui-theme-a) 40%, transparent) 3%, color-mix(in sRGB, var(--fracgui-theme-a) 30%, transparent) 10%, color-mix(in sRGB, var(--fracgui-theme-a) 20%, transparent) 20%, color-mix(in sRGB, var(--fracgui-theme-a) 10%, transparent) 30%, color-mix(in sRGB, var(--fracgui-theme-a) 5%, transparent) 50%, var(--fracgui-input-number-range_background) 100%);
}

.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch:hover {
  opacity: 1;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch:after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--fracgui-input-number-range_background);
  box-shadow: -1px 1px 7px 0px rgba(0, 0, 0, 0.8) inset, -1px 1px 1px 0px rgba(0, 0, 0, 0.8) inset;
  opacity: 1;
  transition: 0.33s;
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch:after {
  box-shadow: -1px 1px 7px 0px rgba(0, 0, 0, 0.1333333333) inset, -1px 1px 1px 0px rgba(0, 0, 0, 0.1333333333) inset;
}

.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch.active:after {
  opacity: 0;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch .fracgui-controller-switch-thumb,
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch .fracgui-controller-switch-left,
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch .fracgui-controller-switch-right {
  transition-duration: 0.25s;
  transition-timing-function: cubic-bezier(0.01, 1.06, 0.8, 1.01);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch .fracgui-controller-switch-thumb {
  display: flex;
  position: absolute;
  right: 0.25rem;
  width: 1.5rem;
  min-height: 66%;
  background: var(--fracgui-controller_background);
  border: 1px solid var(--fracgui-input-dim_color);
  border-radius: var(--fracgui-radius-xs);
  box-shadow: 0px 0px rgba(166, 167, 173, 0.4117647059), 1px -1px 0px rgba(0, 0, 0, 0.1333333333) inset;
  box-sizing: border-box;
  overflow: hidden;
  z-index: 2;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch .fracgui-controller-switch-thumb {
  right: calc(100% - 1.5rem - 0.25rem);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch.active .fracgui-controller-switch-thumb {
  right: 10%;
  box-shadow: -2px 0px rgba(0, 0, 0, 0.4117647059), -2px 0px color-mix(in sRGB, var(--fracgui-theme-a) 10%, transparent), 1px -1px 1px rgba(0, 0, 0, 0.1333333333) inset;
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-switch-container .fracgui-controller-switch.active .fracgui-controller-switch-thumb {
  box-shadow: -2px 0px rgba(166, 167, 173, 0.4117647059), 1px -1px 1px rgba(0, 0, 0, 0.1333333333) inset;
}

.fracgui-input-container:has(.fracgui-input-buttongrid-container) {
  height: unset;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-buttongrid-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.2rem 2rem;
  width: 100%;
  padding: 0.25rem 0;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-buttongrid-container .fracgui-controller-buttongrid-row {
  display: flex;
  gap: 0.2rem 2rem;
  width: 100%;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-buttongrid-container .fracgui-controller-buttongrid-button.active {
  background: var(--fracgui-controller_background);
  color: var(--fracgui-controller_color);
  color: var(--fracgui-theme-a);
  font-variation-settings: "wght" 800;
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-buttongrid-container .fracgui-controller-buttongrid-button {
  background: var(--fracgui-controller-dim_background);
  color: var(--fracgui-controller_color);
}
.fracgui-root[mode=light] .fracgui-input-container .fracgui-input-content .fracgui-input-buttongrid-container .fracgui-controller-buttongrid-button.active {
  color: var(--fracgui-theme-a);
  background: var(--fracgui-controller_background);
}

.fracgui-input-container:hover .fracgui-controller-number {
  background: var(--fracgui-controller_background);
}
.fracgui-input-container:hover .fracgui-input-number-container .fracgui-input-number-buttons-container .fracgui-input-number-button svg {
  opacity: 0.75;
}
.fracgui-input-container:hover .fracgui-controller-number {
  color: var(--fracgui-fg-b);
}
.fracgui-input-container:hover input.fracgui-input-number-range::-webkit-slider-thumb {
  background-color: var(--fracgui-bg-d);
  transition: 0.15s;
  opacity: 1;
}
.fracgui-input-container:hover input.fracgui-input-number-range::-webkit-slider-thumb:active {
  background-color: var(--fracgui-theme-a);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container {
  contain: content;
  width: 100%;
  height: 100%;
  font-size: calc(var(--fracgui-font-size) * 0.8);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected {
  line-height: 1.25rem;
  height: 1.25rem;
  box-sizing: content-box;
  background: var(--fracgui-controller-dim_background);
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  filter: unset;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected::before {
  content: "\u276F";
  position: absolute;
  top: 0.1rem;
  right: 0.5rem;
  margin: auto;
  color: var(--fracgui-bg-d);
  transform: rotate(90deg) translateX(0);
  transition-duration: var(--fracgui-transition-duration);
  transition-property: color, transform, border-color;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected.active, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:hover, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:focus-visible, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:active {
  background: var(--fracgui-controller_background);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected.active[contenteditable=true], .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:hover[contenteditable=true], .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:focus-visible[contenteditable=true], .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:active[contenteditable=true] {
  border-color: var(--fracgui-controller-dim_color);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected.active::before, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:hover::before, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:focus-visible::before, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected:active::before {
  color: var(--fracgui-bg-e);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected.active::before {
  color: var(--fracgui-fg-d);
  transform: rotate(90deg) translateX(2px);
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected[contenteditable=true] {
  cursor: text;
}
.fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected[contenteditable=true]:focus-visible, .fracgui-input-container .fracgui-input-content .fracgui-input-select-container .fracgui-controller-select-selected[contenteditable=true]:active {
  border-color: var(--fracgui-theme-a);
}`;var Ot=(n,t,e)=>{let{top:i,bottom:r,left:o,right:s}=t;if(n>0)for(let a=0;a<e.length;a++){let l=e[a].getBoundingClientRect();i>l.bottom||r<l.top||s>l.left||(n=Math.min(n,l.left-s))}else for(let a=0;a<e.length;a++){let l=e[a].getBoundingClientRect();i>l.bottom||r<l.top||o<l.right||(n=Math.max(n,l.right-o))}return n},Ct=(n,t,e)=>{let{top:i,bottom:r,left:o,right:s}=t;if(n>0)for(let a=0;a<e.length;a++){let l=e[a].getBoundingClientRect();o>l.right||s<l.left||r>l.top||(n=Math.min(n,l.top-r))}else for(let a=0;a<e.length;a++){let l=e[a].getBoundingClientRect();o>l.right||s<l.left||i<l.bottom||(n=Math.max(n,l.bottom-i))}return n};function I(n=21){return crypto.getRandomValues(new Uint8Array(n)).reduce((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_","")}var xe=()=>Ve[Math.floor(Math.random()*Ve.length)],Nt=Object.freeze({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}),Ve=Object.keys(Nt);var Ne={reset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",gray:"\x1B[90m",bgBlack:"\x1B[40m",bgRed:"\x1B[41m",bgGreen:"\x1B[42m",bgYellow:"\x1B[43m",bgBlue:"\x1B[44m",bgMagenta:"\x1B[45m",bgCyan:"\x1B[46m",bgWhite:"\x1B[47m",bold:"\x1B[1m",dim:"\x1B[2m",italic:"\x1B[3m",underline:"\x1B[4m"},Gi=n=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},we=n=>t=>{let e=Gi(n);return e?`\x1B[38;2;${e[0]};${e[1]};${e[2]}m${t}\x1B[0m`:t},Y=n=>t=>`${Ne[n]}${t}${Ne.reset}`,J=Y("red"),Ke=Y("green"),Ue=Y("yellow"),Rr=Y("blue"),Ar=Y("magenta"),D=Y("cyan"),_e=Y("gray"),Kt=Y("dim"),U=we("#ff7f50");var Ut=(n,t=0)=>JSON.stringify(n,je([]),t);function je(n){let t=[];return function(e,i){if(typeof i>"u")return;if(typeof i=="function")return"[Function]";let r=n.indexOf(this);r!==-1?(n.length=r+1,t.length=r,t[r]=e):(n.push(this),t.push(e));let o=n.indexOf(i);return o!==-1?"[Circular ~"+t.slice(0,o).join(".")+"]":i instanceof Set?Array.from(i):i instanceof Map?Object.fromEntries(Array.from(i.entries()).map(([s,a])=>{let l=[...n];return[s,JSON.parse(JSON.stringify(a,je(l)))]})):i instanceof Element?`${i.tagName}.${Array.from(i.classList).filter(s=>!s.startsWith("s-")).join(".")}#${i.id}`:(n.length>0&&n.push(i),i)}}var nt=typeof globalThis.requestIdleCallback<"u"?globalThis.requestIdleCallback:typeof globalThis.requestAnimationFrame<"u"?globalThis.requestAnimationFrame:n=>setTimeout(n,0),We=typeof globalThis?.cancelIdleCallback<"u"?globalThis.cancelIdleCallback:typeof globalThis.cancelAnimationFrame<"u"?globalThis.cancelAnimationFrame:globalThis.clearTimeout;function Xe(n,{maxDepth:t=2,maxLength:e=30,maxSiblings:i=4,preserveRootSiblings:r=!1,preserveFunctions:o=!1,preserveNumbers:s=!1}={}){return a(n);function a(l,c=0){let p=new WeakSet;if(l===null)return l;if(typeof l=="object"){if(p.has(l))return"[Circular]";p.add(l)}switch(typeof l){case"boolean":case"symbol":case"undefined":return l;case"function":return o?l:`[Function: ${l.name}]`;case"string":return l.length<e+3?l:l.slice(0,e)+"..";case"number":{let h=s?l.toString():l.toFixed(e);return h.length>e+3?+h.slice(0,e)+"..":+h}case"bigint":return+l.toString().slice(0,e);case"object":{let h=c>t;if(Array.isArray(l))return h?`[ ..${l.length} ]`:l.length<=i||c===0?l.map(w=>a(w,c+1)):[...l.slice(0,i).map(w=>a(w,c)),`..${l.length-i} more`];let m=Object.keys(l).length;return h?`{..${m} ${m===1?"entry":"entries"}}`:m<=i||r&&c===0?Object.fromEntries(Object.entries(l).map(([w,y])=>[w,a(y,c+1)])):Object.fromEntries(Object.entries(l).slice(0,i).concat([["..",`${m-i} more`]]).map(([w,y])=>[w,a(y,c+1)]))}}return l}}var Lt={},Di=!1,f=class n{static _BYPASS_STYLES=!1;static _BYPASS_DEFER=!0;title="";options;color;#t;constructor(t,e){typeof t=="string"?(this.title=t,this.options=e??{}):(this.options=t,this.title=t.title??"");let i=e?.fg?.toLowerCase()??xe(),r=i in Nt?Nt[i]:i;return this.color=r,this.#t=n.createLogger(this.title,this.options),this}get deferred(){return!n._BYPASS_DEFER&&this.options?.deferred}log=(...t)=>{this.#t(...t)};dump=(...t)=>{this.buffer.length?(t[0].match(/|||/)&&this.buffer.unshift(t.shift()),this.consolidateBuffer(),this.#t(...this.buffer,...t)):this.#t(...t),this.buffer=[]};debug(...t){return Lt?.env?.VITE_FRACTILS_LOG_LEVEL==="debug"&&this.dump("\u{1F41E}",...t),this}i=we("#426685")("\u24D8");info(...t){return this.dump(this.i,...t),this}warn(...t){return this.dump(Ue("\u26A0"),...t),this}error(...t){return this.dump(J("\u26D4"),...t),this}fatal(...t){return this.dump(J("\u{1F480}"),...t),this}group(t){let e=this.title+(t?`:${t}`:"");return this.deferred?nt(()=>console.group(e)):console.group(e),this}groupCollapsed(t){let e=this.title+(t?`:${t}`:"");return this.deferred?nt(()=>console.groupCollapsed(e)):console.groupCollapsed(e),this}groupEnd(){return this.deferred?nt(()=>console.groupEnd()):console.groupEnd(),this}buffer=[];consolidateBuffer(){let t=new Map;for(let e of this.buffer)t.set(e,(t.get(e)??0)+1);this.buffer=Array.from(t).map(([e,i])=>i>1?`${e}x${Kt(`${i}`)}`:e)}fn(t,...e){return this.buffer.push(_e(t)+Kt("(")+e.map(i=>_e(typeof i=="object"?Ut(i):i)).join(", ")+Kt(")")),this}static createLogger(t,e){e??={};let i=e.browser??!0,r=e.server??!1;if(!i)return()=>{};if(!!0&&!r)return()=>{};let o=e.fg||xe(),s=e.bg||"transparent",a=e.css??"";e.styled??=!0;let l=e.styled&&!n._BYPASS_STYLES;e.deferred??=!0;let c=e.deferred&&!n._BYPASS_DEFER&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(!Di)return()=>{};let p,h="%c%s%c",[m,...w]=t.split(" "),y=[];if(w.length){for(let O of w)y.push(`color:#666;background:${s};padding:0.1rem;filter:saturate(0.25);${a}`,` ${O}`);let v=y.indexOf(y.at(-1)??"");v>=0&&(y[v]=`${y[v]}
`),h="%c%s".repeat(w.length)+`${h}`,t=m}else t=`${t}
`;let g=l?(...v)=>{let O=h;v.forEach(X=>{switch(typeof X){case"bigint":case"number":O+="%d ";break;case"string":O+="%s ";break;case"object":case"boolean":case"undefined":default:O+="%o "}}),console.log(O+"%c%s",`color:${o};background:${s};padding:0.1rem;${a}`,`${t}`,...y,`color:initial;background:${s};padding:0.1rem;${a}`,...v.map(X=>Lt?.env?.VITEST?Xe(X,{maxDepth:1,maxSiblings:1}):X),`color:#666;background:${s};padding:0.1rem;${a};font-size:0.66rem;`,e?.callsite?`${p}`:"")}:(...v)=>{console.log(`| ${p} |
| ${t} |`,...v)};return c?(...v)=>nt(()=>g(...v)):g}};function M(n,t){if(typeof window>"u")return[];if(n===void 0)return[];let e=Array.isArray(n)?n:[n];return t??=document.documentElement,e.flatMap(i=>{if(!i)return[];if(i instanceof HTMLElement)return[i];if(i instanceof Document)return[document.documentElement];if(typeof i=="string"){if(i==="document"||i==="window")return[document.documentElement];if(i.startsWith("#")){let o=document.getElementById(JSON.stringify(i).slice(1));return o?[o]:(!1,[])}}let r=t.querySelectorAll(i);return r.length===0?(!1,[]):Array.from(r)})}function Vi(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}var Wt=()=>{};function Ni(n,t,e){if(n==null)return t(void 0),e&&e(void 0),Wt;let i=n.subscribe(t,e);return i.unsubscribe?()=>i.unsubscribe():i}var ft=[];function mt(n,t=Wt){let e=null,i=new Set;function r(a){if(Vi(n,a)&&(n=a,e)){let l=!ft.length;for(let c of i)c[1](),ft.push(c,n);if(l){for(let c=0;c<ft.length;c+=2)ft[c][0](ft[c+1]);ft.length=0}}}function o(a){r(a(n))}function s(a,l=Wt){let c=[a,l];return i.add(c),i.size===1&&(e=t(r,o)||Wt),a(n),()=>{i.delete(c),i.size===0&&e&&(e(),e=null)}}return{set:r,update:o,subscribe:s}}function Te(n){let t;return Ni(n,e=>t=e)(),t}var Ye=(n,t,e)=>{let i=t,r=e?.verbose??!1,{set:o,...s}=mt(t,()=>{if(e?.browserOverride||!0){w();let g=v=>{v.key===n&&w()};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}else return()=>{}}),a=JSON.stringify,l=JSON.parse,c=t instanceof Map?"Map":t instanceof Set?"Set":"";["Map","Set"].includes(c)&&(a=g=>JSON.stringify(Array.from(g.entries())),l=g=>{let v=JSON.parse(g);return Array.isArray(v)?t instanceof Map?new Map(v):t instanceof Set?new Set(v):v:(r&&console.error(`Failed to deserialize ${c} from localStorageStore:`,{parsed:v,value:g,initial:t,key:n,options:e}),g)});let h=g=>{i=g,typeof g=="string"&&g.startsWith('"')&&g.endsWith('"')&&(g=l(g)),o(g),m(g),e?.onChange?.(g)},m=g=>{try{g=a(g),localStorage.setItem(n,g)}catch(v){r&&console.error("Failed to set localStorageStore value:",{error:v,key:n,value:g})}};if(e?.defer){let g,v=m;m=O=>{We(g),g=nt(()=>{v(O)})}}if(e?.debounce){let g=setTimeout??(()=>{}),v,O=m;m=X=>{clearTimeout(v),v=g(()=>{O(X)},e.debounce)}}let w=()=>{let g=null;if(g=localStorage.getItem(n)??null,g===null)h(t);else try{let v=l(g);o(v),i=v}catch(v){r&&(console.error("Failed to parse localStorageStore value:",{key:n,localValue:g}),console.error(v))}};return{...s,set:h,update:g=>{h(g(i))}}};function b(n,t){let e=t?.key?Ye(t.key,n,{debounce:t?.debounce,onChange:t?.onChange}):mt(n);function i(r){r&&r(e)}return Array.isArray(n)?i(r=>{r.push=o=>{r.update(s=>[...s,o])}}):n instanceof Map&&i(r=>{r.setKey=(o,s)=>{r.update(a=>(a.set(o,s),a))},r.deleteKey=o=>{r.update(s=>{let a=new Map(s);return a.delete(o),a})}}),i(r=>{n instanceof Set&&(r.add=o=>{r.update(s=>new Set(s).add(o))},r.delete=o=>{r.update(s=>{let a=new Set(s);return a.delete(o),a})})}),{...e,isState:!0,get value(){return Te(e)},set value(r){if(r===void 0)throw new Error("Cannot set state to undefined");e.set(r)},refresh(){e.set(Te(e))}}}function B(n){return n.isState===!0}function ke(n){return B(n)?n.value:n}var _=(n,t,e)=>Math.max(Math.min(n,e),t);var Ee={__type:"ResizableOptions",sides:["right","bottom"],corners:["bottom-right"],grabberSize:6,onResize:()=>{},localStorageKey:void 0,visible:!1,color:"var(--fg-d, #1d1d1d)",opacity:.75,borderRadius:"50%",obstacles:void 0,cursors:!0,classes:{default:"resize-grabber",active:"resize-grabbing"},bounds:"document",disabled:!1},Xt=class{constructor(t,e){this.node=t;this.opts=A([Ee,e],{concatArrays:!1}),this.disabled=this.opts.disabled,this.#s=new f("resizable",{fg:"GreenYellow",deferred:!1}),this.#s.fn("constructor").info({opts:this.opts,this:this}),this.node.classList.add("fractils-resizable"),this.#o=this.opts.grabberSize*3,this.bounds=M(this.opts.bounds)[0]??globalThis.document?.documentElement,this.obstacleEls=M(this.opts.obstacles),this.generateStyles();let{offsetWidth:i,offsetHeight:r}=t;if(this.size=b({width:i,height:r},{key:this.opts.localStorageKey}),this.opts.localStorageKey){let{width:o,height:s}=this.size.value;o===0||s===0?this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight}):((this.opts.corners.length||this.opts.sides.some(a=>a.match(/left|right/)))&&(t.style.width=o+"px"),(this.opts.corners.length||this.opts.sides.some(a=>a.match(/top|bottom/)))&&(t.style.height=s+"px")),t.dispatchEvent(new CustomEvent("resize"))}if(this.createGrabbers(),+this.node.style.minWidth>this.boundsRect.width){console.error("Min width is greater than bounds width.");return}this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight})}static type="Resizable";static initialized=!1;id=I(8);opts;disabled;bounds;obstacleEls;size;#t=null;#e=[];#i=null;#o;#s;get boundsRect(){return this.bounds.getBoundingClientRect()}createGrabbers(){for(let[t,e]of[...this.opts.sides.map(i=>[i,"side"]),...this.opts.corners.map(i=>[i,"corner"])]){let i=document.createElement("div");i.classList.add(`${this.opts.classes.default}-${this.id}`),i.classList.add(`${this.opts.classes.default}-${e}-${this.id}`),i.classList.add(`${this.opts.classes.default}-${t}-${this.id}`),i.dataset.side=t,i.addEventListener("pointerdown",this.onGrab),this.#e.push(()=>i.removeEventListener("pointerdown",this.onGrab)),this.node.appendChild(i)}}clickOffset={x:0,y:0};onGrab=t=>{if(this.disabled)return;this.node.setPointerCapture(t.pointerId),this.#t=t.currentTarget,this.#t.classList.add(this.opts.classes.active),document.body.classList.add(this.opts.classes.active),this.obstacleEls=M(this.opts.obstacles);let e=this.#t.dataset.side;e.match(/top/)&&(this.clickOffset.y=t.clientY-this.rect.top),e.match(/bottom/)&&(this.clickOffset.y=t.clientY-this.rect.bottom),e.match(/left/)&&(this.clickOffset.x=t.clientX-this.rect.left),e.match(/right/)&&(this.clickOffset.x=t.clientX-this.rect.right),t.preventDefault(),t.stopPropagation(),this.#i?.(),document.addEventListener("pointermove",this.onMove),this.#i=()=>document.removeEventListener("pointermove",this.onMove),this.#c(),document.addEventListener("pointerup",this.onUp,{once:!0})};get translateX(){return+this.node.dataset.translateX||0}set translateX(t){this.node.dataset.translateX=String(t)}get translateY(){return+this.node.dataset.translateY||0}set translateY(t){this.node.dataset.translateY=String(t)}get rect(){return this.node.getBoundingClientRect()}#a=0;#l=0;#u=0;#n=0;#r={left:-1/0,top:-1/0,right:1/0,bottom:1/0};#c=()=>{let{minWidth:t,maxWidth:e,paddingLeft:i,paddingRight:r,borderLeftWidth:o,borderRightWidth:s,minHeight:a,maxHeight:l,paddingTop:c,paddingBottom:p,borderTopWidth:h,borderBottomWidth:m}=window.getComputedStyle(this.node),w=parseFloat(i)+parseFloat(r)+parseFloat(o)+parseFloat(s),y=parseFloat(c)+parseFloat(p)+parseFloat(h)+parseFloat(m);this.#a=Math.max((parseFloat(t)||0)+w,25),this.#l=Math.min(parseFloat(e)||1/0),this.#u=Math.max((parseFloat(a)||0)+y,25),this.#n=Math.min(parseFloat(l)||1/0),this.#r=this.bounds.getBoundingClientRect()};resizeX=(t,e)=>{let i;if(e){if(i=t-this.rect.left,i===0)return this;i=Ot(i,this.rect,this.obstacleEls),this.#r&&(i=Math.max(i,this.#r.left-this.rect.left));let r=_(this.rect.width-i,this.#a,this.#l);r===this.#a&&(i=this.rect.width-r),this.translateX+=i,this.node.style.setProperty("translate",`${this.translateX}px ${this.translateY}px`),this.node.style.width=`${r}px`}else{if(i=t-this.rect.right,i===0)return this;i=Ot(i,this.rect,this.obstacleEls),this.#r&&(i=Math.min(i,this.#r.right-this.rect.right));let r=_(this.rect.width+i,this.#a,this.#l);this.node.style.width=`${r}px`}return this};resizeY=(t,e)=>{let i;if(e){if(i=t-this.rect.top,i!=0){i=Ct(i,this.rect,this.obstacleEls),this.#r&&(i=Math.max(i,this.#r.top-this.rect.top));let r=_(this.rect.height-i,this.#u,this.#n);r===this.#u&&(i=this.rect.height-r),this.translateY+=i,this.node.style.setProperty("translate",`${this.translateX}px ${this.translateY}px`),this.node.style.height=`${r}px`}}else if(i=t-this.rect.bottom,i!==0){i=Ct(i,this.rect,this.obstacleEls),this.#r&&(i=Math.min(i,this.#r.bottom-this.rect.bottom));let r=_(this.rect.height+i,this.#u,this.#n);this.node.style.height=`${r}px`}return this};onMove=t=>{if(!this.#t){console.error("No active grabber");return}let e=t.clientX-this.clickOffset.x,i=t.clientY-this.clickOffset.y,{side:r}=this.#t.dataset;switch(this.#s.fn("onMove").debug(r),r){case"top-left":this.resizeY(i,!0).resizeX(e,!0);break;case"top-right":this.resizeY(i,!0).resizeX(e);break;case"bottom-right":this.resizeY(i).resizeX(e);break;case"bottom-left":this.resizeY(i).resizeX(e,!0);break;case"top":this.resizeY(i,!0);break;case"right":this.resizeX(e);break;case"bottom":this.resizeY(i);break;case"left":this.resizeX(e,!0);break}this.node.dispatchEvent(new CustomEvent("resize")),this.size.set({width:this.node.offsetWidth,height:this.node.offsetHeight}),this.opts.onResize({width:this.node.offsetWidth,height:this.node.offsetHeight})};onUp=()=>{this.#i?.(),document.body.classList.remove(this.opts.classes.active),this.#t?.classList.remove(this.opts.classes.active),this.node.dispatchEvent(new CustomEvent("release"))};generateStyles(){this.#s.fn("generateStyles").debug("Generating global styles for",this);let t=`
			.resize-grabber-${this.id} {
				position: absolute;
				display: flex;

				opacity: ${this.opts.visible?this.opts.opacity:0};
				border-radius: ${this.opts.borderRadius};
				border-radius: inherit;

				transition: opacity 0.1s;
			}

			.fractils-resizable:not(.fractils-grabbing) .resize-grabber-${this.id}:hover {
				opacity: ${this.opts.opacity/2};
			}

			.resize-grabber-${this.id}:active {
				opacity: ${this.opts.opacity*.75};
			}
		`;this.opts.cursors&&(t+=`
				.resize-grabbing-${this.id} *, .resize-grabber-${this.id}:active {
					cursor: grabbing !important;
				}
			`);let e=p=>this.opts.cursors?`
				cursor: ${p};`:"",i=this.opts.grabberSize/2,r=`transparent 20%, ${this.opts.color} 33%, ${this.opts.color} 66%, transparent 75%, transparent 100%`,o=98;this.opts.sides.includes("top")&&(t+=`
			.${this.opts.classes.default}-top-${this.id} {
				${e("ns-resize")}
				top: ${-i}px;
				left: ${50-o*.5}%;

				width: ${o}%;
				height: ${this.opts.grabberSize}px;

				background: linear-gradient(to bottom, ${r});
			}
		`),this.opts.sides.includes("right")&&(t+=`
			.${this.opts.classes.default}-right-${this.id} {
				${e("ew-resize")}
				right: ${-i}px;
				top: ${50-o*.5}%;

				width: ${this.opts.grabberSize}px;
				height: ${o}%;

				background: linear-gradient(to left, ${r});
			}
		`),this.opts.sides.includes("bottom")&&(t+=`
			.${this.opts.classes.default}-bottom-${this.id} {
				${e("ns-resize")}
				bottom: ${-i}px;
				left: ${50-o*.5}%;

				width: ${o}%;
				height: ${this.opts.grabberSize}px;

				background: linear-gradient(to top, ${r});
			}
		`),this.opts.sides.includes("left")&&(t+=`
				.${this.opts.classes.default}-left-${this.id} {
					${e("ew-resize")}
					left: ${-i}px;
					top: ${50-o*.5}%;

					width: ${this.opts.grabberSize}px;
					height: ${o}%;

					background: linear-gradient(to right, ${r});
				}
			`),t+=".fractils-grabbing .resize-grabber { cursor: default }";let s=this.#o,a={"top-left":"100% 100%","top-right":"0% 100%","bottom-left":"100% 0%","bottom-right":"0% 0%"},l=(p,h)=>{if(!this.opts.corners.includes(p))return;let m=`${this.opts.classes.default}-${p}-${this.id}`,w=p.replace(this.opts.classes.default,"").split("-");t+=`
				.${m} {${e(h)}
					${w[0]}: 0px;
					${w[1]}: 0px;
					width: ${s}px;
					height: ${s}px;
				}
				.${m}::after {
					content: '';
					width: 100%;
					height: 100%;
					background: radial-gradient(farthest-corner at ${a[p]}, transparent 70%, ${this.opts.color} 86%);
					border-radius: 15%;
				}
			`};l("top-left","nwse-resize"),l("top-right","nesw-resize"),l("bottom-left","nesw-resize"),l("bottom-right","nwse-resize");let c=document.createElement("style");c.innerHTML=t,document.head.appendChild(c)}dispose(){for(let t of this.#e)t();this.#i?.()}};function Je(n){return n!==void 0}function Yt(n){return typeof n=="string"}function qe(n){return n instanceof HTMLElement}var S=class{_unlisteners=new Map;_handlers=new Map;_listenerGroups=new Map;_log=new f("EventManager",{fg:"beige"});constructor(t){t&&this.registerEvents([...t])}registerEvents(t){for(let e of t)this._handlers.set(e,new Map)}on(t,e){if(this._log.fn("on").debug(this),!this._handlers.has(t))return this._log.warn(`Event "${String(t)}" is not registered.`,this),"";this._log.debug("new listener:",{event:t,callback:e});let i=I();return this._handlers.get(t).set(i,e),i}emit(t,...e){this._log.fn("emit").debug({event:t});let i=this._handlers.get(t);if(i)for(let r of i.values())r(...e)}listen=(t,e,i,r,o)=>{let s=I();return t.removeEventListener(e,i,r),t.addEventListener(e,i,r),this._unlisteners.set(s,()=>{t.removeEventListener(e,i,r)}),o&&this.group(o,s),s};add=(t,e)=>{let i=I();return this._unlisteners.set(i,t),e&&this.group(e,i),i};group(t,e){return this._listenerGroups.has(t)||this._listenerGroups.set(t,new Set),this._listenerGroups.get(t).add(e),this}unlisten(t){return this._unlisteners.get(t)?.(),this._unlisteners.delete(t)}clear(){for(let t of this._unlisteners.values())t();return this._unlisteners.clear(),this._listenerGroups.clear(),this.clearHandlers(),this}clearHandlers(){for(let t of this._handlers.values())t.clear();return this._handlers.clear(),this}clearGroup(t){let e=this._listenerGroups.get(t);if(e){for(let i of e){let r=this._unlisteners.get(i);r&&r(),this._unlisteners.delete(i)}this._listenerGroups.delete(t)}return this}dispose(){this.clear(),this.clearHandlers()}};var Se=n=>{if(typeof n!="object")throw new Error("element must be an object");if("computedStyleMap"in n)return n.computedStyleMap();{let t=getComputedStyle(n),e=new Map;for(let i=0;i<t.length;i++){let r=t[i],o=t.getPropertyValue(r);o&&e.set(r,o)}return e}},Jt=(n,t)=>Se(n).get(t);function Ze(n,t=void 0,e=!!1){let i=()=>typeof localStorage>"u"?(e||console.warn(`localStorage is not available for key "${n}"`),!0):!1;return{get(){if(i())return t;let r=localStorage.getItem(n);return r?JSON.parse(r):t},set(r){i()||localStorage.setItem(n,JSON.stringify(r))},get value(){return this.get()},set value(r){this.set(r)}}}function qt(n,t="top-right",e){let{bounds:i,margin:r}=Object.assign({bounds:void 0,margin:10},e),o=typeof n=="string"?M(n)[0]?.getBoundingClientRect():n instanceof Element?n.getBoundingClientRect():n;if(!o)throw new Error("Invalid node: "+n);let s=i==="window"&&typeof window<"u"?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:typeof i=="string"?M(i)[0]?.getBoundingClientRect():i??{x:0,y:0,width:100,height:100};if(!s)throw new Error("Invalid bounds: "+i);let a=typeof r=="number"?{x:r,y:r}:r;if(!("x"in a)||!("y"in a))throw new Error("Invalid margin: "+JSON.stringify(a));switch(t){case"center":case"center-center":return{x:s.width/2-o.width/2,y:s.height/2-o.height/2};case"top-left":case"left-top":return{x:a.x,y:a.y};case"top-center":case"center-top":return{x:s.width/2-o.width/2,y:a.y};case"top-right":case"right-top":return{x:s.width-o.width-a.x,y:a.y};case"bottom-left":case"left-bottom":return{x:a.x,y:s.height-o.height-a.y};case"bottom-center":case"center-bottom":return{x:s.width/2-o.width/2,y:s.height-o.height-a.y};case"bottom-right":case"right-bottom":return{x:s.width-o.width-a.x,y:s.height-o.height-a.y};case"left-center":case"center-left":return{x:a.x,y:s.height/2-o.height/2};case"right-center":case"center-right":return{x:s.width-o.width-a.x,y:s.height/2-o.height/2};default:throw new Error("Invalid placement: "+t)}}var Ki={default:"fractils-draggable",dragging:"fractils-dragging",dragged:"fractils-dragged",cancel:"fractils-cancel"},Mt={__type:"DraggableOptions",bounds:"body",axis:"both",userSelectNone:!0,ignoreMultitouch:!1,disabled:!1,position:{x:0,y:0},placementOptions:{margin:0},cancel:void 0,handle:void 0,obstacles:void 0,classes:Ki,onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{},onCollision:()=>{},transform:void 0,localStorageKey:void 0},Zt=class{constructor(t,e){this.node=t;this.opts=Object.assign({},Mt,e),this.#c=new f("draggable "+Array.from(this.node.classList).join("."),{fg:"SkyBlue"}),this.#l=this.#f(this.opts.bounds),this.opts.position=this.resolvePosition(this.opts.position),this.#c.fn("constructor").debug({opts:this.opts,this:this}),this.positionStore=mt(this.opts.position),this.node.classList.add(this.opts.classes.default);let i=this.opts.position;if(e?.localStorageKey){this._storage=Ze(e.localStorageKey,i);let r=this._storage.get();r&&(i.x=r.x,i.y=r.y)}if(this.x=i.x,this.y=i.y,this.node.style.setProperty("touch-action","none"),this.handleEls=this.opts.handle?M(this.opts.handle,this.node):[this.node],this.cancelEls=M(this.opts.cancel,this.node),this.obstacleEls=M(this.opts.obstacles),this.#n.listen(this.node,"pointerdown",this.dragStart),this.#n.listen(window,"pointerup",this.dragEnd),this.#n.listen(window,"pointermove",this.drag),this.#n.listen(window,"resize",this.resize),this.#n.add(this.positionStore.subscribe(({x:r,y:o})=>{this.node.style.setProperty("translate",`${r}px ${o}px 1px`)})),i!==Mt.position){let{top:r,right:o,bottom:s,left:a}=this.node.getBoundingClientRect();this.rect={top:r,right:o,bottom:s,left:a},this.#l(),this.#d(),this.moveTo(i),this._position={x:this.x,y:this.y}}}static initialized=!1;opts;#t=!1;disabled=!1;clickOffset={x:0,y:0};clientToNodeOffset={x:0,y:0};rect={top:0,right:0,bottom:0,left:0};#e="";boundsEl;handleEls;cancelEls;obstacleEls;bounds={left:-1/0,top:-1/0,right:1/0,bottom:1/0};#i=-1/0;#o=-1/0;#s=1/0;#a=1/0;_storage;_position={x:0,y:0};get position(){return this._position}set position(t){this._position=t,this.moveTo(t),this.updateLocalStorage()}#l;eventTarget;positionStore;#u=new Set;#n=new S;#r=()=>{};#c;get x(){return+this.node.dataset.translateX||0}set x(t){this.node.dataset.translateX=String(t)}get y(){return+this.node.dataset.translateY||0}set y(t){this.node.dataset.translateY=String(t)}get canMoveX(){return/(both|x)/.test(this.opts.axis)}get canMoveY(){return/(both|y)/.test(this.opts.axis)}get eventData(){return{x:this.x,y:this.y,rootNode:this.node,eventTarget:this.eventTarget}}get isControlled(){return!!this.opts.position}dragStart=t=>{if(this.disabled||t.button===2||this.opts.ignoreMultitouch&&!t.isPrimary||t.composedPath().some(l=>l.classList?.contains(this.opts.classes.cancel)))return;if(this.obstacleEls=M(this.opts.obstacles),!1)for(let l of this.obstacleEls)l.dataset.outline=l.style.outline,l.style.outline="2px dotted #f007";if(Yt(this.opts.handle)&&Yt(this.opts.cancel)&&this.opts.handle===this.opts.cancel)throw new Error("`handle` selector can't be same as `cancel` selector");if(this.#g(this.handleEls))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");let e=t.composedPath()[0];if(!this.handleEls.some(l=>l.contains(e)||l.shadowRoot?.contains(e))||this.#g([e]))return;this.#c.fn("dragStart").debug("Dragging initiated."),t.stopPropagation(),this.eventTarget=this.handleEls.length===1?this.node:this.handleEls.find(l=>l.contains(e)),this.#t=!0,this.canMoveX&&(this.clickOffset.x=t.clientX-this.x),this.canMoveY&&(this.clickOffset.y=t.clientY-this.y);let{top:i,right:r,bottom:o,left:s}=this.node.getBoundingClientRect();this.rect={top:i,right:r,bottom:o,left:s},this.bounds&&(this.clientToNodeOffset={x:t.clientX-s,y:t.clientY-i}),this.positionStore.set({x:this.x,y:this.y}),this.#l(),this.#d(),this.node.dispatchEvent(new CustomEvent("grab"));let{cursor:a}=getComputedStyle(this.node);this.node.setPointerCapture(t.pointerId),this.node.style.cursor="grabbing",this.#r=()=>{this.node.style.cursor=a},this.#m(),this.#p()};drag=t=>{if(!this.#t)return;t.preventDefault(),t.stopPropagation(),this.node.classList.add(this.opts.classes.dragging),this.node.classList.add(this.opts.classes.dragged);let e=t.clientX-this.clickOffset.x,i=t.clientY-this.clickOffset.y,r={x:e,y:i};this.moveTo(r),this.#v()};dragEnd=()=>{if(this.#t){if(!1)for(let t of this.obstacleEls)t.style.outline=t.dataset.outline??"none";this.node.classList.remove(this.opts.classes.dragging),this.opts.userSelectNone&&(document.body.style.userSelect=this.#e),this.clickOffset={x:0,y:0},this.clientToNodeOffset={x:0,y:0},this._position={x:this.x,y:this.y},this.#t=!1,this.#r(),this.node.dispatchEvent(new CustomEvent("release")),setTimeout(()=>this.node.classList.remove(this.opts.classes.dragged),0),this.#b(),this.updateLocalStorage()}};resize=()=>{this.#l(),this.#d(),this.moveTo(this.position)};#d=()=>{let t=parseFloat(this.node.style.left)||0;this.#i=-t,this.#s=this.bounds.right-this.bounds.left-(this.rect.right-this.rect.left)-t;let e=parseFloat(this.node.style.top)||0;if(this.#o=-e,this.#a=this.bounds.bottom-this.bounds.top-e-(this.rect.bottom-this.rect.top),this.boundsEl){let i=Se(this.boundsEl);this.#i-=parseFloat(i.get("padding-left")),this.#s-=parseFloat(i.get("padding-right")),this.#o-=parseFloat(i.get("padding-top")),this.#a-=parseFloat(i.get("padding-bottom"))}};moveTo(t){if(this.#c.fn("moveTo").debug("Moving to:",t,this),this.canMoveX){this.bounds&&(t.x=_(t.x,this.#i,this.#s));let e=t.x-this.x;if(e!==0){let i=Ot(e,this.rect,this.obstacleEls);this.rect.left+=i,this.rect.right+=i,this.x+=i}}if(this.canMoveY){this.bounds&&(t.y=_(t.y,this.#o,this.#a));let e=t.y-this.y;if(e!==0){let i=Ct(e,this.rect,this.obstacleEls);this.rect.top+=i,this.rect.bottom+=i,this.y+=i}}if(!this.opts.transform)this.positionStore.set({x:this.x,y:this.y});else{let e=this.opts.transform?.({x:this.x,y:this.y,rootNode:this.node,eventTarget:this.eventTarget});if(e&&"x"in e&&"y"in e){let{x:i,y:r}=e;this.positionStore.set({x:i,y:r})}}this.#p()}update(t=this.position){this.#c.fn("update").debug("Updating position:",t,this),this.moveTo(t)}updateLocalStorage=()=>{this.opts.localStorageKey&&(this.#c.fn("updateLocalStorage").debug("Updating position in localStorage:",`{ x: ${this._position.x}, y: ${this._position.y} }`,this),this._storage&&this._storage.set(this._position))};clearLocalStorage=()=>{this._storage&&this.opts.localStorageKey&&localStorage.removeItem(this.opts.localStorageKey)};#f(t){if(!t)return()=>{};if(t&&typeof t=="object"&&("left"in t||"right"in t||"top"in t||"bottom"in t))return()=>{this.bounds={left:-1/0,right:1/0,top:-1/0,bottom:1/0,...this.opts.bounds}};let e=qe(t)?t:t==="body"?document.body:t==="parent"?this.node.offsetParent:Yt(t)?M(t)[0]:Je(t)?void 0:document.documentElement;if(!e)throw new Error("Invalid bounds option provided: "+t);this.boundsEl=e;let i=new ResizeObserver(()=>{this.resize(),this.#p()});return i.observe(e),this.#u.add(()=>i.disconnect()),this.#p(),()=>this.bounds=e.getBoundingClientRect()}resolvePosition(t){let e=Mt.position;if(!t)return e;if(typeof t=="string")return qt(this.node,t,{bounds:this.boundsEl?.getBoundingClientRect(),...this.opts.placementOptions});if(typeof t=="object"&&("x"in t||"y"in t))return{...e,...t};throw new Error("Invalid position: "+JSON.stringify(t),{cause:{defaultPos:e,pos:t}})}#g=t=>this.cancelEls.some(e=>t.some(i=>e.contains(i)));#h=(t,e)=>{let i=this.eventData;this.node.dispatchEvent(new CustomEvent(t,{detail:i})),e?.(i)};#m=()=>{this.#h("dragstart",this.opts.onDragStart)};#b=()=>{this.#h("dragend",this.opts.onDragEnd)};#v=()=>{this.#h("drag",this.opts.onDrag)};#p=()=>{this.node.dispatchEvent(new CustomEvent("update",{detail:this}))};dispose(){this.#n.dispose()}};function bt(n,t){return typeof n>"u"||n===!0?t:n===!1?!1:typeof n=="object"?A([t,n],{concatArrays:!1}):n}function ot(n){return typeof n=="object"&&n!==null}var Qt={__type:"WindowManagerStorageOptions",key:"window-manager",size:!0,position:!0,debounce:50},te={__type:"WindowManagerOptions",resizable:Ee,draggable:Mt,zFloor:10,preserveZ:!1,bounds:void 0,obstacles:void 0,localStorage:void 0},Pt=class{windows=new Map;opts;_log=new f("WindowManager",{fg:"lightseagreen"});_evm=new S;constructor(t){t??=te,t.__type="WindowManagerOptions",this.opts=Object.freeze(this._resolveOptions(t)),this._log.fn("constructor").info({opts:this.opts,options:t,this:this})}add=(t,e)=>{let i=new Ie(this,t,e);this.windows.set(i.id,i);let r=this._evm.listen(t,"grab",this.select);return{destroy:()=>{i.dispose(),this.windows.delete(i.id),this._evm.unlisten(r)}}};update(){this.windows.forEach(({resizableInstance:t,draggableInstance:e})=>{e&&e.update(),t&&(t.size=t.size)})}applyZ(){let t=0;for(let e of this.windows.values())e.node.style.setProperty("z-index",String(this.opts.zFloor+t++));return this}select=t=>{let e=t.currentTarget,i=this.windows.get(e.id);if(!i)throw new Error("Unable to resolve instance from selected node: "+e.id);if(this.windows.size>1){let r=e.style.getPropertyValue("z-index");e.style.setProperty("z-index",String(this.opts.zFloor+this.windows.size)),e.dataset.keepZ==="true"||this.opts.preserveZ?addEventListener("pointerup",()=>e.style.setProperty("z-index",r),{once:!0}):(this.windows.delete(i.id),this.windows.set(i.id,i),this.applyZ())}return this};_resolveOptions(t,e=te){let i={};return i.zFloor=t?.zFloor??e.zFloor,i.preserveZ=t?.preserveZ??e.preserveZ,i.draggable=bt(t?.draggable,e.draggable),i.resizable=bt(t?.resizable,e.resizable),i.obstacles=t?.obstacles??e.obstacles,i.bounds=t?.bounds??(ot(t?.draggable)?t.draggable.bounds:e.bounds),typeof t?.obstacles>"u"?i.obstacles&&(ot(i.draggable)&&(i.draggable.obstacles=i.obstacles),ot(i.resizable)&&(i.resizable.obstacles=i.obstacles)):ot(i.draggable)&&typeof i.draggable.obstacles>"u"&&(i.draggable.obstacles=t.obstacles),i.bounds&&(i.draggable&&(ot(t?.draggable)&&t?.draggable.bounds&&(i.draggable.bounds=t.draggable.bounds),i.draggable.bounds=i.bounds),i.resizable&&(i.resizable.bounds=i.bounds)),typeof t?.localStorage<"u"&&(t.localStorage===!0?i.localStorage=Qt:typeof t.localStorage=="object"&&(i.localStorage=Object.assign({},Qt,t.localStorage),ot(i.draggable)&&(i.localStorage.position===!1?i.draggable.localStorageKey=void 0:i.draggable.localStorageKey=i.localStorage.key),ot(i.resizable)&&(i.resizable.localStorageKey=i.localStorage.key))),i}dispose(){this._log.fn("dispose").info(this),this._evm?.dispose();for(let t of this.windows.values())t?.dispose();this.windows.clear()}},Ie=class{constructor(t,e,i){this.manager=t;this.node=e;this.id=e.id||i?.id||`wm-instance-${I(8)}`,e.id||=this.id;let r=t._resolveOptions(i,t.opts),o=r.draggable,s=r.resizable;if(i?.localStorage===!1)o&&(o.localStorageKey=void 0),s&&(s.localStorageKey=void 0);else{if(typeof o=="object"&&o.localStorageKey!==void 0){let a=[];typeof o.localStorageKey>"u"?typeof t.opts.localStorage=="object"?a.push(t.opts.localStorage.key):a.push(Qt.key):o.localStorageKey&&a.push(o.localStorageKey),a.push("wm",`${this.manager.windows.size}`,"position"),o.localStorageKey=a.join("::")}if(typeof s=="object"&&s.localStorageKey!==void 0){let a=[];typeof s.localStorageKey>"u"?typeof t.opts.localStorage=="object"?a.push(t.opts.localStorage.key):a.push(Qt.key):s.localStorageKey&&a.push(s.localStorageKey),a.push("wm",`${this.manager.windows.size}`,"size"),s.localStorageKey=a.join("::")}}this.draggableInstance=new Zt(e,o||{disabled:!0}),this.resizableInstance=new Xt(e,s||{disabled:!0}),r?.preserveZ&&(e.dataset.keepZ="true")}draggableInstance;resizableInstance;id;position=b({x:0,y:0});size=b({width:0,height:0});dispose(){this.resizableInstance?.dispose(),this.draggableInstance?.dispose()}};function k(n){if(typeof n!="object"||n===null)throw console.error("Error: Invalid object",n),new Error("`entries()` util called with invalid object: "+n);return Object.entries(n)}function Qe(n){if(typeof n!="object"&&n===null)throw console.error("Error: Invalid object",n),new Error("`keys()` util called with invalid object.");return Object.keys(n)}function ee(n){if(typeof n!="object"&&n===null)throw console.error("Error: Invalid object",n),new Error("`values()` util called with invalid object.");return Object.values(n)}function ie(n,t){let e={};function i(r,o=""){for(let[s,a]of k(r))typeof a=="object"?i(a,`${o?o+"-":""}${s}`):e[`${o?o+"_":""}${s}`]=a}return i(n),e}var Ui="[-\\+]?\\d+%?",ji="[-\\+]?\\d*\\.\\d+%?",st="(?:"+ji+")|(?:"+Ui+")",ti="[\\s|\\(]+("+st+")[,|\\s]+("+st+")[,|\\s]+("+st+")\\s*\\)?",ei="[\\s|\\(]+("+st+")[,|\\s]+("+st+")[,|\\s]+("+st+")[,|\\s]+("+st+")\\s*\\)?",ii=new RegExp("rgb"+ti),ri=new RegExp("rgba"+ei),ni=new RegExp("hsl"+ti),oi=new RegExp("hsla"+ei),re="^(?:#?|0x?)",at="([0-9a-fA-F]{1})",lt="([0-9a-fA-F]{2})",si=new RegExp(re+at+at+at+"$"),ai=new RegExp(re+at+at+at+at+"$"),li=new RegExp(re+lt+lt+lt+"$"),ci=new RegExp(re+lt+lt+lt+lt+"$");function ne(n){let t=n/100,e,i,r;return t<66?(e=255,i=-155.25485562709179-.44596950469579133*(i=t-2)+104.49216199393888*Math.log(i),r=t<20?0:-254.76935184120902+.8274096064007395*(r=t-10)+115.67994401066147*Math.log(r)):(e=351.97690566805693+.114206453784165*(e=t-55)-40.25366309332127*Math.log(e),i=325.4494125711974+.07943456536662342*(i=t-50)-28.0852963507957*Math.log(i),r=255),{r:_(Math.floor(e),0,255),g:_(Math.floor(i),0,255),b:_(Math.floor(r),0,255)}}var Wi=2e3,Xi=4e4;function ui(n){let{r:t,b:e}=n,i=.4,r=Wi,o=Xi,s;for(;o-r>i;){s=(o+r)*.5;let a=ne(s);a.b/a.r>=e/t?o=s:r=s}return s}function pi(n){let t=n.r/255,e=n.g/255,i=n.b/255,r=Math.max(t,e,i),o=Math.min(t,e,i),s=r-o,a=0,l=r,c=r===0?0:s/r;switch(r){case o:a=0;break;case t:a=(e-i)/s+(e<i?6:0);break;case e:a=(i-t)/s+2;break;case i:a=(t-e)/s+4;break}return{h:a*60%360,s:_(c*100,0,100),v:_(l*100,0,100)}}function di(n){let t=n.l*2,e=n.s*(t<=100?t:200-t)/100,i=t+e<1e-9?0:2*e/(t+e);return{h:n.h,s:_(i*100,0,100),v:_((t+e)/2,0,100)}}function hi(n){let t=n.s/100,e=n.v/100,i=(2-t)*e,r=i<=1?i:2-i,o=r<1e-9?0:t*e/r;return{h:n.h,s:_(o*100,0,100),l:_(i*50,0,100)}}function gi(n){let t=n.h/60,e=n.s/100,i=n.v/100,r=Math.floor(t),o=t-r,s=i*(1-e),a=i*(1-o*e),l=i*(1-(1-o)*e),c=r%6,p=[i,a,s,s,l,i][c],h=[l,i,i,a,s,s][c],m=[s,s,l,i,i,a][c];return{r:_(p*255,0,255),g:_(h*255,0,255),b:_(m*255,0,255)}}function fi(n){if(n.length!==2)throw new Error("Invalid hex string: "+n);return parseInt(n,16)}function j(n,t){let e=n.indexOf("%")>-1,i=parseFloat(n);return e?t/100*i:i}function q(n){return n.toString(16).padStart(2,"0")}var Yi={h:0,s:0,v:0,a:1},z=class n{isColor=!0;#t;#e;constructor(t){return this.#t=Yi,t&&this.set(t),this.#e=structuredClone(this.#t),this}set(t){if(typeof t=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(t)?this.hexString=t:/^rgba?/.test(t)?this.rgbString=t:/^hsla?/.test(t)&&(this.hslString=t);else if(typeof t=="object")t instanceof n?this.hsva=t.hsva:"r"in t&&"g"in t&&"b"in t?this.rgb=t:"h"in t&&"s"in t&&"v"in t?this.hsv=t:"h"in t&&"s"in t&&"l"in t?this.hsl=t:"kelvin"in t&&(this.kelvin=t.kelvin);else throw new Error("Invalid color value: "+t)}setChannel(t,e,i){this[t]={...this[t],[e]:i}}reset(){this.hsva=this.#e}clone(){return new n(this)}get hsv(){let{h:t,s:e,v:i}=this.#t;return{h:t,s:e,v:i}}set hsv(t){let i={...this.#t,...t};this.#t.h===i.h&&this.#t.s===i.s&&this.#t.v===i.v&&this.#t.a===i.a||(this.#t={h:Math.round(i.h),s:Math.round(i.s),v:Math.round(i.v),a:i.a})}get hsva(){return structuredClone(this.#t)}set hsva(t){this.hsv=t}get hue(){return this.#t.h}set hue(t){this.hsv={h:t}}get saturation(){return this.#t.s}set saturation(t){this.hsv={s:t}}get value(){return this.#t.v}set value(t){this.hsv={v:t}}get lightness(){return this.hsl.l}set lightness(t){this.hsl={...this.hsl,l:t}}get alpha(){return this.#t.a??1}set alpha(t){this.hsv={...this.hsv,a:t}}get kelvin(){return ui(this.rgb)}set kelvin(t){this.rgb=ne(t)}get red(){return this.rgb.r}set red(t){this.rgb={...this.rgb,r:t}}get r(){return this.rgb.r/255}set r(t){this.red=t*255}get green(){return this.rgb.g}set green(t){this.rgb={...this.rgb,g:t}}get g(){return this.rgb.g/255}set g(t){this.green=t*255}get blue(){return this.rgb.b}set blue(t){this.rgb={...this.rgb,b:t}}get b(){return this.rgb.b/255}set b(t){this.blue=t*255}get rgb(){let{r:t,g:e,b:i}=gi(this.#t);return{r:Math.round(t),g:Math.round(e),b:Math.round(i)}}set rgb(t){this.hsv={...pi(t),a:"a"in t?t.a:1}}get rgbf(){return{r:this.r,g:this.g,b:this.b}}set rgbf(t){this.rgb={r:t.r,g:t.g,b:t.b}}get rgba(){return{...this.rgb,a:this.alpha}}set rgba(t){this.rgb=t}get hsl(){let{h:t,s:e,l:i}=hi(this.#t);return{h:Math.round(t),s:Math.round(e),l:Math.round(i)}}set hsl(t){this.hsv={...di(t),a:"a"in t?t.a:1}}get hsla(){return{...this.hsl,a:this.alpha}}set hsla(t){this.hsl=t}get rgbString(){return`rgb(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b})`}set rgbString(t){let e,i,r,o,s=1;if(e=ii.exec(t))i=j(e[1],255),r=j(e[2],255),o=j(e[3],255);else if(e=ri.exec(t))i=j(e[1],255),r=j(e[2],255),o=j(e[3],255),s=j(e[4],1);else throw new Error("Invalid rgb string: "+t);this.rgb={r:i,g:r,b:o,a:s}}get rgbaString(){let t=this.rgba;return`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}set rgbaString(t){this.rgbString=t}get hex(){return this.hex8String}get hexString(){let t=this.rgb;return`#${q(t.r)}${q(t.g)}${q(t.b)}`}set hexString(t){let e=t.match(si)||t.match(ai)||t.match(li)||t.match(ci);if(!e)throw new Error("Invalid hex string");let[i,r,o,s=255]=e.slice(1).map(a=>fi(a.length===1?`${a}${a}`:a));this.rgb={r:i,g:r,b:o,a:+s/255}}get hex8(){return this.hex8String}get hex8String(){let t=this.rgba;return`#${q(t.r)}${q(t.g)}${q(t.b)}${q(Math.floor((t.a??1)*255))}`}set hex8String(t){this.hexString=t}get hslString(){let t=this.hsl;return`hsl(${t.h}, ${t.s}%, ${t.l}%)`}set hslString(t){let e=ni.exec(t)||oi.exec(t);if(!e)throw new Error("Invalid rgb string: "+t);let[i,r,o,s=1]=e.slice(1).map((a,l)=>j(a,l<3?255:1));this.rgb={r:i,g:r,b:o,a:s}}get hslaString(){let t=this.hsla;return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`}set hslaString(t){this.hslString=t}toString(){return this.hex8String}toJSON(){return{isColor:!0,...this.rgba,hex:this.hex8String}}};function Z(n){return!!n.isColor}function oe(n){return typeof Rt(n)<"u"}function Rt(n){if(typeof n=="string"){if(n.match(/^#?[0-9a-fA-F]{6}$/))return"HexString";if(n.match(/^#?[0-9a-fA-F]{8}$/))return"Hex8String";if(n.match(/^rgba?/))return"RgbaString";if(n.match(/^hsla?/))return"HslaString"}else if(typeof n=="object"){if(n instanceof z)return"Color";if("r"in n&&"g"in n&&"b"in n)return"RgbColor";if("h"in n&&"s"in n&&"v"in n)return"HsvColor";if("h"in n&&"s"in n&&"l"in n)return"HslColor";if("kelvin"in n)return"number"}}function se(n,t){return typeof n!="object"||n===null||["object","function"].includes(t)?typeof n===t:"__type"in n&&n.__type===t}function T(n){return typeof n=="function"?n:()=>n}var ae={__type:"TooltipOptions",text:"",placement:"top",anchor:"node",delay:250,delayOut:0,offsetX:"0%",offsetY:"0%",animation:{duration:300,durationOut:150,easing:"cubic-bezier(0.23, 1, 0.320, 1)"},style:void 0,hideOnClick:!1},R=class{constructor(t,e){this.node=t;let i=A([ae,e]);if(this.opts=i,this.placement=i.placement,this._text=T(i.text),this.parent=e?.parent??document.getElementById("svelte")??document.body,this.element=u("div",{classes:["fractils-tooltip"],innerHTML:String(this._text()),style:e?.style}),i.style)for(let[r,o]of k(i.style))r&&o&&this.element?.style.setProperty(r,o);this._evm.listen(t,"pointerenter",this.show),this._evm.listen(t,"pointerleave",this.hide),this._evm.listen(t,"pointermove",this._updatePosition),this._evm.listen(t,"click",()=>{i.hideOnClick?this.hide():this.refresh()})}__type="Tooltip";element;parent;showing=!1;opts;_text;_evm=new S;_animPositions;_delayInTimer;_delayOutTimer;refresh(){this.element&&(this.element.innerHTML=String(this.text),setTimeout(()=>this._updatePosition(),0),this._maybeWatchAnchor(),clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer))}get text(){return this._text()}set text(t){this._text=T(t),this.element&&(this.element.innerHTML=String(this._text()))}get placement(){return this.opts.placement}set placement(t){switch(this.opts.placement=t,t){case"top":this._animPositions={from:"translateY(4px)",to:"translateY(0)"};break;case"bottom":this._animPositions={from:"translateY(-4px)",to:"translateY(0)"};break;case"left":this._animPositions={from:"translateX(4px)",to:"translateX(0)"};break;case"right":this._animPositions={from:"translateX(-4px)",to:"translateX(0)"}}}get offsetX(){return this.opts.offsetX}set offsetX(t){this.opts.offsetX=t,this._updatePosition()}get offsetY(){return this.opts.offsetY}set offsetY(t){this.opts.offsetY=t,this._updatePosition()}show=()=>{this.showing||this.text&&(clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer),this._delayInTimer=setTimeout(async()=>{this.element&&this.parent?.appendChild(this.element),this.showing=!0,this.element?.animate([{opacity:"0",transform:this._animPositions.from},{opacity:"1",transform:this._animPositions.to}],{duration:this.opts.animation.duration,easing:this.opts.animation.easing,fill:"forwards"}),this._updatePosition(),this._maybeWatchAnchor()},this.opts.delay))};hide=()=>{clearTimeout(this._delayInTimer),clearTimeout(this._delayOutTimer),this._delayOutTimer=setTimeout(async()=>{this.showing&&(this.showing=!1,this._watcherId&&this._evm.unlisten(this._watcherId),await this.element?.animate([{opacity:"1",transform:this._animPositions.to},{opacity:"0",transform:this._animPositions.from}],{duration:this.opts.animation.durationOut,easing:this.opts.animation.easing,fill:"forwards"}).finished,this.unmount())},this.opts.delayOut)};_mounted=!1;mount(){this._mounted||(this._mounted=!0,this.element&&this.parent?.appendChild(this.element))}unmount(){this._mounted&&(this._mounted=!1,this.element&&this.parent?.removeChild(this.element))}_updatePosition=t=>{if(!this.element)return;let e=this.element.getBoundingClientRect();this.element.innerHTML!==this.text&&(this.element.innerHTML=String(this.text)),t?.type==="pointermove"&&(this._mouse={x:t.clientX,y:t.clientY});let i=this._getAnchorRects();if(!i)return;let r=0,o=0,s=4;switch(this.element.classList.add("fractils-tooltip-"+this.placement),this.placement){case"top":r=i.x.left+window.scrollX+i.x.width/2-e.width/2,o=i.y.top+window.scrollY-e.height-s;break;case"bottom":r=i.x.left+window.scrollX+i.x.width/2-e.width/2,o=i.y.top+window.scrollY+i.y.height+s;break;case"left":r=i.x.left+window.scrollX-e.width-s,o=i.y.top+window.scrollY+i.y.height/2-e.height/2;break;case"right":r=i.x.left+window.scrollX+i.x.width+s,o=i.y.top+window.scrollY+i.y.height/2-e.height/2;break}let a=this.parent?.getBoundingClientRect();a&&(this.element.style.left=`calc(${r-a.left}px + ${this.opts.offsetX})`,this.element.style.top=`calc(${o-a.top}px + ${this.opts.offsetY})`)};_mouse={x:0,y:0};_getAnchorRects(){let t=i=>{if(!i)return this.node?.getBoundingClientRect();switch(typeof i){case"string":switch(i){case"node":return this.node?.getBoundingClientRect();case"mouse":return{left:this._mouse.x+window.scrollX,top:this._mouse.y+window.scrollY,width:0,height:0};default:{let r=document.querySelector(i);return r?r.getBoundingClientRect():(!1,this.node?.getBoundingClientRect())}}case"object":return i&&"x"in i&&"y"in i?"separate":i instanceof HTMLElement?i.getBoundingClientRect():(!1,this.node?.getBoundingClientRect());default:return!1,this.node?.getBoundingClientRect()}},e=t(this.opts.anchor);if(e==="separate"){let i=t(this.opts.anchor.x),r=t(this.opts.anchor.y);return!i||!r?void 0:{x:i,y:r}}if(e)return{x:e,y:e}}_watcherId;_maybeWatchAnchor(){let t=i=>{if(!i)return;let r=i instanceof HTMLElement?i:this.node?.querySelector(i)??document.querySelector(i),o=()=>{r&&this._watch(r)};r&&(this._watcherId&&this._evm.unlisten(this._watcherId),this._watcherId=this._evm.listen(r,"transitionrun",o,{},"anchor"))},e=i=>i instanceof HTMLElement?i:typeof i=="string"?i==="node"?this.node:i==="mouse"?null:i:null;if(this.opts.anchor&&typeof this.opts.anchor=="object"&&"x"in this.opts.anchor&&"y"in this.opts.anchor){let i=e(this.opts.anchor.x),r=e(this.opts.anchor.y);i===r?t(i):(t(i),t(r))}else t(e(this.opts.anchor))}_watchingAnchor=!1;_watchingFinished=!1;_watchTimeout=void 0;_watch(t){if(this._watchingAnchor)return;this._watchingFinished=!1,this._watchingAnchor=!0;let e=()=>{this._watchingFinished=!0,this._watchingAnchor=!1,this.element?.style.setProperty("transition-duration","0.1s"),i&&t.removeEventListener("transitionend",i)},i=()=>{this._watchingFinished||e()};if(!this.showing){e();return}clearTimeout(this._watchTimeout),this._watchTimeout=setTimeout(()=>{this._watchingFinished||e()},500),t.removeEventListener("transitionend",i),t.addEventListener("transitionend",i),this._watchingFinished||(this.node?.style.setProperty("transition-duration","0s"),mi(()=>this._watchingFinished?!0:(this._updatePosition(),!1)))}dispose(){this._watchTimeout&&clearTimeout(this._watchTimeout),this._evm.dispose(),this.element?.remove()}};x(R,"style",`
		.fractils-tooltip {
			position: absolute;

			min-width: 3rem;
			max-width: auto;
			min-height: auto;
			max-height: auto;
			padding: 4px 8px;

			opacity: 0;
			color: var(--fg-a, #fff);
			background-color: var(--bg-a, #000);
			border-radius: var(--radius-sm, 4px);
			box-shadow: var(--shadow, 0rem 0.0313rem 0.0469rem hsl(var(--shadow-color) / 0.02),
				0rem 0.125rem 0.0938rem hsl(var(--shadow-color) / 0.02),
				0rem 0.1563rem 0.125rem hsl(var(--shadow-color) / 0.025),
				0rem 0.1875rem 0.1875rem hsl(var(--shadow-color) / 0.05),
				0rem 0.3125rem 0.3125rem hsl(var(--shadow-color) / 0.05),
				0rem 0.4375rem 0.625rem hsl(var(--shadow-color) / 0.075));

			text-align: center;
			font-size: var(--font-size-sm, 12px);

			z-index: 1000;
			pointer-events: none;
			transition: opacity 0.1s;
		}

		.fractils-tooltip .fractils-hotkey {
			filter: contrast(1.1);
			background: var(--fractils-hotkey_background, #1118);
			background: var(--fractils-hotkey_background, color-mix(in sRGB, var(--bg-c) 66%, transparent));
			color: var(--fractils-hotkey_color, var(--fg-a, #fff));
			padding: 0px 3px;
			border-radius: 2px;
			box-shadow: 0 0 2px rgba(0, 0, 0, 0.33);
		}

		:root[theme='dark'] .fractils-tooltip .fractils-hotkey {
			background: var(--fractils-hotkey_background, color-mix(in sRGB, var(--bg-d) 100%, transparent));
		}
	`),R=C([V],R);var Oe=(n,t)=>{let e=new R(n,t);return{update(i){Object.assign(e.opts,i),e.refresh()},destroy(){e.dispose()}}};function mi(n){requestAnimationFrame(()=>{n()||mi(n)})}function u(n,t){let e=globalThis?.document?.createElement(n);if(t){if(t.classes&&e.classList.add(...t.classes),t.id&&(e.id=t.id),t.innerHTML&&(e.innerHTML=t.innerHTML),t.textContent&&(e.textContent=t.textContent),t.innerText&&(e.innerText=t.innerText),t.cssText&&(e.style.cssText=t.cssText),t.dataset&&Object.assign(e.dataset,t.dataset),t.value&&e instanceof HTMLInputElement&&(e.value=t.value),t.type&&e.setAttribute("type",t.type),t.min&&e.setAttribute("min",String(t.min)),t.max&&e.setAttribute("max",String(t.max)),t.step&&e.setAttribute("step",String(t.step)),t.attributes)for(let[i,r]of k(t.attributes))e.setAttribute(i,r);if(t.style)for(let[i,r]of k(t.style))e.style[i]=String(r);if(t.variables)for(let[i,r]of k(t.variables))e.style.setProperty(i,String(r));if(t.parent&&t.parent.appendChild(e),t.tooltip&&(e.tooltip={},t.tooltipInstance?e.tooltip=t.tooltipInstance:e.tooltip=new R(e,t.tooltip)),t.children)for(let i of t.children??[]){if(e===null)throw new Error("This should never happen");i&&e.appendChild(i)}t.onclick&&e.addEventListener("click",t.onclick)}if(!1){let i=new Error().stack;Ji(i,e)}return e}function Ji(n,t){let e=Zi(n);e&&t.addEventListener("contextmenu",i=>{i.metaKey&&i.altKey&&(i.preventDefault(),i.stopPropagation(),console.log(i.target),qi(e))},{capture:!1})}function qi(n){let t="/__open-in-editor?file="+n;fetch(t).then(e=>{console.log(e.status,t)}).catch(e=>{console.error("Failed to open file in editor:",e)})}function Zi(n){let t=n?.split(`
`)[2].trim(),e=/http:\/\/[^ )]+/,i=/\?t=\d+/,r=t?.match(e)?.[0]?.replace(i,"");if(r)try{return new URL(r).pathname.slice(1)}catch(o){console.error("Failed to parse file from stack:",o)}return null}function V(n){return class extends n{static initialized=!1;static stylesheet;constructor(...t){if(super(...t),typeof globalThis.document<"u"){let e=this.constructor;if(!e.style||e.initialized)return;e.initialized=!0,e.stylesheet??=u("style",{parent:document.head,innerHTML:e.style})}else throw new Error("@styled components can only be used in the browser")}}}var ct=class{class="fracgui-icon-rename";element;classes=[this.class,"fracgui-icon"];constructor(){this.element=u("div",{classes:this.classes,innerHTML:`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" >
                    <path class="cursor top" fill="none" stroke="currentColor" d="M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1" vector-effect="non-scaling-stroke"></path>
                    <path class="cursor bottom"fill="none" stroke="currentColor" d="M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5" vector-effect="non-scaling-stroke"></path>
                    <rect class="box full" fill="currentColor" stroke="none" x="1" y="8" width="18" height="8" rx="2" vector-effect="non-scaling-stroke"></rect>
                    <path class="cursor middle"fill="none" stroke="currentColor" d="M9 7v10" vector-effect="non-scaling-stroke"></path>
                </svg>
            `.replaceAll(/\t|\n/g,"")})}};x(ct,"style",`
        .fracgui-icon-rename {
            width: 1.5rem;
            height: 1.5rem;

            margin-right: 0.5rem;
            padding: 0.125rem;

            color: var(--fracgui-controller-dim_color);
            opacity: 0.5;

            transition: opacity 0.15s;

            z-index: 1;
            cursor: pointer;

            pointer-events: all;
        }

        .fracgui-icon-rename:hover {
            opacity: 1;
        }

        .fracgui-icon-rename svg {
            width: 100%;
            height: 100%;

            pointer-events: none;
        }

        .fracgui-icon-rename path {
            color: var(--fracgui-controller-dim_color);
            /* stroke: var(--fracgui-controller-dim_color); */
        }
        .fracgui-icon-rename .cursor {
            transform: translate(2px, 0) scale(1, 0.9);

            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-delay: 0s;
            transition-property: opacity, transform;
            transform-origin: center;
        }
        .fracgui-icon-rename:hover .cursor, .fracgui-icon-rename.active .cursor {
            transform: translate(0, 0);
            transform: translate(0, 0) scale(1, 0.9);
        }
        .fracgui-icon-rename.active .cursor {
            color: var(--fracgui-theme-a);
            animation: blink 1.5s infinite;
            animation-delay: 0.5s;
        }

        @keyframes blink {
            0%, 45%, 80% {
                opacity: 1;
            }
            50%, 75% {
                opacity: 0;
            }
        }

        .fracgui-icon-rename .box {
            color: var(--fracgui-folder-dim_color);

            opacity: 0;
            transform: scale(0);

            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: opacity, transform;
            transform-origin: center;
        }
        .fracgui-icon-rename:hover .box, .fracgui-icon-rename.active .box {
            opacity: 0.25;
            transform: scale(1.1);
            color: var(--fracgui-controller_color);
        }
        .fracgui-icon-rename:hover .box {
            transform: scale(1);
        }
        
        .fracgui-icon-rename.disabled {
            opacity: 0;
            pointer-events: none;
            cursor: default;
        }
    `),ct=C([V],ct);var ut=class{element;constructor(){this.element=u("div",{classes:["fracgui-icon-save","fracgui-icon"],innerHTML:`
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <g class="Frame">
                        <path class="back-group" fill="currentColor" fill-rule="evenodd" d="M6.127 21A3.496 3.496 0 0 0 9 22.5h10a3.5 3.5 0 0 0 3.5-3.5V9c0-1.19-.593-2.24-1.5-2.873V7.5c.314.418.5.937.5 1.5v10a2.5 2.5 0 0 1-2.5 2.5H9a2.489 2.489 0 0 1-1.5-.5H6.127Z" class="Subtract" clip-rule="evenodd"/>
                        <rect width="16" height="16" x="3" y="3" fill="currentColor" stroke-width="1.5" class="front" rx="2"/>
                        <g class="plus">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M11 8v7" class="vertical"/>
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M14.5 11.5h-7" class="horizontal"/>
                        </g>
                    </g>
                </svg>
            `.replaceAll(/\t|\n/g,"")})}};x(ut,"style",`
        .fracgui-icon-save {
            width: 1.5rem;
            height: 1.5rem;

            color: var(--fracgui-controller-dim_color);
            margin-right: 0.25rem;
            opacity: 0.5;

            transition: opacity 0.15s;

            z-index: 1;
            cursor: pointer;
        }

        .fracgui-icon-save:hover {
            opacity: 1;
        }

        .fracgui-icon-save .back-group {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: opacity, transform;
            transition-delay: 0s;
            
            opacity: 0;
            transform: translate(-0.25rem, -0.25rem);
        }
        .fracgui-icon-save:hover .back-group {
            opacity: 1;
            transition-delay: 0.25s;
            transform: translate(0, 0);
        }

        .fracgui-icon-save .plus {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: color, transform;
            transform-origin: center;

            transform: scale(1.5);
        }
        .fracgui-icon-save:hover .plus {
            transform: scale(1);
            color: var(--fracgui-bg-a);
        }

        .fracgui-icon-save .front {
            transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transition-property: transform, opacity;

            transform: scale(1.25);
            opacity: 0;
        }
        .fracgui-icon-save:hover .front {
            transform: scale(1);
            opacity: 1;
        }

        .fracgui-icon-save svg {
            width: 100%;
            height: 100%;
        }
    `),ut=C([V],ut);var le=class{constructor(t,e,i){this.gui=t;this.parentFolder=e;this._log=new f(`PresetManager ${t.folder.title}`,{fg:"slateblue"}),this._log.fn("constructor").debug({options:i,this:this}),this.opts=i,this.opts.localStorageKey??="fracgui::presets",this.activePreset=b(this.opts.defaultPreset??{},{key:this.opts.localStorageKey+"::active"}),this.presets=b(this.opts.presets??[],{key:this.opts.localStorageKey}),this.opts.autoInit!==!1&&this.init(),Object.keys(this.activePreset.value).length&&this.activePreset.value.id!==this._defaultPresetId&&Promise.resolve().then(()=>{console.log("loading active preset",this.activePreset.value),this.gui.load(this.activePreset.value),this.gui._undoManager.clear()})}__type=Object.freeze("PresetManager");__version=Object.freeze("1.0.0");defaultPreset;activePreset;presets;folder;_defaultPresetId="fracgui-default-preset";_defaultPresetTitle="default";_presetSnapshot;_presetsInput;_manageInput;_renamePresetButton;_initialized=!1;_log;opts;get defaultPresetIsActive(){return this.activePreset.value.id===this._defaultPresetId}async init(){if(this.opts.disabled){this._log.debug("Aborting initialization: disabled by options.");return}return this._initialized=!0,this.folder=await this.addGui(this.parentFolder,this.opts.defaultPreset),this}set(t){this._log.fn("set").debug({value:t,this:this}),this.activePreset.set(t)}_renamePreset(t){if(this._log.fn("_renamePreset").debug({this:this,title:t}),!this._isInitialized())throw new Error("PresetManager not initialized.");let e=this.activePreset.value;this.presets.update(i=>{if(!e)throw new Error("No preset found.");if(e.id===this._defaultPresetId)throw new Error("Cannot rename default preset.");return e.title=t,this.activePreset.set(e),i.map(r=>r.id===e.id?e:r)}),this._refresh()}_resolveUnusedTitle(t){if(this._log.fn("resolveUnusedTitle").debug({this:this,title:t}),!this._isInitialized())throw new Error("PresetManager not initialized.");let e=this.presets.value,i=0,r=t;for(;e.some(o=>o.title===r);)i++,r=t+` (${i})`;return r}_resolveDefaultPreset(t){if(!this._isInitialized())throw new Error("PresetManager not initialized.");return t??=this.presets.value.find(e=>e.id===this._defaultPresetId),t||(t=this.gui.save(this._defaultPresetTitle,this._defaultPresetId),this.presets.push(t)),t}async addGui(t,e){if(this._log.fn("add").debug({this:this,parentFolder:t,defaultPreset:e}),!this._isInitialized())throw new Error("PresetManager not initialized.");await new Promise(l=>setTimeout(l,0));let i=t.addFolder("presets",{closed:!1,hidden:!1,children:[]});if(i.on("mount",()=>{i.graphics?.connector?.svg.style.setProperty("filter","saturate(0.1)"),i.graphics?.icon.style.setProperty("filter","saturate(0)")}),this.defaultPreset=e??this._resolveDefaultPreset(),Object.keys(this.activePreset.value).length||this.activePreset.set(this.defaultPreset),!this.activePreset.value)throw new Error("No active preset.");if(!this.activePreset.value.id)throw new Error("No active preset id.");let r=l=>{let c=Array.isArray(l)?this.gui.folder.title+" presets":l.title,p=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),h=URL.createObjectURL(p),m=document.createElement("a");m.href=h,m.download=`${c}.json`,m.click(),URL.revokeObjectURL(h)},o=()=>{let l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=async c=>{let p=c.target.files?.[0];if(!p)return;let h=new FileReader;h.onload=async m=>{let w=m.target?.result,y=JSON.parse(w);if(Array.isArray(y))for(let g of y)se(g,"GuiPreset")?this.put(g):console.warn("Invalid preset:",g);else se(y,"GuiPreset")?this.put(y):console.warn("Invalid preset:",y);this._refresh()},h.readAsText(p)},l.click()},s=(l,c)=>`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="fracgui-icon fracgui-icon-${l}">${c}</svg>`;this._manageInput=i.addButtonGrid({value:[[{text:"update",id:"update",onClick:()=>{let{id:l,title:c}=this.activePreset.value,p=this.gui.save(c,l);this.put(p)},disabled:()=>this.defaultPresetIsActive},{text:"delete",onClick:()=>{let l;this.presets.update(c=>(l=c.findIndex(p=>p.id===this.activePreset.value.id),c.splice(l,1),c)),this.activePreset.set(this.presets.value[l??0]??this.defaultPreset),this._refresh()},disabled:()=>this.defaultPresetIsActive},{text:s("copy",'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>'),id:"copy",tooltip:{text:"Copy",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{navigator.clipboard?.writeText(JSON.stringify(this.activePreset.value,null,2))},disabled:()=>this.defaultPresetIsActive},{text:s("paste",'<rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>'),id:"paste",tooltip:{text:"Paste",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:async({button:l})=>{l.disabled=!0;try{let c=await navigator.clipboard.readText();if(console.log(c),c){let p=JSON.parse(c);typeof p=="object"&&p.__type==="GuiPreset"&&this.put(p)}}catch(c){console.error(c)}l.disabled=!1},disabled:()=>this.defaultPresetIsActive},{text:s("download",'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line></svg>'),id:"download",tooltip:{text:"Download",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{r(this.activePreset.value)},disabled:()=>this.defaultPresetIsActive},{text:s("download-all",'<path stroke-linecap="round" stroke-linejoin="round" d="M21 14v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 11v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 17v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="m7 8 5 5 5-5" /><path  stroke-linecap="round" stroke-linejoin="round" d="M12 13V1" />'),id:"download-all",tooltip:{text:"Download All",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{r(this.presets.value)},disabled:()=>this.presets.value.length<=1},{id:"upload",text:s("upload",'<path stroke-linecap="round" stroke-linejoin="round" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><path stroke-linecap="round" stroke-linejoin="round" d="m17 8-5-5-5 5" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v12" />'),tooltip:{text:"Upload",delay:0,placement:"bottom",hideOnClick:!0},style:{maxWidth:"1.5rem",padding:"0.3rem"},onClick:()=>{o()}}]],order:1,resettable:!1,disabled:()=>this.defaultPresetIsActive&&this.presets.value.length===1}),this._presetsInput=i.addSelect({__type:"SelectInputOptions",options:this.presets.value,labelKey:"title",order:-1,value:this.activePreset.value,resettable:!1,disabled:()=>this.defaultPresetIsActive&&this.presets.value.length===1}),this._presetsInput.on("change",({value:l})=>{this._log.fn("_presetsInput.on(change)").debug({value:l,this:this}),this.gui.load(l),this.activePreset.set(l),this._refreshInputs()}),this._presetsInput.on("open",()=>{this._log.fn("_presetsInput.on(open)").debug(),this._presetSnapshot=this.gui.save("__snapshot__")}),this._presetsInput.on("cancel",()=>{this._log.fn("_presetsInput.on(cancel)").debug(),this._presetSnapshot&&(this.gui.load(this._presetSnapshot),this._refreshInputs())});let a=new ut;return a.element.tooltip=new R(a.element,{text:"Save",delay:0,placement:"bottom",hideOnClick:!0}),this._presetsInput.listen(a.element,"click",()=>{this._log.fn("newPresetButton.on(click)").debug(),this.put()}),this._renamePresetButton=new ct,this._renamePresetButton.element.tooltip=new R(this._renamePresetButton.element,{delay:0,placement:"bottom",hideOnClick:!0,text:()=>this._renamePresetButton.element.classList.contains("active")?"":this.defaultPresetIsActive?"Can't rename default preset":"Rename"}),this._presetsInput.listen(this._renamePresetButton.element,"click",this._toggleRename),this._presetsInput.elements.content.prepend(this._renamePresetButton.element),this._presetsInput.elements.content.prepend(a.element),this._refreshInputs(),i}put(t){if(this._log.fn("saveNewPreset"),!this._isInitialized())throw new Error("PresetManager not initialized.");if(!this._presetsInput)throw new Error("No select input.");t??=this.gui.save(this._resolveUnusedTitle("preset"),I());let e=this.presets.value.find(i=>i.id===t.id);e?(this._log.debug("preset exists. replacing with:",{preset:t,existing:e}),this.presets.update(i=>{let r=i.findIndex(o=>o.id===t.id);return i[r]=t,i})):(this._log.debug("pushing preset:",{preset:t,existing:e}),this.presets.push(t)),this.set(t),this._refresh(),this._enableRename()}delete(t){if(this._log.fn("deletePreset").debug({this:this,preset:t}),!this._isInitialized())throw new Error("PresetManager not initialized.");let e=typeof t=="string"?t:t.id;this.presets.update(i=>{let r=i.findIndex(o=>o.id===e);if(r===-1)throw new Error(J("Error deleting preset:")+" Preset not found.");return i.splice(r,1),i}),this.activePreset.set(this.presets.value[0]??this.defaultPreset)}_isInitialized(){return this._initialized}_toggleRename=()=>{this._presetsInput.select.elements.selected.getAttribute("contenteditable")?this._handleRename():this._enableRename()};_blurLatch=!1;_blurLatchTimer;_enableRename=(t=!0)=>{this._log.fn("_enableRename").debug({this:this});let e=this._presetsInput.select.elements.selected;if(e.classList.contains("disabled")){this._log.warn("Cannot rename default preset.");return}if(this._blurLatch){this._blurLatch=!1,clearTimeout(this._blurLatchTimer);return}this._renamePresetButton.element.classList.add("active"),this._presetsInput.select.disableClicks=!0,e.setAttribute("contenteditable","true"),e.focus();let i=document.createRange();i.selectNodeContents(e),t&&i.collapse(!1);let r=window.getSelection();r?.removeAllRanges(),r?.addRange(i),this.folder.evm.listen(e,"blur",this._handleRename,{},"preset-manager-rename"),this.folder.evm.listen(window,"keydown",this._handleKeydown,{},"preset-manager-rename")};_handleRename=t=>{if(this._log.fn("_disableRename").debug({e:t,this:this}),this._presetsInput.select.disableClicks=!1,this._presetsInput.select.elements.selected.removeAttribute("contenteditable"),this._renamePresetButton.element.classList.remove("active"),this.folder.evm.clearGroup("preset-manager-rename"),t?.type==="blur"){this._blurLatch=!0,clearTimeout(this._blurLatchTimer),setTimeout(()=>{this._blurLatch=!1},300);let e=t.target?.textContent??"";e!==this.activePreset.value.title&&this._renamePreset(e)}};_handleKeydown=t=>{this._log.fn("_handleKeydown").debug({key:t.key,e:t,this:this}),t.key==="Enter"&&(t.preventDefault(),this._handleRename()),t.key==="Escape"&&this._handleRename()};_refreshInputs(){let t=this.defaultPresetIsActive;this._renamePresetButton.element.classList.toggle("disabled",t),this._renamePresetButton.element.toggleAttribute("disabled",t),this._manageInput.refresh(),this._log.fn("_refreshInputs").debug({disableRename:t,this:this})}_refresh(){this._log.fn("_refresh").debug("Refreshing options and setting input.",{this:this}),this._presetsInput.options=this.presets.value.map(e=>({label:e.title,value:e}));let t=this.activePreset.value;this._presetsInput.set({label:t.title,value:t}),this._refreshInputs()}dispose(){this._initialized=!1,this._presetsInput.dispose(),this._renamePresetButton.element.tooltip.dispose(),this._renamePresetButton.element.remove}};var ce=$({title:"default",prefix:"themer",vars:{color:{base:{"theme-a":"#00bcd4","dark-a":"#0B0B11","dark-b":"#1b1d29","dark-c":"#46465e","dark-d":"#55566a","dark-e":"#787b89","light-a":"#ffffff","light-b":"#c9ccd7","light-c":"#a9adba","light-d":"#777D8F","light-e":"#5F6377"},dark:{},light:{}}}});function bi(n,t){let e=[],i=[];for(let r of n)t(r)?e.push(r):i.push(r);return[e,i]}function vi(n){let t=parseInt(n.replace("#",""),16),e=t>>16&255,i=t>>8&255,r=t&255;return[e,i,r].join(", ")}var Qi={autoInit:!0,persistent:!0,theme:ce,themes:[],mode:"system",localStorageKey:"fractils::themer",vars:{}},ue=class{node;theme;themes;activeThemeTitle;mode;wrapper;_initialized=!1;_persistent;_key;_unsubs=[];_targets=new Set;_log;constructor(t="document",e){let i=A([Qi,e]);this._key=String(i.localStorageKey),i.wrapper&&(this.wrapper=i.wrapper),this.node=t==="document"?document.documentElement:typeof t=="string"?M(t)[0]??document.documentElement:t,this._log=new f(`themer ${this.node.classList[0]}`,{fg:"DarkCyan"}),this._log.fn(Ke("constructor")).info({node:t,opts:i,this:this}),this.theme=b($(i.theme,i.vars)),this.themes=b(i.themes.map(o=>$(o,i.vars))),this.activeThemeTitle=b(i.theme.title,{key:this._key+"::activeTheme"});let r=this.activeThemeTitle.value;if(i.theme.title!==r){let o=this.themes.value.find(s=>s.title===r);o&&this.theme.set(o)}this.mode=b(i.mode,{key:this._key+"::mode"}),this._persistent=i.persistent??!0,this.#t(this.theme,o=>{this._log.fn(U("theme.subscribe")).debug({v:o,this:this}),this._initialized&&(this.activeThemeTitle.set(o.title),this.applyTheme())}),this.#t(this.mode,o=>{if(this._log.fn(U("mode.subscribe")).debug("v",o,{this:this}),typeof o>"u")throw new Error("Mode is undefined.");this._initialized&&this.applyTheme()}),this._targets.add(this.wrapper??this.node.parentElement??this.node),i.autoInit&&this.init()}#t(t,e){this._unsubs.push(t.subscribe(i=>e(i)))}init(){let t=this.themes.value,e=this.theme.value;if(this._log.fn(D("init")).debug({theme:this.theme,this:this}),!(typeof document>"u"))return this._initialized?this:(this._initialized=!0,t.find(i=>i.title===e.title)||this.create(e,{overwrite:!0,save:!1}),this.load()?.applyTheme(),this)}get modeColors(){return this.theme.value.vars.color[this.activeMode]}get baseColors(){return this.theme.value.vars.color.base}get allColors(){return{...this.baseColors,...this.modeColors}}get activeMode(){let t=this.mode.value,e=typeof t=="object"&&"value"in t?t.value:t;return e==="system"?this.#e:e}get#e(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":(window.matchMedia("(prefers-color-scheme: dark)").matches,"dark")}create=(t,e)=>{this._log.fn(D("addTheme")).debug({newTheme:t,options:e,this:this});let i=structuredClone(t),r=e?.overwrite??!1,o=e?.save??!0,[s,a]=bi(this.themes.value,c=>c.title===i.title),l=s.length>0;if(!r&&l){a.push(structuredClone(s[0]));let c=0;for(;;){let p=`${i.title} (${c++})`;if(!a.some(h=>h.title===p)){i.title=p;break}if(c>100){this._log.fn(D("addTheme")).debug(J("Runaway loop detected.")+" Aborting.",{this:this});break}}}return o&&this.save(),this};delete(t){this._log.fn(D("deleteTheme")).debug({themeOrTitle:t,this:this});let e=typeof t=="string"?t:t.title,i=this.themes.value,r=i.find(a=>a.title===e);if(!r)throw this._log.error("`themeTitle` not found in `themes` array.",{themeTitle:e,this:this}),new Error("Theme not found.");let o=i.indexOf(r)-1,s=this.theme.value.title===e;return this.themes.set(this.themes.value.filter(a=>a.title!==e)),s&&this.theme.set(i[o]??i.at(-1)),this.save(),this}getTheme(t){return this.themes.value.find(e=>e.title===t)}applyTheme=t=>{if(this._log.fn(D("applyTheme")).debug({theme:this.theme.value.title,targets:this._targets,this:this}),!("document"in globalThis))return;let e=this.theme.value;if(!e)throw this._log.error("theme not found").debug({theme:e,this:this}),new Error("Theme not found.");return this.#i(e,t),this.node.setAttribute("theme",e.title),this.node.setAttribute("mode",this.activeMode),this.wrapper?.setAttribute("theme",e.title),this.wrapper?.setAttribute("mode",this.activeMode),this};fromJSON(t){let e=this.theme.value.title!==t.activeTheme,i=t.themes.find(r=>r.title===t.activeTheme);if(i??=this.themes.value.find(r=>r.title===t.activeTheme),!i)throw this._log.error("`activeTheme` not found in `themes` array.",{activeTheme:t.activeTheme,json:t,this:this}),new Error("Theme not found.");this.themes.set(t.themes),this.mode.set(t.mode),e&&this.applyTheme()}toJSON(){return{themes:this.themes.value,activeTheme:this.theme.value.title,mode:this.mode.value}}load=()=>{if(this._log.fn(D("load")).debug({this:this}),this._persistent&&"localStorage"in globalThis){let t=localStorage.getItem(this._key+"::themer");t&&this.fromJSON(JSON.parse(t))}return this};save(){if(this._log.fn(D("save")).debug({this:this}),!("localStorage"in globalThis)||!this._persistent)return;let t=this.toJSON(),e=`${this._key}themer`in localStorage;try{e&&JSON.parse(JSON.stringify(t))===JSON.parse(localStorage.getItem(`${this._key}themer`)||"")||localStorage.setItem(`${this._key}themer`,JSON.stringify(t))}catch(i){throw console.error(J("Error")+": Failed to save to localStorage.",{error:i,this:this}),new Error("Failed to save to localStorage.")}return t}clear(){this._log.fn(D("clear")).debug({this:this}),"localStorage"in globalThis&&(localStorage.removeItem(`${this._key}themer`),this.themes.set([ce]),this.theme.set(ce),this.mode.set("system"))}addTarget(t){this._targets.add(t),this.applyTheme([t])}#i=(t,e=this._targets)=>{let i=t;this._log.fn(D("applyStyleProps")).debug({config:i,this:this});let r=i.vars.color[this.activeMode];if(!r)throw this._log.error("`theme` not found in `config`.",{theme:r,config:i,"this.activeMode":this.activeMode,this:this}),new Error("Theme not found.");let o=new Map;for(let s of e){for(let[a,l]of k(i.vars))if(a==="color")for(let[c,p]of[...k(l.base),...k(l[this.activeMode])])s.style.setProperty(`--${i.prefix}-${c}`,p),s.style.setProperty(`--${i.prefix}-${c}-rgb`,vi(p));else{let c=i.vars[a];for(let[p,h]of k(c))if(p==="base")for(let[m,w]of k(h))o.set(m,w);else if(p===this.activeMode)for(let[m,w]of k(h))o.set(m,w)}for(let[a,l]of o)s.style.setProperty(`--${i.prefix}-${a}`,l)}};dispose(){for(let t of this._unsubs)t()}};var yi=`<svg class="settings-icon fracgui-cancel" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 26 26">
  <path class="gear" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4.7c.2-.2.5-.3.7-.3l2.7.2h.4l.3-.1.2-.4 1.1-2.3.6-.5a13 13 0 0 1 6 0l.6.5 1.1 2.3.2.4.3.1h.4l2.7-.2c.2 0 .5.1.7.3 1.4 1.4 2.4 3 3 5 0 .2 0 .5-.2.7l-1.4 2-.3.5v.2l.3.4 1.4 2.1c.2.2.2.5.2.8-.6 1.8-1.6 3.5-3 4.9a1 1 0 0 1-.7.3l-2.7-.2h-.4l-.3.1-.2.4-1.1 2.3a1 1 0 0 1-.6.5 13 13 0 0 1-6 0 1 1 0 0 1-.6-.5l-1.1-2.3-.2-.4-.3-.1h-.4l-2.7.2a1 1 0 0 1-.7-.3c-1.4-1.4-2.4-3-3-5 0-.2 0-.5.2-.7l1.4-2L3 13l-.3-.4-1.4-2.1a.9.9 0 0 1-.2-.8c.6-1.8 1.6-3.5 3-4.9Z" />
  <circle fill="currentColor" class="dot-right" cx="22" cy="13" r="3" />
  <circle class="dot-left" fill="currentColor" cx="4" cy="13" r="3" />
  <circle class="dot-center" fill="currentColor" cx="13" cy="13" r="3" />
</svg>`;var d="fracgui",tr={base:{"font-family":"'fredoka', sans-serif","font-size":"clamp(0.75rem, 3vw, 1rem)","shadow-lightness":"0%","shadow-opacity":"0.2","shadow-color":`hsla(250, 10%, var(--${d}-shadow-lightness), var(--${d}-shadow-opacity))`,"radius-xs":"0.125rem","radius-sm":"0.1875rem",radius:"0.3125rem","radius-md":"0.4375rem",filter:"none",opacity:"0.95","transition-duration":"75ms","backdrop-filter":"blur(10px)"},dark:{},light:{"shadow-lightness":"50%","shadow-opacity":"0.1"}},Ce={base:{root:{width:"30rem","min-width":"25rem","max-width":"35rem","max-height":"90vh",opacity:"0.5","backdrop-filter":"blur(0.5rem)",header:{height:"1.75rem"}},header:{height:"1.75rem"},folder:{background:`color-mix(in sRGB, color-mix(in sRGB, var(--${d}-bg-a) 50%, var(--${d}-bg-b)) calc(var(--${d}-opacity) * 100%), transparent)`,header:{"padding-left":"0.25rem",color:`var(--${d}-fg-c)`,dim:{color:`var(--${d}-fg-d)`},background:`var(--${d}-bg-a)`,outline:"none","box-shadow":"none","font-size":`var(--${d}-font-size)`,"font-weight":"350","letter-spacing":"0.75px"},content:{"padding-left":"0.33rem","font-weight":"350","letter-spacing":"0.5px"}},toolbar:{icon:{color:`var(--${d}-bg-d)`,dim:{color:`var(--${d}-bg-c)`}}},controller:{"font-family":"'inconsolata', 'Comic Mono', 'Fira Code', monospace","font-size":"clamp(0.75rem, 3vw, 0.9rem)","border-radius":`var(--${d}-radius-sm)`,"box-shadow":`-1px 1px 2px hsla(250, 10%, var(--${d}-shadow-lightness), calc(0.7 * var(--${d}-shadow-opacity))), -1px 2px 5px hsla(250, 10%, var(--${d}-shadow-lightness), var(--${d}-shadow-opacity))`,background:`var(--${d}-bg-c)`,outline:`1px solid color-mix(in sRGB, var(--${d}-bg-d) 40%, transparent)`,color:`var(--${d}-fg-b)`,dim:{color:`var(--${d}-fg-c)`,background:`color-mix(in sRGB, color-mix(in sRGB, var(--${d}-bg-c) 75%, var(--${d}-bg-b)) calc(var(--${d}-opacity) * 100%), transparent)`}},input:{height:"2rem","section-1":{width:"clamp(6rem, 30%, 12rem)"},"section-2":{width:"4rem"},"section-3":{width:"100%"},"font-size":"'clamp(0.75rem, 3vw, 0.9rem)'",container:{color:`var(--${d}-fg-d)`,outline:`1px solid color-mix(in sRGB, var(--${d}-bg-a) 20%, transparent)`,"box-shadow":`-0.15px 0.1px 1px hsla(220, 10%, 2%, calc(0.8 * var(--${d}-shadow-opacity))) inset, -2px 2px 15px hsla(220, 10%, 2%, calc(0.075 * var(--${d}-shadow-opacity))) inset, -3.0px 3px 25px hsla(220, 10%, 2%, calc(0.05 * var(--${d}-shadow-opacity))) inset, -10.0px 10px 50px hsla(220, 10%, 2%, calc(0.025 * var(--${d}-shadow-opacity))) inset`,background:`color-mix(in sRGB, var(--${d}-bg-a) calc(var(--${d}-opacity) * 100%), transparent)`},number:{range:{color:`var(--${d}-bg-c)`,background:`var(--${d}-bg-a)`,outline:`1px solid color-mix(in sRGB, var(--${d}-bg-c) 0%, transparent)`,"box-shadow":"-2px 2px 2.5px hsla(230, 20%, 0%, 0.2), 2px 2px 5px hsla(230, 20%, 0%, 0.2), 2px 3px 10px hsla(230, 20%, 0%, 0.2), 2px 4px 4px hsla(230, 25%, 0%, 0.2)"}}}},dark:{},light:{controller:{outline:`1px solid color-mix(in sRGB, var(--${d}-bg-d) 10%, transparent)`,background:`color-mix(in sRGB, var(--${d}-bg-a) calc(var(--${d}-opacity) * 100%), transparent)`,color:`var(--${d}-fg-a)`,dim:{background:`color-mix(in sRGB, var(--${d}-bg-a) calc(var(--${d}-opacity) * 100%), transparent)`,color:`var(--${d}-fg-c)`}},input:{number:{range:{background:`var(--${d}-bg-b)`,color:`var(--${d}-bg-d)`,"box-shadow":"-2px 2px 2px hsla(230, 20%, 30%, 0.1), 2px 2px 3px hsla(230, 20%, 30%, 0.1), 2px 2px 7px hsla(230, 20%, 30%, 0.1)"}}}}},Le={color:Vt.vars.color,utility:tr,core:{base:ie(Ce.base,d),dark:ie(Ce.dark,d),light:ie(Ce.light,d)}};var pe=class{pointer=-1;maxHistory=50;stack=[];lockedExternally=!1;_lockedInternally=!1;constructor(){}commit(t,e=100){if(this._lockedInternally||this.lockedExternally){this._lockedInternally=!1;return}let i=this.pointer+1-this.stack.length;i<0&&(this.stack=this.stack.slice(0,i)),this.pointer++,this.stack.push(t),this.stack.length>this.maxHistory&&(this.stack.shift(),this.pointer--)}undo=()=>{if(this.pointer===-1)return;this._lockedInternally=!0;let t=this.stack[this.pointer];t.setter?t.setter(t.from):t.target.set(t.from),this.pointer--};redo=()=>{if(this.pointer+1>this.stack.length-1)return;this._lockedInternally=!0;let t=this.stack[this.pointer+1];t.setter?t.setter(t.to):t.target.set(t.to),this.pointer++};clear(){this.stack=[],this.pointer=-1}};var er={__type:"ButtonControllerOptions",text:()=>"click me",onClick:()=>{},id:void 0,disabled:!1,style:void 0,tooltip:void 0,active:!1,element:void 0,parent:void 0},pt=class n{__type="ButtonController";static is(t){return t?.__type==="ButtonController"&&t instanceof n}_text;_active=()=>!1;_disabled=()=>!1;element;_evm=new S(["change","refresh","click"]);on=this._evm.on.bind(this._evm);_log=new f("ButtonController",{fg:"coral"});parent;constructor(t){let e=Object.assign({},er,t);this._log.fn("constructor").debug({opts:e,this:this}),this.element=e.element?e.element:u("button",{id:e.id??I(8),classes:["fracgui-controller","fracgui-controller-button"],parent:e.parent}),this.text=e.text,this.active=e.active,typeof e.disabled<"u"&&(this.disabled=e.disabled),this._evm.listen(this.element,"click",this.click),e.onClick&&this._evm.on("click",e.onClick)}get text(){return this._text()}set text(t){this._text=T(t),this.element.innerHTML=this._text()}get active(){return this._active()}set active(t){typeof t>"u"||(this._active=T(t),this.element.classList.toggle("active",this._active()))}get disabled(){return this._disabled()}set disabled(t){typeof t>"u"||(this._disabled=T(t),this._disabled()?this.disable():this.enable())}set(t){Object.assign(this,t),this._evm.emit("change",this),this.refresh()}click=t=>{this._log.fn("click").debug({this:this}),this._evm.emit("click",{e:t,button:this}),this.refresh()};enable=()=>this.disabled?this.disabled=!1:(this.element.classList.remove("disabled"),this.element.removeAttribute("disabled"),this);disable=()=>this.disabled?(this.element.classList.add("disabled"),this.element.setAttribute("disabled","true"),this):this.disabled=!0;refresh=()=>(this.element.toggleAttribute("disabled",this.disabled),this.element.classList.toggle("disabled",this.disabled),this.element.innerHTML=this.text,this.element.classList.toggle("active",this.active),this._evm.emit("refresh"),this);dispose(){this.element.remove(),this._evm.dispose()}};var Me=Object.freeze({InputText:"TextInputOptions",InputTextArea:"TextAreaInputOptions",InputNumber:"NumberInputOptions",InputColor:"ColorInputOptions",InputSelect:"SelectInputOptions",InputButton:"ButtonInputOptions",InputButtonGrid:"ButtonGridInputOptions",InputSwitch:"SwitchInputOptions"}),js=Object.freeze(Qe(Me)),Ws=Object.freeze(ee(Me)),P=class{constructor(t,e){this.folder=e;this.opts=t,this.opts.saveable??=!0,this.opts.resettable??=!0,this.id=this.opts.presetId??`${e.presetId}_${this.opts.title}__${this.opts.__type}`,this.__log=new f(`SuperInput${this.opts.__type.replaceAll(/Options|Input/g,"")} ${this.opts.title}`,{fg:"skyblue"}),this.__log.fn("super constructor").debug({options:t,this:this}),this._title=this.opts.title??"",this._disabled=T(this.opts.disabled??!1),this._hidden=T(this.opts.hidden??!1),this._index=this.opts.order??this.folder.inputs.size,this._index+=1,this._dirty=()=>this.value!==this.initialValue,this.elements.container=u("div",{classes:["fracgui-input-container"],parent:this.folder.elements.content}),this.title||this.element.style.setProperty("--fracgui-input-section-1_width","0px"),this.elements.drawerToggle=u("div",{classes:["fracgui-input-drawer-toggle"],parent:this.elements.container}),this.elements.title=u("div",{classes:["fracgui-input-title"],parent:this.elements.container,textContent:this.title}),this.elements.content=u("div",{classes:["fracgui-input-content"],parent:this.elements.container}),this.elements.resetBtn=u("div",{classes:["fracgui-input-reset-btn"],parent:this.elements.title,tooltip:{text:"Reset",placement:"left",delay:0},onclick:()=>{this.__log.fn("reset").debug("resetting to initial value",this.initialValue),this.set(this.initialValue)}}),this.elements.drawer=u("div",{classes:["fracgui-input-drawer"],parent:this.elements.content}),this._evm.listen(this.elements.drawerToggle,"click",()=>{console.warn("todo")}),"onChange"in t&&this._evm.on("change",t.onChange),Promise.resolve().then(()=>{this.index=this.index})}opts;id;bound=!1;elements={controllers:{}};bubble=!1;_title="";_index;_disabled;_hidden;_undoLock=!1;lockCommit={};_dirty;_evm=new S(["change","refresh"]);listen=this._evm.listen.bind(this._evm);on=this._evm.on.bind(this._evm);__log;get value(){return this.state.value}get title(){return this._title}set title(t){this._title=t,this.elements.title.textContent=t}get element(){return this.elements.container}get index(){return this._index}set index(t){this._index=t,this.elements.container.style.order=t.toString()}get undoManager(){return this.folder.gui?._undoManager}get disabled(){return this._disabled()}set disabled(t){this._disabled=T(t),this._disabled()?this.disable():this.enable()}get hidden(){return this.elements.container.classList.contains("hidden")}set hidden(t){this._hidden=T(t),this.elements.container.classList.toggle("hidden",this._hidden())}get dirty(){return this._dirty()}resolveState(t){if(t.binding){let e=b(t.binding.target[t.binding.key]);return this._evm.add(e.subscribe(i=>{t.binding.target[t.binding.key]=i})),e}else return b(t.value)}resolveInitialValue(t){let e=t.binding?t.binding.target[t.binding.key]:t.value;return B(e)?e.value:e}_emit(t,e=this.state.value){return this.opts.resettable&&this.elements.resetBtn.classList.toggle("dirty",this._dirty()),this._evm.emit(t,e),t==="change"&&this.folder.evm.emit("change",this),this}lock=(t=this.state.value)=>{this._undoLock=!0,this.lockCommit.from=t,this.__log.fn(U("lock")).debug("lockCommit:",this.lockCommit)};unlock=t=>{this.__log.fn(U("unlock")).debug("commit",{commit:t,lockCommit:this.lockCommit}),t??={},t.target??=this,t.to??=this.state.value,t.from??=this.lockCommit.from,this._undoLock=!1,this.commit(t)};commit(t){if(t.from??=this.state.value,t.target??=this,this._undoLock){this.__log.fn("commit").debug("prevented commit while locked");return}this.__log.fn("commit").debug("commited",t),this.undoManager?.commit(t)}enable(){return this._disabled=T(!1),this}disable(){return this._disabled=T(!0),this}refresh(t=this.state.value){if(this.opts.resettable)return this.opts.binding&&this.state.set(this.opts.binding.target[this.opts.binding.key]),this.elements.resetBtn.classList.toggle("dirty",this._dirty()),this._evm.emit("refresh",t),this}save(t={}){if(this.opts.saveable!==!0)throw new Error("Attempted to save unsaveable Input: "+this.title);let e={__type:Me[this.__type],title:this.title,value:this.state.value,disabled:this.disabled,presetId:this.id,hidden:this.hidden,order:this.index,resettable:this.opts.resettable??!0};return this.__log.fn("save").debug(e),Object.assign(e,t)}load(t){let e=typeof t=="string"?JSON.parse(t):t;this.id=e.presetId,this.disabled=e.disabled,this.hidden=e.hidden,this.initialValue=e.value,this.set(e.value)}dispose(){this.__log.fn("dispose").debug(this),this._evm.dispose();let t=e=>{if(e instanceof HTMLElement||e instanceof SVGElement)e.remove();else if(typeof e=="object")for(let i in e)t(e[i])};t(this.elements)}};var ir={__type:"ButtonGridInputOptions",value:[[{text:"",onClick:()=>{}}]],style:{gap:"0.5em"},activeOnClick:!1,resettable:!1},At=class extends P{__type="InputButtonGrid";initialValue={};state=b({});buttons=new Map;buttonGrid;_log;constructor(t,e){let i=Object.assign({},ir,t);super(i,e),this._evm.registerEvents(["click"]),this.initialValue=i.value,this._log=new f(`InputButtonGrid ${i.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:i,this:this});let r=u("div",{classes:["fracgui-input","fracgui-input-buttongrid-container"],parent:this.elements.content});this.elements.controllers={container:r,buttonGrid:[]},this.buttonGrid=this.toGrid(this.initialValue),this.refresh()}onClick(t){this._evm.on("click",()=>t(this.state.value))}toGrid(t){let e=[],i=t.length,r=Math.max(...t.map(o=>o.length));for(let{element:o}of this.buttons.values())o.remove();this.buttons.clear();for(let o=0;o<i;o++){let s=u("div",{classes:["fracgui-controller-buttongrid-row"],parent:this.elements.controllers.container,style:{gap:"0.5em"}});e[o]=[];for(let a=0;a<r;a++){let l=t[o]?.[a];if(l){let c=this.addButton(l,l.id??I(8),o,a);s.appendChild(c.element),e[o][a]=c}}}return this.elements.container.style.setProperty("height",Jt(this.elements.controllers.container,"height")),e}addButton(t,e,i,r){let o=T(t.text),s=t.tooltip?Object.assign({placement:"top",delay:1e3},t.tooltip):void 0;t.element=u("button",{id:e,classes:["fracgui-controller","fracgui-controller-button","fracgui-controller-buttongrid-button"],innerHTML:o(),dataset:{id:e,row:String(i),col:String(r)},style:{...t.style,width:"100%"},tooltip:s});let a=new pt(t);return typeof t.active!="function"&&this.opts.activeOnClick&&(a.active=()=>this.state.value===a),a.on("click",({button:l})=>{this.set(l)}),this.buttons.set(e,a),a}set(t){this.state.set(t),this._emit("click",t),this.refresh()}refresh(){this._log.fn("refresh").debug({this:this});for(let t of this.buttons.values())t.refresh();return super.refresh(),this}enable(){for(let t of this.buttons.values())t.enable();return super.enable(),this}disable(){for(let t of this.buttons.values())t.disable();return super.disable(),this}dispose(){for(let t of this.buttons.values())t.dispose();this.buttons.clear(),super.dispose()}};var rr={__type:"SwitchInputOptions",value:!0,labels:{true:{state:"on",verb:"Enable"},false:{state:"off",verb:"Disable"}}},vt=class extends P{__type="InputSwitch";state;initialValue;#t;constructor(t,e){let i=Object.assign({},rr,t);super(i,e),this.#t=new f(`InputSwitch ${i.title}`,{fg:"cyan"}),this.#t.fn("constructor").debug({opts:i,this:this}),i.binding?(this.initialValue=i.binding.target[i.binding.key],this.state=b(!!this.initialValue),this._evm.add(this.state.subscribe(l=>{i.binding.target[i.binding.key]=l}))):(this.initialValue=i.value,this.state=b(!!i.value));let r=u("div",{classes:["fracgui-input-switch-container"],parent:this.elements.content}),o=u("button",{classes:["fracgui-controller","fracgui-controller-switch"],parent:r,tooltip:{text:()=>(this.state.value?i.labels?.false.verb:i.labels?.true.verb)||"",anchor:".fracgui-controller-switch-thumb",delay:750}}),s=u("div",{classes:["fracgui-controller-switch-thumb"],parent:o}),a=u("div",{classes:["fracgui-controller-switch-state-text"],parent:r,innerText:this.state.value?i.labels?.true.state:i.labels?.false.state,style:{opacity:"0.75"}});this.elements.controllers={container:r,input:o,thumb:s,stateText:a},this._evm.listen(this.elements.controllers.input,"click",()=>this.set()),this._evm.add(this.state.subscribe(this.refresh.bind(this)))}set(t=!this.state.value){if(this.#t.fn("set").debug({v:t,this:this}),typeof t=="boolean")this.undoManager?.commit({target:this,from:this.state.value,to:t}),this.state.set(t);else throw new Error(`InputBoolean.set() received an invalid value: ${JSON.stringify(t)} (${typeof t})`);return this._emit("change",t),this}refresh(t=this.state.value){return this.#t.fn("refresh").debug({v:t,this:this}),this.disabled?this:(this.elements.controllers.input.classList.toggle("active",t),this.elements.controllers.input?.tooltip?.refresh(),this.elements.controllers.stateText.innerText=(this.state.value?this.opts.labels?.true.state:this.opts.labels?.false.state)??"",this._emit("refresh",t),this)}enable(){return this.elements.controllers.input.disabled=!1,super.enable(),this}disable(){return this.elements.controllers.input.disabled=!0,super.disable(),this}dispose(){super.dispose()}};var nr={__type:"ButtonInputOptions",text:()=>"click me"},yt=class extends P{__type="InputButton";initialValue={};state=b({});onClick=()=>{};button;_log;constructor(t,e){let i=Object.assign({},nr,t,{__type:"ButtonInputOptions"});super(i,e),this._evm.registerEvents(["change","refresh","click"]),this._log=new f(`InputButton ${i.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:i,this:this}),i.value?this.onClick=i.value:i.onClick?this.onClick=i.onClick:!1;let r=u("div",{classes:["fracgui-input-button-container"],parent:this.elements.content});this.button=new pt({text:i.text,onClick:i.onClick,parent:r}),this.elements.controllers={container:r,button:this.button.element},this._evm.listen(this.elements.controllers.button,"click",this.click.bind(this)),this._evm.add(this.state.subscribe(this.refresh.bind(this)))}get text(){return this.button.text}set text(t){this.button.text=t}click(){this.button.click({...new MouseEvent("click"),target:this.button.element})}enable(){return this.button.enable(),super.enable(),this}disable(){return this.button.disable(),super.disable(),this}set=t=>{pt.is(t)&&this.state.set(t)};refresh(){return this.button.refresh(),super.refresh(),this}dispose(){this.button.dispose(),super.dispose()}};function Q(n){let t=()=>!1;return class extends n{get disabled(){return t()}set disabled(e){t=T(e),t()?this.disable():this.enable()}}}var or=n=>{if(!(n instanceof HTMLElement||n instanceof SVGElement))return!1;let t=getComputedStyle(n);return["overflow","overflow-x","overflow-y"].some(e=>{let i=t.getPropertyValue(e);return i==="auto"||i==="scroll"})},xi=n=>{let t=n.parentElement;for(;t;){if(or(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement};var et=class{__type="Select";element;_opts;elements;options;optionMap=new Map;expanded=!1;initialValue;initialOptions;disableClicks=!1;bubble=!0;_selected;_currentSelection;_scrollParent;_evm=new S(["change","refresh","cancel","open","close"]);on=this._evm.on.bind(this._evm);_log;constructor(t){let e={...t,selected:tt(t.selected?t.selected:t.options[0]),options:t.options.map(s=>tt(s)),selectOnHover:t.selectOnHover??!0};this._opts=e,t?.title?this._log=new f(`Select ${t.title}`,{fg:"burlywood"}):this._log=new f("Select",{fg:"blueviolet"}),this._selected=this._currentSelection=this.initialValue=this._opts.selected,this.options=this.initialOptions=this._opts.options;let i=u("div",{classes:["fracgui-controller-select-container"],parent:t.container});this.element=i;let r=u("div",{classes:["fracgui-controller-select-selected"],parent:i,textContent:String(this.getLabel(this.selected))});this._evm.listen(r,"click",()=>{this.disableClicks||this.toggle()});let o=u("div",{classes:["fracgui-controller-select-dropdown"]});this.elements={container:i,selected:r,dropdown:o,options:[]};for(let s of this.options)this.add(s);this.disabled=this._opts.disabled,this._log.fn("constructor").debug({opts:this._opts,this:this})}get selected(){return this._selected}set selected(t){this._log.fn("set selected").debug(t);let e=B(t)?tt(t.value):tt(t);if(this._selected=e,this.elements.selected.innerHTML=e.label,!this.bubble){this.bubble=!0;return}this._evm.emit("change",this.selected)}getLabel(t){return B(t)?t.value.label:t.label}add(t){let e=tt(t),i=u("div",{classes:["fracgui-controller-select-option"],parent:this.elements.dropdown,innerText:e.label}),r=this._evm.listen(i,"click",this.select);return i.dataset.optionId=r,this.optionMap.set(r,{option:e,element:i}),this.elements.options.push(i),this._log.fn("add").debug({option:t,added:this.optionMap.get(r),id:r,this:this}),this}remove(t,e=!1){let i=this.optionMap.get(t);if(!i)throw console.error({this:this}),new Error("No option found in map for id: "+t);let r=i;if(this._log.fn("remove").debug({btn:r,id:t,this:this}),e&&JSON.stringify(this.selected.value)===JSON.stringify(r.option.value)){let o=this.options.indexOf(r.option)+1,s=this.options[o%this.options.length];this._log.fn("remove").debug("Auto-selecting fallback btn",{fallback:s,btn:r,id:t,this:this}),this.select(s,!1)}this.elements.options=this.elements.options.filter(o=>o!==r.element),r.element.remove(),this.options=this.options.filter(o=>o.label!==r.option.label),this.optionMap.delete(t)}clear(){this._log.fn("clear").debug({this:this});for(let t of this.optionMap.keys())this.remove(t,!1);this.options=[],this.optionMap.clear()}select=(t,e=!0)=>{if(this.disabled)return this;if(this._log.fn("select").debug("v",t,{this:this}),t instanceof Event){let i=t.target,r=i.dataset.optionId;if(typeof r!="string")throw console.error({target:i}),new Error("No option id found on select click");let o=this.optionMap.get(r);if(!o)throw console.error({target:i}),new Error("No option found in map");for(let[,{element:s}]of this.optionMap)s.classList.toggle("selected",s===o.element);this.close(),this.selected=o.option}else{let i=tt(t);if(B(i))this.selected=i.value;else if(F(i))this.bubble=e,this.selected=i;else throw new Error("Invalid value: "+i)}return this};refresh=()=>(this._log.fn("refresh").debug({this:this}),this.elements.selected.innerHTML=this.selected.label,this);toggle=()=>{this._log.fn("toggle").debug({this:this}),this.expanded?(this._evm.emit("cancel"),this.close()):this.open()};open=()=>{if(this.expanded=!0,this._opts.input.folder.gui.wrapper.appendChild(this.elements.dropdown),this.elements.dropdown.classList.add("expanded"),this.elements.selected.classList.add("active"),this.updatePosition(),this._scrollParent??=xi(this.elements.selected),this._scrollParent?.addEventListener("scroll",this.updatePosition),this._evm.listen(window,"keydown",this._closeOnEscape,{},"dropdown"),this._evm.listen(window,"click",this._clickOutside,{},"dropdown"),this._opts.selectOnHover){this._currentSelection=this.selected;for(let[,{option:t,element:e}]of this.optionMap){e.classList.toggle("selected",t.label===this.selected.label);let i=()=>{this._log.fn("on(mouseenter)").debug("currentSelection",{option:t,element:e,this:this}),this.select(t)};this._evm.listen(e,"mouseenter",i,{},"dropdown")}}this._evm.emit("open"),setTimeout(()=>{this.elements.dropdown.style.pointerEvents="all"},200)};updatePosition=()=>{if(!this.expanded)return;this.elements.dropdown.style.setProperty("width","unset"),this.elements.dropdown.style.setProperty("top","unset");let{dropdown:t,selected:e}=this.elements,i=this._opts.input.folder.root.elements.content.scrollTop,{top:r,left:o}=e.getBoundingClientRect();this.elements.dropdown.style.setProperty("width",`${Math.max(e.offsetWidth,t.offsetWidth)}px`),this.elements.dropdown.style.setProperty("top",`${r+e.offsetHeight-i}px`),this.elements.dropdown.style.setProperty("left",`${o+e.offsetWidth/2-t.offsetWidth/2}px`)};close=()=>{this.expanded=!1,this.elements.dropdown.classList.remove("expanded"),this.elements.selected.classList.remove("active"),this.elements.dropdown.style.pointerEvents="none",this._evm.clearGroup("dropdown"),this._evm.emit("close"),setTimeout(()=>{this.elements.dropdown.remove()},200)};_closeOnEscape=t=>{t.key==="Escape"&&this._cancel()};_clickOutside=t=>{let e=t.composedPath();!e.includes(this.elements.selected)&&!e.includes(this.elements.dropdown)&&this._cancel()};_cancel(){this.close(),this._opts.selectOnHover&&this.select(this._currentSelection),this._evm.emit("cancel")}enable(){return this.elements.selected.classList.remove("disabled"),this.elements.selected.removeAttribute("disabled"),this}disable(){return this.elements.selected.classList.add("disabled"),this.elements.selected.setAttribute("disabled","true"),this}dispose(){for(let t of ee(this.elements))Array.isArray(t)?t.forEach(e=>e.remove()):t.remove();this._scrollParent?.removeEventListener("scroll",this.updatePosition),removeEventListener("click",this._clickOutside),this._evm.dispose()}};et=C([Q],et);function F(n){return typeof n=="object"&&Object.keys(n).length===2&&"label"in n&&"value"in n}function tt(n){if(F(n))return n;if(["string","number"].includes(typeof n))return{label:String(n),value:n};if(B(n))return F(n.value)?n.value:{label:String(n.value),value:n};if(n&&typeof n=="object")return{label:JSON.stringify(n),value:n};throw console.error("Invalid option:",n,". Please provide a named option ({ label: string, value: T })and place your value in the `value` property."),new Error("Missing label:"+JSON.stringify(n),{cause:{v:n}})}function Pe(n){function t(e){return e}if(F(n))return n.value;if(B(n)){let e=n.value;return F(e)?e.value:e}return n}var sr={__type:"SelectInputOptions",options:[]},dt,it,rt=class extends P{constructor(e,i){let r=Object.assign({},sr,e,{__type:"SelectInputOptions"});super(r,i);x(this,"__type","InputSelect");x(this,"initialValue");x(this,"state");N(this,dt);x(this,"select");N(this,it,!0);x(this,"labeledSelection");x(this,"_log");x(this,"refresh",()=>{let e=this.state.value;if(this._log.fn("refresh").debug({v:e,this:this}),!this.labeledSelection)throw new Error("Failed to find labeled selection.");let i=this.options.filter(r=>!this.select.options.some(o=>o.label===r.label));console.log(i);for(let r of i)this.select.add(r);return this.select.select(this.labeledSelection,!1),super.refresh(),this});this._evm.registerEvents(["preview","open","close","cancel"]),this._log=new f(`InputSelect ${r.title}`,{fg:"slategrey"}),this._log.fn("constructor").debug({opts:r,this:this}),r.value??=r.binding?.initial??ke(this.targetValue),this.initialValue=this.resolveInitialValue(r),this.labeledSelection={value:Pe(this.initialValue),label:this.resolveInitialLabel(this.initialValue,r)},K(this,dt,this.opts.options),this.state=b(this.initialValue);let o=u("div",{classes:["fracgui-input-select-container"],parent:this.elements.content});this.select=new et({input:this,container:o,options:this.options,selected:this.labeledSelection,title:this.title}),this.elements.controllers={container:o,select:this.select.elements},this.disabled=r.disabled??!1,this._evm.add(this.state.subscribe(s=>{if(this.select.bubble){if(this.targetObject&&(B(this.targetValue)?(this._log.fn("updating binding").debug({from:this.targetValue.value,to:s.value}),this.targetValue.set(s.value)):this.targetValue=s.value),L(this,it)){K(this,it,!1),this._log.fn("state.subscribe").debug("Stopped propagation.  Subscribers will not be notified.");return}this.set(s)}})),e.onChange&&this._evm.on("change",s=>{this._log.fn("calling options onChange").debug(s),e.onChange?.(tt(s))}),this.select.on("change",s=>{this._log.fn("select.onChange").debug(s),!L(this,it)&&(K(this,it,!0),this.set(s))}),this.listen(this.select.element,"preview",()=>{this._emit("preview")}),this.listen(this.select.element,"open",()=>{this._emit("open")}),this.listen(this.select.element,"close",()=>{this._emit("close")}),this.listen(this.select.element,"cancel",()=>{this._emit("cancel")}),this._dirty=()=>this.value.label!==this.initialValue.label,this._log.fn("constructor").debug({this:this})}set options(e){this._log.fn("set options").debug(e),K(this,dt,T(e)),this.select.clear();for(let i of L(this,dt).call(this))this.select.add(i)}get options(){return this.resolveOptions(L(this,dt))}resolveOptions(e){function i(o){return F(o[0])}let r=T(e)();if(!i(r)){if(!this.opts.labelKey)throw new Error("Recieved unlabeled options with no `labelKey` specified.  Please label your options or provide the `labelKey` to use as a label.");return r.map(o=>({label:o[this.opts.labelKey],value:o}))}return r}resolveInitialValue(e){let i=e.binding?e.binding.target[e.binding.key]:e.value,r=ke(i);if(!F(r)){if(!e.labelKey)throw new Error("Cannot resolve initial value.  Please provide a `labelKey` or use labeled options.");return{label:r[e.labelKey],value:r}}return r}resolveInitialLabel(e,i){let r=B(e)?e.value:e;return F(r)?r.label:i.labelKey?e[i.labelKey]:Ut(r)}get targetObject(){return this.opts.binding?.target}get targetKey(){return this.opts.binding?.key}get targetValue(){return this.targetObject?.[this.targetKey]}set targetValue(e){if(F(e)&&(e=Pe(e)),this._log.fn("set targetValue").debug(e),typeof e>"u")throw console.error("Cannot set target value to undefined"),console.error("this",this),new Error("Cannot set target value to undefined");let i=this.targetObject,r=this.targetKey;i&&r&&(B(i[r])?i[r].set(e):i[r]=e)}set(e){return this._log.fn("set").debug(e),K(this,it,!0),this.select.select(e,!1),this.state.set(e),this._emit("change",e),this}enable(){return this._log.fn("enable").debug(),this.select.enable(),super.enable(),this}disable(){return this._log.fn("disable").debug(),this.select.disable(),super.disable(),this}dispose(){super.dispose()}};dt=new WeakMap,it=new WeakMap,rt=C([Q],rt);var de=()=>{let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("width","24"),n.setAttribute("height","24"),n.setAttribute("viewBox","-2 -2 28 28"),n.setAttribute("stroke","currentColor"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","2"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round");let t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","m18 15-6-6-6 6"),n.appendChild(t),n};var he=class{constructor(t,e,i){this.input=t;this.opts=e;this.parent=i;this.elements.container=u("div",{classes:["fracgui-input-number-buttons-container"],parent:i}),this.elements.increment=u("div",{classes:["fracgui-controller","fracgui-input-number-button","fracgui-input-number-buttons-increment"],parent:this.elements.container}),this.elements.increment.appendChild(de()),t.listen(this.elements.increment,"pointerdown",this.rampChangeUp.bind(this)),this.elements.decrement=u("div",{classes:["fracgui-controller","fracgui-input-number-button","fracgui-input-number-buttons-decrement"],parent:this.elements.container});let r=de();r.setAttribute("style","transform: rotate(180deg)"),this.elements.decrement.appendChild(r),t.listen(this.elements.decrement,"pointerdown",this.rampChangeDown.bind(this))}elements={};rampChange(t=1){let e="step"in this.opts?this.opts.step:1,i=300,r=!1,o=0,s,a=()=>{clearTimeout(s),!r&&(o+=i,o>1e3&&(i/=2,o=0),this.input.set(this.input.state.value+e*t),s=setTimeout(a,i))},l=()=>{r=!0,window.removeEventListener("pointerup",l),window.removeEventListener("pointercancel",l)};window.addEventListener("pointercancel",l,{once:!0}),window.addEventListener("pointerup",l,{once:!0}),a()}rampChangeUp(){this.rampChange(1)}rampChangeDown(){this.rampChange(-1)}};function ar(n){return typeof globalThis.navigator>"u"&&!n&&console.error("Error getting user-agent: Request object is required on the server, but was not provided."),n?.headers.get("user-agent")||globalThis.navigator?.userAgent}function ge(n,t){return!!ar(t)?.match(n)}function Re(n){return ge(/mac/i,n)&&!lr(n)}function wi(n){return Re(n)||_i(n)||Bt(n)||cr(n)||Bt(n)}function lr(n){return ur(n)||_i(n)||Bt(n)}function _i(n){return ge(/iphone/i,n)}function cr(n){return Bt(n)}function Bt(n){return ge(/ipad/i,n)}function ur(n){return ge(/android/i,n)}function ki(n){return Re()?n.metaKey:n.ctrlKey}function Ei(){return wi()?Ti.metaKey.mac.icon:Ti.ctrlKey.windows.icon}var Ti={metaKey:{mac:{icon:"\u2318",name:"command",key:"meta"},windows:{icon:"\u229E Win",name:"windows",key:"win"},linux:{icon:"Super",name:"super",key:"meta"}},altKey:{mac:{icon:"\u2325",name:"option",key:"alt"},windows:{icon:"Alt",name:"alt",key:"alt"},linux:{icon:"Alt",name:"alt",key:"alt"}},shiftKey:{mac:{icon:"\u21E7",name:"shift",key:"shift"},windows:{icon:"Shift",name:"shift",key:"shift"},linux:{icon:"Shift",name:"shift",key:"shift"}},ctrlKey:{mac:{icon:"\u2303",name:"control",key:"ctrl"},windows:{icon:"Ctrl",name:"control",key:"ctrl"},linux:{icon:"Ctrl",name:"control",key:"ctrl"}}};var W=class{constructor(t,e,i){this.input=t;this.opts=e;this.parent=i;this._log=new f(`NumberController ${this.input.title}`,{fg:"darkgoldenrod"}),this.element=u("input",{type:"number",classes:["fracgui-controller","fracgui-controller-number"],value:String(t.state.value),parent:i,tooltip:{text:`Hold <span class="fractils-hotkey">${Ei()}</span> to drag`,placement:"top",delay:1500,parent:i,styles:{background:"var(--fracgui-bg-a)",color:"var(--fracgui-fg-a)","--fractils-hotkey_background":"var(--fracgui-bg-b)","--fractils-hotkey_color":"var(--fracgui-fg-a)"}}}),"step"in e&&(this.element.step=String(e.step)),t.listen(this.element,"pointerenter",this.hoverStart)}element;dragEnabled=!1;dragging=!1;hovering=!1;delta=0;_log;hoverStart=t=>{this._log.fn("hoverStart").debug(t),this.hovering=!0,this.element.classList.add("hovering"),this.maybeEnableDrag(t),this.element.removeEventListener("pointerleave",this.hoverEnd),this.element.addEventListener("pointerleave",this.hoverEnd),document.removeEventListener("keydown",this.maybeEnableDrag),document.addEventListener("keydown",this.maybeEnableDrag)};hoverEnd=t=>{this._log.fn("hoverEnd").debug(t),this.hovering=!1,this.element.classList.remove("hovering"),this.cancelDrag(t),this.element.removeEventListener("pointerleave",this.hoverEnd),document.removeEventListener("keydown",this.maybeEnableDrag)};dragKeyHeld=t=>ki(t);cancelDrag=t=>{this._log.fn("cancelDrag").debug(t),this.dragEnabled=t.type==="keyup"?this.dragKeyHeld(t):!1,document.removeEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),this.dragEnabled||(this.element.style.cursor=this.element.dataset.cursor??"text",this.dragging&&this.dragEnd())};maybeEnableDrag=t=>{this._log.fn("maybeEnableDrag").debug(t),this.dragKeyHeld(t)&&(this.dragEnabled=!0,document.removeEventListener("keyup",this.cancelDrag),document.addEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.addEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),this.element.addEventListener("pointerdown",this.maybeDragStart),this.element.dataset.cursor=Jt(this.element,"cursor"),this.element.style.cursor="ns-resize")};maybeDragStart=()=>{this.hovering&&this.dragEnabled&&this.dragStart()};dragStart=async()=>{this._log.fn("dragStart").debug(),this.dragging=!0,this.element.dispatchEvent(new Event("dragStart")),this.element.tooltip.hide(),this.element.removeEventListener("pointermove",this.drag),this.element.addEventListener("pointermove",this.drag),document.removeEventListener("pointerup",this.dragEnd),document.addEventListener("pointerup",this.dragEnd),this.element.classList.add("dragging"),await this.element.requestPointerLock(),this.element.blur()};dragEnd=()=>{this._log.fn("dragEnd").debug(),this.dragging=!1,this.element.classList.remove("dragging"),this.element.removeEventListener("pointermove",this.drag),document.removeEventListener("pointerup",this.dragEnd),document.exitPointerLock(),this.element.dispatchEvent(new Event("dragEnd"))};drag=t=>{if(!this.dragging)return;let e=t.shiftKey?4:t.altKey?.1:1,i=Math.sign(t.movementY);if(this.delta+=Math.abs(t.movementY),this.delta>+this.element.step){let r=+this.element.step*e*-i;this.element.value=String(this.element.valueAsNumber+r),i===-1?this.element.stepUp(+this.element.step*e):this.element.stepDown(+this.element.step*e),this.delta=0,this.element.dispatchEvent(new Event("input"))}};dispose(){this.element.removeEventListener("pointerenter",this.hoverStart),this.element.removeEventListener("pointerleave",this.hoverEnd),this.element.removeEventListener("pointermove",this.drag),document.removeEventListener("keydown",this.maybeEnableDrag),document.removeEventListener("keyup",this.cancelDrag),this.element.removeEventListener("pointerleave",this.cancelDrag),this.element.removeEventListener("pointerdown",this.maybeDragStart),document.removeEventListener("pointerup",this.dragEnd),this.element.tooltip.dispose(),this.element.remove()}};var Si=(n,t,e)=>{let i=u("input",{type:"range",classes:["fracgui-controller","fracgui-input-number-range"],value:String(n.state.value),parent:e});return"min"in t&&(i.min=String(t.min)),"max"in t&&(i.max=String(t.max)),"step"in t&&(i.step=String(t.step)),n.listen(i,"input",n.set.bind(n)),i};var pr={__type:"NumberInputOptions"},xt=class extends P{__type="InputNumber";_log;initialValue;state;dragEnabled=!1;numberController;numberButtonsController;constructor(t,e){let i=Object.assign({},pr,t,{__type:"NumberInputOptions"}),r=i.binding?.initial??i.value??1;i.value??=r,i.min??=r<=0?r*2:0,i.max??=r<=0?r*-2:r*2;let o=r/100;i.step??=o<=.1?.001:.1,super(i,e),this._log=new f(`InputNumber ${i.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:i,this:this}),this.initialValue=this.resolveInitialValue(i),this.state=this.resolveState(i);let s=u("div",{classes:["fracgui-input-number-container"],parent:this.elements.content});this.numberController=new W(this,i,s),this.numberButtonsController=new he(this,i,s),this.elements.controllers={container:s,input:this.numberController.element,buttons:this.numberButtonsController.elements,range:Si(this,i,s)},this._evm.add(this.state.subscribe(this.refresh)),this._evm.listen(this.elements.controllers.range,"pointerdown",this.lock),this._evm.listen(this.elements.controllers.range,"pointerup",()=>this.unlock()),this._evm.listen(this.elements.controllers.input,"input",this.set),this._evm.listen(this.elements.controllers.input,"dragStart",this.lock),this._evm.listen(this.elements.controllers.input,"dragEnd",()=>this.unlock())}set=t=>{if(this._log.fn("set").debug(t),typeof t>"u")return;let e=t;return t instanceof Event&&t?.target&&"valueAsNumber"in t.target&&(e=t.target.valueAsNumber),this.commit({to:e}),this.state.set(e),this._emit("change",e),this};enable(){return this._log.fn("enable").debug(),this.elements.controllers.input.disabled=!1,super.enable(),this}disable(){return this._log.fn("disable").debug(),this.elements.controllers.input.disabled=!0,super.disable(),this}refresh=()=>{let t=this.state.value;return this._log.fn("refresh").debug(t),this.elements.controllers.range.value=String(t),this.elements.controllers.input.value=String(t),super.refresh(t),this};dispose(){this._log.fn("dispose").debug(),super.dispose()}};var dr={disabled:!1},G,ht,Ht,Ft,$t,zt,wt=class{constructor(t,e){this.input=t;N(this,ht);x(this,"opts");x(this,"element");x(this,"elements");x(this,"select");x(this,"_evm",new S);x(this,"_mode");x(this,"_locked",!1);x(this,"_log");x(this,"updateMode",(t=this.mode)=>{if(this._log.fn("updateMode",t).debug(),this._mode=t,It(this,ht,Ht).call(this)==="text"){this.elements.text.classList.add("visible");for(let[,e]of k(this.elements.numbers))e.classList.remove("visible");L(this,Ft).call(this)}else{this.elements.text.classList.remove("visible");for(let[,e]of k(this.elements.numbers))e.classList.add("visible");this.mode==="rgba"&&(L(this,G).call(this,this.elements.numbers.a,{min:0,max:255,step:1}),L(this,G).call(this,this.elements.numbers.b,{min:0,max:255,step:1}),L(this,G).call(this,this.elements.numbers.c,{min:0,max:255,step:1}),L(this,G).call(this,this.elements.numbers.d,{min:0,max:1,step:.01})),["hsla","hsva"].includes(this.mode)&&(L(this,G).call(this,this.elements.numbers.a,{min:0,max:360,step:1}),L(this,G).call(this,this.elements.numbers.b,{min:0,max:100,step:1}),L(this,G).call(this,this.elements.numbers.c,{min:0,max:100,step:1}),L(this,G).call(this,this.elements.numbers.d,{min:0,max:1,step:.01})),this.elements.select.selected.innerHTML=[...t].map((e,i)=>`<span class="${["a","b","c","d"][i]}">${e}</span>`).join("")}this.refresh()});N(this,G,(t,e)=>{this._log.fn("#setProps",t,e).debug();for(let[i,r]of k(e))t[i]=String(r)});N(this,Ft,()=>{this.elements.text.value=this.color[this.mode.startsWith("hex")?this.mode+"String":this.mode]});N(this,$t);N(this,zt);x(this,"refresh",()=>{this._log.fn("refresh").debug();let t=this.input.state.value.hex8String,e=this.mode;return L(this,$t)===t&&e===L(this,zt)?this:(K(this,$t,t),K(this,zt,e),this._locked?(this._locked=!1,this):(It(this,ht,Ht).call(this)==="text"?L(this,Ft).call(this):(this.elements.numbers.a.value=String(this.a),this.elements.numbers.b.value=String(this.b),this.elements.numbers.c.value=String(this.c),this.elements.numbers.d.value=String(this.d)),this))});let i={...dr,...e};this._log=new f(`ColorComponents ${t.title}`,{fg:"wheat"}),this.opts=i,this._mode=t.mode;let r=i.container??t.elements.controllers.container,o=u("div",{classes:["fracgui-input-color-components-container"],parent:r});this.element=o;let s=u("div",{classes:["fracgui-input-color-components-select-container"],parent:o});this.select=new et({input:this.input,disabled:this.disabled,container:s,options:["hex","hex8","rgba","hsla","hsva"]}),this.select.on("change",p=>{this.updateMode(p.value)});let a=u("div",{classes:["fracgui-input-color-components-numbers-container"],parent:o}),l={a:new W(this.input,this.input.opts,a).element,b:new W(this.input,this.input.opts,a).element,c:new W(this.input,this.input.opts,a).element,d:new W(this.input,this.input.opts,a).element};l.a.classList.add("a"),l.b.classList.add("b"),l.c.classList.add("c"),l.d.classList.add("d");for(let[p,h]of k(l)){let m=()=>{this[p]=+h.value,this.input.set(this.color)};It(this,ht,Ht).call(this)==="text"&&h.classList.add("visible"),this._evm.listen(h,"input",m)}let c=u("input",{classes:["fracgui-controller","fracgui-controller-text","fracgui-input-color-components-text"],parent:o});this._evm.listen(c,"change",p=>{let h=p.target,m=Rt(h.value);m&&(m=m[0].toLowerCase()+m.slice(1),this.input.set(h.value))}),It(this,ht,Ht).call(this)==="text"&&c.classList.add("visible"),this.elements={container:o,title:s,select:this.select.elements,numbers:l,text:c},this.mode=this._mode,typeof e?.disabled<"u"&&(this.disabled=e.disabled)}get color(){return this.input.state.value}get mode(){return this._mode}set mode(t){this._log.fn("set mode",t).debug(),this._mode=t,this.select.selected=t}get a(){return this.mode==="rgba"?this.color.rgba.r:this.color.hsla.h}set a(t){this.mode==="rgba"?this.color.red=t:this.color.hue=t,this._locked=!0,this.input.refresh()}get b(){return this.mode==="rgba"?this.color.rgba.g:this.color.hsla.s}set b(t){this.mode==="rgba"?this.color.green=t:this.color.saturation=t,this._locked=!0,this.input.refresh()}get c(){switch(this.mode){case"rgba":return this.color.blue;case"hsla":return this.color.lightness;case"hsva":default:return this.color.value}}set c(t){this.mode==="rgba"?this.color.blue=t:this.mode==="hsla"?this.color.lightness=t:this.mode==="hsva"&&(this.color.value=t),this._locked=!0,this.input.refresh()}get d(){return this.color.alpha}set d(t){this.color.alpha=t,this._locked=!0,this.input.refresh()}disable(){this.disabled||(this.disabled=!0),this.select.disable(),this.elements.text.disabled=!0;for(let[,t]of k(this.elements.numbers))t.disabled=!0;return this}enable(){this.disabled&&(this.disabled=!1),this.select.enable(),this.elements.text.disabled=!1;for(let[,t]of k(this.elements.numbers))t.disabled=!1;return this}dispose(){this.elements.title.remove(),this.elements.numbers.a.remove(),this.elements.numbers.b.remove(),this.elements.numbers.c.remove(),this.elements.container.remove(),this.elements.text.remove(),this.select.dispose(),this._evm.dispose()}};G=new WeakMap,ht=new WeakSet,Ht=function(){return["rgba","hsla","hsva"].includes(this.mode)?"numbers":"text"},Ft=new WeakMap,$t=new WeakMap,zt=new WeakMap,wt=C([Q],wt);var Gt=(n,t,e,i,r)=>(n-t)*(r-i)/(e-t)+i;function Ii(n,t=50){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{e=null,n(...i)},t)}}var hr={color:"#fff",swatches:[],handleSize:10,container:void 0,disabled:!1},_t=class{constructor(t,e){this.input=t;let i={...hr,...e};this.opts=i,this._log=new f(`ColorPicker ${t.title}`,{fg:"lightgreen"}),this._log.fn("constructor").debug({opts:i,this:this}),this._lastColor=this.input.state.value.clone();let r=t.expanded?{}:{height:"0px"},o=u("div",{classes:["fracgui-input-color-picker-container"],parent:e?.container??t.elements.controllers.container,style:r});this.element=o;let s=u("canvas",{classes:["fracgui-input-color-picker-canvas"],parent:o,height:this._height}),a=Ii(this._updateHandle,100);this._resizeObserver=new ResizeObserver(()=>a()),this._resizeObserver.observe(s);let l=u("div",{classes:["fracgui-input-color-picker-handle"],parent:o,style:{background:t.state.value.hexString}}),c=u("input",{type:"range",classes:["fracgui-input-range","fracgui-input-color-picker-hue"],parent:o,min:0,max:359});this._evm.listen(c,"input",this._updateStateFromHue),Oe(c,{parent:o,text:()=>`${this.input.state.value.hsla.h}`,placement:"top",offsetX:"0px",anchor:{x:"mouse",y:c.querySelector("#thumb")},style:{background:"var(--fracgui-bg-a)",color:"var(--fracgui-fg-a)"}});let p=u("input",{type:"range",classes:["fracgui-input-range","fracgui-input-color-picker-alpha"],parent:o,min:0,max:1,step:.01});this._evm.listen(p,"input",this.setAlpha),Oe(p,{parent:o,text:()=>`${this.input.state.value.alpha}`,placement:"top",offsetX:"0px",anchor:{x:"mouse",y:p.querySelector("#thumb")},style:{background:"var(--fracgui-bg-a)",color:"var(--fracgui-fg-a)"}}),this.elements={container:o,canvas:s,handle:l,hueSlider:c,alphaSlider:p},this.disabled=this.opts.disabled,this._ctx=s.getContext("2d"),this.canvas.width=this._width,this._evm.listen(this.canvas,"click",this._onClick),this._evm.listen(this.canvas,"pointerdown",this._onPointerDown),this._evm.listen(this.input.elements.container,"pointermove",this._onPointerMove,{passive:!0}),this._updateGradients(),setTimeout(this.draw,10),setTimeout(this._updateHandle,20)}opts;elements;element;_ctx;_height=16*3;_width=256;_resizeObserver;_gradientWhite;_gradientBlack;_dragging=!1;_lockCursorPosition=!1;_lastColor;_log;_evm=new S(["pointerdown","pointerup"]);on=this._evm.on.bind(this._evm);get canvas(){return this.elements.canvas}get hue(){return this.input.state.value.hue}get alpha(){return this.input.state.value.alpha}enable=()=>(this.disabled&&(this.disabled=!1),this.elements.container.classList.remove("fracgui-disabled"),this.elements.alphaSlider.disabled=!1,this.elements.hueSlider.disabled=!1,this.elements.canvas.style.pointerEvents="auto",this);disable=()=>(this.disabled||(this.disabled=!0),this.elements.container.classList.add("fracgui-disabled"),this.elements.alphaSlider.disabled=!0,this.elements.hueSlider.disabled=!0,this.elements.canvas.style.pointerEvents="none",this);set(t){this.input.state.value.set(t),this.input.refresh(),this.refresh()}setAlpha=t=>{this.input.state.value.alpha=Number(t.target.value),this.input.refresh()};refresh=()=>{this._log.fn("refresh").debug();let t=this.input.state.value;return this._lastColor?.hex===t.hex8String?this:(this._lastColor=t.clone(),this.elements.hueSlider.value=String(this.hue),this.elements.alphaSlider.value=String(this.alpha),this.elements.alphaSlider.style.color=t.hexString,this.draw(),this._lockCursorPosition?(this.elements.handle.style.background=t.hexString,this._lockCursorPosition=!1):this._updateHandle(),this)};draw=()=>{this._fill(`hsl(${this.hue}, 100%, 50%)`),this._fill(this._gradientWhite),this._fill(this._gradientBlack)};_fill(t){this._ctx.fillStyle=t,this._ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}_updateGradients(){this._gradientWhite=this._ctx.createLinearGradient(0,0,this.canvas.width,0),this._gradientWhite.addColorStop(0,"rgba(255,255,255,1)"),this._gradientWhite.addColorStop(1,"rgba(255,255,255,0)"),this._gradientBlack=this._ctx.createLinearGradient(0,0,0,this.canvas.height),this._gradientBlack.addColorStop(0,"rgba(0,0,0,0)"),this._gradientBlack.addColorStop(1,"rgba(0,0,0,1)")}_pointerUpClickLatch=!1;_onPointerDown=t=>{this._log.fn("_onPointerDown").debug(),this._evm.emit("pointerdown"),this._dragging=!0,this._updateFromMousePosition(t),addEventListener("pointerup",this._onPointerUp,{once:!0})};_onPointerMove=t=>{this._log.fn("_onPointerMove").debug(),this._dragging&&this._updateFromMousePosition(t)};_onPointerUp=()=>{this._log.fn("_onPointerUp").debug(),this._evm.emit("pointerup"),this._dragging=!1,this._pointerUpClickLatch=!0};_onClick=t=>{if(this._log.fn("_onClick"),this._pointerUpClickLatch){this._log.debug("Click latch triggered. Aborting."),this._pointerUpClickLatch=!1;return}this._log.debug(),this._updateFromMousePosition(t),this._dragging=!1};_updateFromMousePosition(t){this._log.fn("_updateFromMousePosition").debug();let{left:e,top:i,width:r,height:o}=this.canvas.getBoundingClientRect(),s=_(t.clientX-e,0,r),a=_(t.clientY-i,0,o),{s:l,v:c}=this._getColorAtPosition(s,a);this.input.state.value.hsv={h:this.hue,s:l,v:c},this.input.set(this.input.state.value),this._drawHandle(this._getHandlePosition(this.input.state.value))}_getColorAtPosition=(t,e)=>{this._log.fn("_getColorAtPosition").debug();let{width:i,height:r}=this.canvas.getBoundingClientRect(),o=this.opts.handleSize/3;return{s:Gt(t,o,i-o,0,100),v:Gt(e,o,r-o,100,0)}};_updateStateFromHue=t=>{this._log.fn("_updateStateFromHue").debug(),this._lockCursorPosition=!0;let e=Number(t.target.value),{s:i,v:r,a:o}=this.input.state.value.hsva;this.input.state.value.hsva={h:e,s:i,v:r,a:o},this.input.set(this.input.state.value),this.elements.handle.style.background=this.input.state.value.hexString,this.draw()};_updateHandle=(t=this.input.state.value)=>{this._drawHandle(this._getHandlePosition(t))};_getHandlePosition=t=>{let{width:e,height:i}=this.canvas.getBoundingClientRect(),r=this.opts.handleSize/2;return{x:Gt(t.hsv.s,0,100,r,e-r),y:Gt(t.hsv.v,0,100,i-r,r)}};_drawHandle=t=>{this.elements.handle.style.transform=`translate(${t.x}px, ${t.y}px)`,this.elements.handle.style.background=this.input.state.value.hexString};dispose(){this._ctx=null,this.elements.alphaSlider.remove(),this.elements.hueSlider.remove(),this.elements.handle.remove(),this.elements.canvas.remove(),this.elements.container.remove(),this._resizeObserver.disconnect(),this._evm.dispose()}};_t=C([Q],_t);function Oi(...n){let t=0,e=[...n],i=e.shift(),r=e.shift();function o(...s){if(t++>500)throw new Error("infinite loop detected! (500 iteration limit)");i&&r&&i.appendChild(r),i=r,r=s.shift(),r&&o(...s)}o(...e)}var fe=class{svg;back;front;check;constructor(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("icon","copy"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round");let e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.classList.add("front"),e.setAttribute("width","13"),e.setAttribute("height","13"),e.setAttribute("rx","1"),e.setAttribute("ry","1"),e.setAttribute("x","8"),e.setAttribute("y","8");let i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.classList.add("back"),i.setAttribute("width","15"),i.setAttribute("height","15"),i.setAttribute("rx","1"),i.setAttribute("ry","1"),i.setAttribute("x","1"),i.setAttribute("y","1");let r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.classList.add("check"),r.setAttribute("d","M17 9l-7 7-4-4"),r.setAttribute("fill","none"),r.setAttribute("stroke-width","2"),t.appendChild(e),t.appendChild(i),t.appendChild(r),this.svg=t,this.back=i,this.front=e,this.check=r,this}appendTo(t){t.appendChild(this.svg)}};var me=class{constructor(t,e,i="Copy"){this.container=t;this.text=e;this.message=i;let r=u("div",{classes:["copy-button"],title:"Copy",attributes:{"aria-label":"Copy",title:"Copy"}}),o=u("div",{classes:["copy-button-svg-container"]});this.button=r,this.icon=new fe,this.button.addEventListener("click",this.copy),Oi(t,this.button,o,this.icon.svg),this.tooltip=new R(this.button,{text:i,placement:"top",offsetY:"6px",delay:300,parent:t,style:{minWidth:"4.25rem",background:"var(--fracgui-bg-a)",color:"var(--fracgui-fg-a)"}})}button;icon;active=!1;outro=!1;#t;tooltip;copy=()=>{if(typeof navigator>"u"||this.active)return;let t=this.text();t&&(typeof t=="object"&&(t=JSON.stringify(t)),navigator.clipboard?.writeText?.(t),clearTimeout(this.#t),this.#e())};#e=()=>{this.active=!0,this.tooltip.show(),this.button.blur(),this.button.classList.add("active"),this.icon.svg.classList.add("active"),this.icon.front.setAttribute("x","5.5"),this.icon.front.setAttribute("y","5.5"),this.icon.front.setAttribute("rx","10"),this.icon.front.setAttribute("ry","10"),this.tooltip.text="Copied!",setTimeout(this.#i,1250)};#i=()=>{this.active=!1,this.outro=!0,this.button.classList.remove("active"),this.icon.svg.classList.remove("active"),this.icon.svg.classList.add("outro"),this.button.classList.add("outro"),this.icon.front.setAttribute("x","8"),this.icon.front.setAttribute("y","8"),this.icon.front.setAttribute("rx","1"),this.icon.front.setAttribute("ry","1"),setTimeout(this.#o,900)};#o=()=>{this.button.classList.remove("outro"),this.icon.svg.classList.remove("outro"),this.outro=!1,this.tooltip.hide(),clearTimeout(this.#t),this.#t=setTimeout(()=>{this.tooltip.text=this.message},300)}};var gr={__type:"ColorInputOptions",value:"#FF0000FF",mode:"hex",expanded:!1},Tt=class n extends P{__type="InputColor";initialValue;state;picker;components;expanded;_mode;get mode(){return this._mode}set mode(t){this._mode=t,this.components.mode=t}_log;constructor(t,e){let i=Object.assign({},gr,t,{__type:"ColorInputOptions"});super(i,e),this.expanded=i.expanded,this._mode=i.mode,this._log=new f(`InputColor ${i.title}`,{fg:"cyan"}),this._log.fn("constructor").debug({opts:i,this:this}).groupEnd(),i.binding?(this.initialValue=new z(i.binding.target[i.binding.key]),this.state=b(this.initialValue.clone()),this._evm.add(this.state.subscribe(s=>{i.binding.target[i.binding.key]=s}))):(this.initialValue=new z(i.value),this.state=b(this.initialValue.clone()));let r=u("div",{classes:["fracgui-input-color-container"],parent:this.elements.content});this.elements.controllers.container=r,this.elements.controllers.currentColor=this._createCurrentColor(r);let o=u("div",{classes:["fracgui-input-color-body"],parent:r});this.picker=new _t(this,{container:o}),this.components=new wt(this,{container:o}),this.elements.controllers.body={container:o,picker:this.picker.elements,components:this.components.elements},this._dirty=()=>this.state.value.hex!==this.initialValue.hex,setTimeout(()=>{this.expanded?this.open():this.close(0)},10),this._emit("change"),this.refresh(),this.picker.on("pointerdown",this._lock),this.picker.on("pointerup",this._unlock)}set(t){if(Z(t))this.commit({to:t.rgba,from:this.state.value.rgba,setter:i=>{this.state.value.set(i),this.state.refresh(),this.refresh()}}),this.state.set(new z(t.rgba));else{let i=new z(t);this.commit({to:i.rgba,from:this.state.value.rgba,setter:r=>{this.state.value.set(r),this.state.refresh(),this.refresh()}}),this.state.set(i)}let e=this.state.value;return this._log.fn("set").debug({v:t,newValue:e,this:this}),this._emit("change",e),this.refresh(e),this}refresh=(t=this.state.value)=>(this._log.fn("refresh").debug({v:t,this:this}),this.elements.controllers.currentColor.display.style.backgroundColor=t.hex,this.picker.refresh(),this.components.refresh(),super.refresh(),this);get aTitle(){return this.mode==="rgba"?"r":"h"}get bTitle(){return this.mode==="rgba"?"g":"s"}get cTitle(){return this.mode==="rgba"?"b":this.mode==="hsla"?"l":"v"}get dTitle(){return"a"}_createCurrentColor(t){let e=u("div",{classes:["fracgui-input-color-current-color-container"],parent:t}),i=u("div",{classes:["fracgui-input-color-current-color-background"],parent:e}),r=u("div",{classes:["fracgui-input-color-current-color-display"],parent:i});this._evm.listen(r,"click",this.togglePicker);let o=new me(e,()=>this.state.value.hex,"Copy Hex");return{container:e,displayBackground:i,display:r,copyButton:o}}static#t="75px";get _pickerContainer(){return this.picker.elements.container}togglePicker=async()=>{this.expanded?await this.close():await this.open()};open=async()=>{this.expanded=!0,this.elements.container.dataset.search_height="100px";let t=this._pickerContainer?.animate([{height:"0px",clipPath:"inset(0 0 100% 0)"},{height:n.#t,clipPath:"inset(0 0 -50% 0)"}],{duration:200,easing:"cubic-bezier(.08,.38,0,0.92)",fill:"forwards"}),e=this.elements.container.animate({maxHeight:"100px",height:"100px"},{duration:200,easing:"cubic-bezier(.08,.38,0,0.92)",fill:"forwards"});this._pickerContainer?.style.setProperty("overflow","visible"),this._pickerContainer?.classList.add("expanded"),await Promise.all([t?.finished,e?.finished]),this._pickerContainer&&document.contains(this._pickerContainer)&&t?.commitStyles(),this.elements.container&&document.contains(this.elements.container)&&e?.commitStyles()};close=async(t=300)=>{this.expanded=!1,delete this.elements.container.dataset.search_height;let e=this._pickerContainer?.animate([{height:n.#t,clipPath:"inset(0 0 -100% 0)"},{height:"0px",clipPath:"inset(0 0 100% 0)"}],{duration:t,easing:"cubic-bezier(.13,.09,.02,.96)",fill:"forwards"}),i=this.elements.container.animate({minHeight:"var(--fracgui-input_height)",maxHeight:"var(--fracgui-input_height)",height:"var(--fracgui-input_height)"},{duration:t,easing:"cubic-bezier(.13,.09,.02,.96)",fill:"forwards"});this._pickerContainer?.style.setProperty("overflow","hidden"),this._pickerContainer?.classList.remove("expanded"),await Promise.all([e?.finished,i?.finished]),this._pickerContainer&&document.contains(this._pickerContainer)&&e?.commitStyles(),this.elements.container&&document.contains(this.elements.container)&&i?.commitStyles()};_lock=()=>{this.lock(this.state.value.rgba)};_unlock=()=>{this.unlock({target:this,to:this.state.value.rgba,setter:t=>{this.state.value.set(t),this.state.refresh(),this._emit("change",this.state.value),this.refresh()}})};enable(){return this.picker.enable(),super.enable(),this}disable(){return this.picker.disable(),super.disable(),this}save(){return super.save({value:this.state.value.hex})}load(t){let e=typeof t=="string"?JSON.parse(t):t;this.id=e.presetId,this.disabled=e.disabled,this.hidden=e.hidden,this.initialValue=new z(e.value),this.set(this.initialValue.clone())}dispose(){this._log.fn("dispose").debug({this:this}),this.picker.dispose(),super.dispose()}};var Ci=(n,t,e)=>u("input",{type:"textarea",classes:["fracgui-controller","fracgui-controller-text"],value:n.state.value,parent:e,attributes:{spellcheck:"false"}});var fr={__type:"TextInputOptions",value:"foo",maxLength:50},kt=class extends P{__type="InputText";initialValue;state;#t;constructor(t,e){let i=Object.assign({},fr,t);super(i,e),this.#t=new f(`InputText ${i.title}`,{fg:"cyan"}),this.#t.fn("constructor").info({opts:i,this:this}),i.binding?(this.initialValue=i.binding.target[i.binding.key],this.state=b(this.initialValue),this._evm.add(this.state.subscribe(o=>{i.binding.target[i.binding.key]=o}))):(this.initialValue=i.value,this.state=b(i.value));let r=u("div",{classes:["fracgui-input-text-container"],parent:this.elements.content});this.elements.controllers={container:r,input:Ci(this,i,r)},this._evm.listen(this.elements.controllers.input,"input",this.set),this._evm.add(this.state.subscribe(()=>{this.refresh()}))}enable(){return super.enable(),this.elements.controllers.input.disabled=!1,this}disable(){return super.disable(),this.elements.controllers.input.disabled=!0,this}set=t=>{if(!(typeof t>"u"))return typeof t!="string"?t?.target&&"value"in t.target&&(this.commit({to:t.target.value}),this.state.set(t.target.value)):(this.commit({to:t}),this.state.set(t)),this._emit("change",this.state.value),this};refresh=()=>{let t=this.state.value;return this.elements.controllers.input.value=t,super.refresh(t),this};dispose(){super.dispose()}};function Ae(n){let o="var(--fracgui-theme-a)",s="var(--fracgui-theme-a)",a=document.createElement("div");a.classList.add("fracgui-folder-icon-container");let l=n.allChildren.length+n.inputs.size;a.style.setProperty("filter",`hue-rotate(${n.hue}deg)`);let c=[{id:1,cx:16.43,cy:11.93,r:1.1103},{id:2,cx:15.13,cy:15.44,r:.8081},{id:3,cx:15.13,cy:8.423,r:.8081},{id:4,cx:12.49,cy:16.05,r:.4788},{id:5,cx:12.42,cy:7.876,r:.545},{id:6,cx:10.43,cy:15.43,r:.2577},{id:7,cx:10.43,cy:8.506,r:.2769},{id:8,cx:17.85,cy:14.59,r:.5635},{id:9,cx:17.85,cy:9.295,r:.5635},{id:10,cx:19.19,cy:12.95,r:.5635},{id:11,cx:19.19,cy:10.9,r:.5635},{id:12,cx:20.38,cy:11.96,r:.2661},{id:13,cx:19.74,cy:14.07,r:.2661},{id:14,cx:19.74,cy:9.78,r:.2661},{id:15,cx:20.7,cy:12.96,r:.2661},{id:16,cx:20.7,cy:10.9,r:.2661},{id:17,cx:21.38,cy:11.96,r:.2661}];function p(O){return`<circle
				class="alt c${O.id}"
				cx="${O.cx*1.1}"
				cy="${O.cy}"
				r="${O.r}"
				style="transition-delay: ${O.id*.05}s;"
			/>`}function h(O){return O.map(X=>p(c[X-1])).join(`
`)}let w=h({0:[],1:[1],2:[2,3],3:[1,2,3],4:[2,3,4,5],5:[1,2,3,4,5],6:[2,3,4,5,6,7],7:[1,2,3,4,5,6,7],8:[1,2,3,4,5,6,7,8],9:[1,2,3,4,5,6,7,8,9],10:[1,2,3,4,5,6,7,8,9,10],11:[1,2,3,4,5,6,7,8,9,10,11],12:[1,2,3,4,5,6,7,8,9,10,11,12],13:[1,2,3,4,5,6,7,8,9,10,11,12,13],14:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],15:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],17:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]}[Math.min(l,c.length)]),y="cubic-bezier(0.36, 0, 0.66, -0.56)",g="cubic-bezier(0.23, 1, 0.320, 1)",v=`
			.fracgui-folder-icon {
				overflow: visible;
				backface-visibility: hidden;
			}

			.fracgui-folder-icon circle, .fracgui-folder-icon line {
				transform-origin: center;

				transition-duration: 0.25s;
				transition-timing-function: ${g};
				backface-visibility: hidden;
			}

			/*//?	Circle A	*/
			.closed .fracgui-folder-icon circle.a {
				transform: scale(1);
				
				stroke: transparent;
				fill: ${o};
				
				transition: all .5s ${y}, stroke 2s ${y}, fill .2s ${y} 0s;
			}
			.fracgui-folder-icon circle.a {
				transform: scale(0.66);

				stroke: ${o};
				fill: ${s};

				transition: all .33s ${y}, stroke 2s ${y}, fill .2s ease-in 0.25s;
			}

			/*//?	Circle Alt	*/
			.closed .fracgui-folder-icon circle.alt {
				transform: translate(-3px, 0) scale(1.8);

				transition-duration: 0.5s;
				transition-timing-function: ${g};
			}
			 .fracgui-folder-icon circle.alt {
				transform: translate(0, 0) scale(0);

				stroke: none;
				fill: ${s};

				transition-duration: 0.75s;
				transition-timing-function: ${g};
			}
		`.trim();return a.innerHTML=`
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="100%"
			height="100%"
			viewBox="0 0 24 24"
			fill="none"
			stroke-width="1"
			stroke-linecap="round"
			stroke-linejoin="round"
			class="fracgui-folder-icon"
			overflow="visible"
		>
			<circle class="a" cx="12" cy="12" r="4" stroke="${s}" fill="${o}" />

			${w}

			<style lang="css">
				${v}
			</style>
		</svg>`.trim(),n.closed.value&&a.classList.add("closed"),a}function Li(n){let t=u("div",{classes:["fracgui-connector-container"]}),e=20,i=n.element.clientHeight,r=1,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","fracgui-connector-svg"),o.setAttribute("width",`${e}`),o.setAttribute("stroke-width",`${r}`),o.setAttribute("viewBox",`0 0 ${e} ${i}`),o.setAttribute("overflow","visible"),o.setAttribute("backface-visibility","hidden"),o.setAttribute("preserveAspectRatio","xMinYMin slice"),o.style.setProperty("filter",`hue-rotate(${n.hue}deg)`);let s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("vector-effect","non-scaling-stroke"),s.setAttribute("fill","none"),s.setAttribute("stroke","var(--fracgui-theme-a)"),s.setAttribute("stroke-width",`${r}`),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("d",`M10,0 Q0,0 0,10 L0,${i}`);let a=n.elements.header.clientHeight;s.setAttribute("transform",`translate(0, ${a/2})`);let l=document.createElementNS("http://www.w3.org/2000/svg","defs"),c=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");c.setAttribute("id","gradient"),c.setAttribute("x1","0%"),c.setAttribute("y1","0%"),c.setAttribute("x2","0%"),c.setAttribute("y2","100%");function p(h,m,w="var(--fracgui-theme-a)"){let y=document.createElementNS("http://www.w3.org/2000/svg","stop");return y.setAttribute("offset",`${h}%`),y.setAttribute("style",`stop-color: ${w}; stop-opacity: ${m}`),c.appendChild(y),y}return p(0,.5),p(1,.5),p(5,.4),p(20,.3),p(40,.2),p(100,.2),s.setAttribute("stroke","url(#gradient)"),l.appendChild(c),o.insertBefore(l,o.firstChild),o.appendChild(s),t.appendChild(o),{container:t,svg:o,path:s}}function Be(n,t){if(!n.graphics?.connector)return;let e=n.graphics.connector.path,i=`${e.getTotalLength()}`;e.style.strokeDasharray=`${i}`;let{duration:r,from:o,to:s,delay:a,easing:l}=t==="open"?{duration:600,delay:0,from:i,easing:"cubic-bezier(.29,.1,.03,.94)",to:"0"}:{duration:150,delay:0,from:"0",easing:"cubic-bezier(.15,.84,.19,.98)",to:i},c=[{strokeDashoffset:o},{strokeDashoffset:s}],p={duration:r,delay:a,easing:l,fill:"forwards"};n.graphics.connector.path.animate(c,p)}function Mi(n,t){return n.composedPath().some(e=>e.classList?.contains(t))}var gt=class{class="fracgui-terminal-icon";element;classes=[this.class,"fracgui-cancel"];constructor(t){let e=t.isRoot?t.elements.header:t.elements.title;t.isRoot&&this.classes.push("fracgui-terminal-icon-root"),this.element=u("div",{parent:e,classes:this.classes,innerHTML:`
                <svg class="icon terminal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="4 17 10 11 4 5"></polyline>
                    <line x1="12" x2="20" y1="19" y2="19"></line>
                </svg>
                `.replaceAll(/\t|\n/g,""),tooltip:{text:"<code>console.log(folder)</code>",delay:1500,placement:"right"},onclick:i=>{i.stopPropagation(),i.preventDefault(),console.log(t)}})}};x(gt,"style",`
        .fracgui-terminal-icon {
            position: absolute;
            right: -1.5rem;
            top: 0;
            bottom: 0;

            width: 16px;
            height: 16px;

            color: var(--fracgui-fg-d);
            transform: translateY(15%);
            opacity: 0;

            transition: opacity 0.2s;
            transition-delay: 0.5s;

            z-index: 1;
        }

        .fracgui-terminal-icon-root {
            right: unset;
            left: 0.5rem;
            top: 0.25rem;
        }


        .fracgui-terminal-icon:hover {
            opacity: 0.75;
        }

        .fracgui-terminal-icon svg {
            width: 100%;
            height: 100%;
        }
    `),gt=C([V],gt);function Pi(n,t){let e=n.length,i=t.length;if(e>i)return!1;if(e===i)return n===t;t:for(let r=0,o=0;r<e;r++){let s=n.charCodeAt(r);for(;o<i;)if(t.charCodeAt(o++)===s)continue t;return!1}return!0}var be=class{constructor(t){this.folder=t;let e=u("div",{classes:["fracgui-toolbar-item","fracgui-search-container"]});t.elements.toolbar.container.prepend(e);let i=u("input",{classes:["fracgui-controller-text","fracgui-search-input","fracgui-cancel"],parent:e});this._evm.listen(i,"input",s=>this.search(s.target.value));let r=u("button",{classes:["fracgui-search-button","fracgui-cancel"],parent:e});this.tooltip=new R(r,{text:this.defaultTooltipText,placement:"left",delay:500});let o=this._searchIcon();return r.appendChild(o),this._evm.listen(r,"click",this.toggle),this.elements={container:e,input:i,button:r,icon:o},this}elements;needle="";showing=!1;tooltip;get defaultTooltipText(){return"Search "+(this.folder.isRoot?"All":this.folder.title)}_evm=new S;search=t=>{this.needle=t;for(let[e,i]of this.folder.allInputs){let r=Pi(this.needle.toLocaleLowerCase(),e.toLowerCase())?"hit":"miss",o=this.needle===""?"hit":r,s=i.elements.container;if(s.dataset.search===o)continue;let a=getComputedStyle(s);s.dataset.search_height??=a.minHeight,s.dataset.search_overflow??=a.overflow??"unset",s.dataset.search_contain??=a.contain??"none",s.dataset.search_opacity??=a.opacity??1,o==="hit"?this._expandInput(s):o==="miss"&&this._collapseInput(s),s.dataset.search=o}};_expandInput=async t=>{if(t.dataset.search==="miss"){t.style.setProperty("overflow",t.dataset.search_overflow),t.style.setProperty("contain",t.dataset.search_contain);let e=t.dataset.search_height??"100%",i=t.animate([{opacity:0,height:"0px",minHeight:"0px"},{opacity:1,height:e,minHeight:e}],{duration:300,easing:"cubic-bezier(0.23, 1, 0.32, 1)",fill:"forwards"});await i.finished,i.commitStyles()}};_collapseInput=async t=>{t.style.setProperty("overflow","hidden"),t.style.setProperty("contain","size");let e=t.animate([{opacity:0,height:"0px",minHeight:"0px"}],{duration:300,easing:"cubic-bezier(0.23, 1, 0.32, 1)",fill:"forwards"});await e.finished,e.commitStyles()};clear=()=>{for(let[,t]of this.folder.allInputs)this._expandInput(t.elements.container)};toggle=t=>{t?.stopImmediatePropagation(),this.showing?this.close():this.open()};_tooltipTimeout;open=()=>{this.showing=!0,this.elements.container.classList.add("active"),this.elements.input.focus(),removeEventListener("click",this._clickOutside),addEventListener("click",this._clickOutside),removeEventListener("keydown",this._escape),addEventListener("keydown",this._escape),this.tooltip.hide(),clearTimeout(this._tooltipTimeout),this._tooltipTimeout=setTimeout(()=>{this.tooltip.text="Cancel (esc)",this.tooltip.placement="top",this.tooltip.offsetX="-40px",this.tooltip.offsetY="-2px"},100);for(let t of this.folder.allChildren)t.closed.value&&(t.element.dataset.searchclosed="true",t.open())};close=()=>{this.showing=!1,this.elements.container.classList.remove("active"),(document.activeElement===this.elements.input||document.activeElement===this.elements.button)&&document.activeElement?.blur(),this.clear(),removeEventListener("click",this._clickOutside),removeEventListener("keydown",this._escape),this.tooltip.hide(),clearTimeout(this._tooltipTimeout),this._tooltipTimeout=setTimeout(()=>{this.tooltip.text=this.defaultTooltipText,this.tooltip.placement="left",this.tooltip.offsetX=ae.offsetX,this.tooltip.offsetY=ae.offsetY},100);for(let t of this.folder.allChildren)t.element.dataset.searchclosed&&(t.element.dataset.searchclosed="",t.close())};_clickOutside=t=>{!this.needle&&!t.composedPath().includes(this.elements.container)&&this.close()};_escape=t=>{t.key==="Escape"&&this.close()};_searchIcon(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("aria-hidden","true"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("fill","none"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round");let e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M13.34 13.34 L19 19"),t.appendChild(e);let i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx","8"),i.setAttribute("cy","8"),i.setAttribute("r","7"),t.appendChild(i),t.classList.add("search-icon"),t.style.pointerEvents="none",t}dispose(){this._evm.dispose(),this.tooltip.dispose(),this.elements.container.remove()}};var mr=Object.freeze({presetId:"",title:"",children:[],closed:!1,hidden:!1,controls:new Map,saveable:!0}),Ri={__type:"InternalFolderOptions",parentFolder:void 0,isRoot:!0,_skipAnimations:!0,gui:void 0,_headerless:!1},Et=class n{__type="Folder";isRoot=!0;id=I();gui;presetId;saveable;children=[];inputs=new Map;root;parentFolder;settingsFolder;closed=b(!1);element;elements={};graphics;evm=new S(["change","refresh","toggle","mount"]);on=this.evm.on.bind(this.evm);_title;_hidden=()=>!1;_log;_disabledTimer;_clickTime=200;_clicksDisabled=!1;_depth=-1;constructor(t){if(!("container"in t))throw new Error("Folder must have a container.");let e=Object.assign({},mr,Ri,{gui:this.gui,isRoot:!0},t);if(this._log=new f(`Folder ${e.title}`,{fg:"DarkSalmon"}),this._log.fn("constructor").debug({opts:e,this:this}),this.isRoot=e.isRoot,this.isRoot)this._depth=0,this.parentFolder=this,this.root=this;else{if(!e.parentFolder)throw new Error("Non-root folders must have a parent folder.");this.parentFolder=e.parentFolder,this._depth=this.parentFolder._depth+1,this.root=this.parentFolder.root}this.gui=e.gui,this._title=e.title??"",this.element=this._createElement(e.container),this.elements=this._createElements(this.element),this.presetId=this.resolvePresetId(e),this.saveable=!!e.saveable,(this.isRoot||e.searchable)&&new be(this),e._skipAnimations&&(this.element.classList.add("instant"),setTimeout(()=>{this.element.classList.remove("instant")},0)),this.hidden=e.hidden?T(e.hidden):()=>!1,this.evm.add(this.closed.subscribe(i=>{i?this.close():this.open(),this.evm.emit("toggle",i)})),this._createGraphics(e._headerless).then(()=>{e.closed&&this.closed.set(e.closed),this.evm.emit("mount")})}get title(){return this._title}set title(t){t!==this._title&&(this._title=t,this.elements.title.animate({opacity:0,transform:"translateY(-0.33rem)"},{duration:75,easing:"ease-out",fill:"forwards"}).onfinish=()=>{this.elements.title.textContent=t,this.elements.title.animate([{opacity:0,transform:"translateY(.33rem)"},{opacity:1,transform:"translateY(0rem)"}],{delay:0,duration:75,easing:"ease-in",fill:"forwards"})})}get hidden(){return this._hidden()}set hidden(t){this._hidden=T(t),this._hidden()?this.hide():this.show()}get allChildren(){return this.children.flatMap(t=>[t,...t.allChildren])}get allInputs(){let t=new Map;for(let e of[this,...this.allChildren])for(let[i,r]of e.inputs.entries())t.set(i,r);return t}isRootFolder(){return this.isRoot}addFolder(t,e){e??={},e.title??=t,this._log.fn("addFolder").debug({options:e,this:this});let i=Object.assign({},Ri,{parentFolder:this,depth:this._depth+1,gui:this.gui}),r={__type:"InternalFolderOptions",container:this.elements.content,isRoot:!1},o=Object.assign({},i,e,r),s=new n(o);return s.on("change",a=>this.evm.emit("change",a)),this.children.push(s),this._createSvgs(),o._headerless&&(s.elements.header.style.display="none"),s}_handleClick(t){if(t.button===0){if(this._log.fn("#handleClick").debug({event:t,this:this}),this.element.removeEventListener("pointerup",this.toggle),this.element.addEventListener("pointerup",this.toggle,{once:!0}),Mi(t,"fracgui-cancel"))return this._disableClicks();clearTimeout(this._disabledTimer),this._disabledTimer=setTimeout(()=>{this.elements.header.removeEventListener("pointermove",this._disableClicks),this.elements.header.addEventListener("pointermove",this._disableClicks,{once:!0}),this._disabledTimer=setTimeout(()=>{this.elements.header.removeEventListener("pointermove",this._disableClicks),this.element.removeEventListener("pointerup",this.toggle),this._clicksDisabled=!1},this._clickTime)},150),this._clicksDisabled}}_disableClicks=()=>{this._clicksDisabled||(this._clicksDisabled=!0,this._log.fn("disable").debug("Clicks DISABLED")),this._clicksDisabled=!0,clearTimeout(this._disabledTimer)};_resetClicks(){this._log.fn("cancel").debug("Clicks ENABLED"),removeEventListener("pointerup",this.toggle),this._clicksDisabled=!1}toggle=()=>{if(this._log.fn("toggle").debug(),clearTimeout(this._disabledTimer),this._clicksDisabled){this._resetClicks();return}if(this.element.classList.contains("fracgui-dragged")){this.element.classList.remove("fracgui-dragged");return}let t=!this.closed.value;this.closed.set(t),this.evm.emit("toggle",t)};open(t=!1){this._log.fn("open").debug(),this.element.classList.remove("closed"),t&&this.closed.set(!1),this._clicksDisabled=!1,this.#e(),Be(this,"open")}close(t=!1){this._log.fn("close").debug(),this.element.classList.add("closed"),t&&this.closed.set(!0),this._clicksDisabled=!1,this.#e(),Be(this,"close")}toggleHidden(){this._log.fn("toggleHidden").debug(),this.element.classList.toggle("hidden")}hide(){this._log.fn("hide").error(),this.element.classList.add("hidden")}show(){this._log.fn("show").debug(),this.element.classList.remove("hidden")}#t;#e=()=>{this.element.classList.add("animating"),clearTimeout(this.#t),this.#t=setTimeout(()=>{this.element.classList.remove("animating")},600)};resolvePresetId=t=>{this._log.fn("resolvePresetId").debug({opts:t,this:this});let e=o=>o.isRootFolder.bind(o)||o.parentFolder!==this?[o.title]:[...e(o.parentFolder),o.title],i=e(this),r=t?.presetId||i.join("__");if(!r){let o=0;for(let s of this.allChildren)s.presetId==r&&o++;o>0&&(r+=o)}return r};save(){if(this._log.fn("save").debug({this:this}),this.saveable!==!0)throw new Error("Attempted to save unsaveable Folder: "+this.title);return{__type:"FolderPreset",id:this.presetId,title:this.title,closed:this.closed.value,hidden:T(this._hidden)(),children:this.children.filter(e=>e.title!==H.settingsFolderTitle&&e.saveable).map(e=>e.save()),inputs:Array.from(this.inputs.values()).filter(e=>e.opts.saveable).map(e=>e.save())}}load(t){this._log.fn("load").debug({preset:t,this:this}),this.closed.set(t.closed),this.hidden=t.hidden;for(let e of this.children){let i=t.children?.find(r=>r.id===e.presetId);i&&e.load(i)}for(let e of this.inputs.values()){let i=t.inputs.find(r=>r.presetId===e.id);i&&e.load(i)}}refresh(){this._log.fn("refresh").debug(this);for(let t of this.inputs.values())t.refresh()}refreshAll(){for(let t of this.allInputs.values())t.refresh();this.evm.emit("refresh")}addMany(t,e){let i=e?.folder??this;for(let[r,o]of Object.entries(t))if(typeof o=="object"){if(Z(o)){this.addColor({title:r,value:o});continue}let s=i.addFolder(r);s.addMany(o,{folder:s})}else{let s={title:r,value:o,binding:{target:t,key:r}};typeof o=="number"&&(o>0?(s.max=o*2,s.step=o/10,s.min=0):o==0?(s.min=-1,s.step=.01,s.max=1):(s.min=o*2,s.step=o/10,s.max=0)),this.add(s)}}add(t,e){let i=this._resolveOptions(t,e),r=this._createInput(i);return this.inputs.set(r.id,r),this._refreshIcon(),r}bind(t,e,i){let r=t[e],o=i??{};o.title??=e,o.binding={target:t,key:e,initial:r};let s=this._createInput(o);return this.inputs.set(s.id,s),this._refreshIcon(),s}addNumber(t,e){let i=this._resolveOptions(t,e),r=new xt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindNumber(t,e,i){let r=this._resolveBinding(t,e,i),o=new xt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addText(t,e){let i=this._resolveOptions(t,e),r=new kt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindText(t,e,i){let r=this._resolveBinding(t,e,i),o=new kt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addColor(t,e){let i=this._resolveOptions(t,e),r=new Tt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindColor(t,e,i){let r=this._resolveBinding(t,e,i),o=new Tt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addButton(t,e){let i=this._resolveOptions(t,e),r=new yt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindButton(t,e,i){let r=this._resolveBinding(t,e,i),o=new yt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addButtonGrid(t,e){let i=this._resolveOptions(t,e),r=new At(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindButtonGrid(t,e,i){let r=this._resolveBinding(t,e,i),o=new At(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addSelect(t,e){let i=this._resolveOptions(t,e),r=new rt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindSelect(t,e,i){let r=this._resolveBinding(t,e,i),o=new rt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}addSwitch(t,e){let i=this._resolveOptions(t,e),r=new vt(i,this);return this.inputs.set(r.id,r),this._refreshIcon(),r}bindSwitch(t,e,i){let r=this._resolveBinding(t,e,i),o=new vt(r,this);return this.inputs.set(o.title,o),this._refreshIcon(),o}_validateOptions(t,e){if(t.binding?.key&&!t.title&&(t.title=t.binding.key),e){let i=t.binding,r=t.value;if(r||(r=i?.target[i?.key]),!r)if(i){let o=!1;if(typeof i.target>"u"&&(o=!0,console.error('\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m Binding "target" is undefined:',i)),typeof i.key>"u"&&(o=!0,console.error('\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m Binding "key" is undefined:',i)),typeof i.target[i.key]>"u"&&(o=!0,console.error(`\x1B[96mgooey\x1B[39m ~ \x1B[91mError\x1B[39m The provided binding key \x1B[33m"${i.key}"\x1B[39m does not exist on provided \x1B[33mtarget\x1B[39m:`,i)),o)throw new Error("gooey ~ Failed to bind input to the provided target object.",{cause:t})}else throw new Error("gooey ~ No value or binding provided.",{cause:t})}return t}_createInput(t){this._log.fn("#createInput").debug(this);let e=this._resolveType(t);switch(t=this._validateOptions(t),e){case"InputText":return new kt(t,this);case"InputNumber":return new xt(t,this);case"InputColor":return new Tt(t,this);case"InputSelect":return new rt(t,this);case"InputButton":return new yt(t,this);case"InputSwitch":return new vt(t,this)}throw new Error("Invalid input type: "+e+" for options: "+t)}_resolveOptions(t,e){let i=typeof t=="string"&&typeof e=="object",r=i?t:e?.title??"",o=i?e:t;return o.title??=r,o}_resolveBinding(t,e,i){let r,o=!1;if(typeof t=="string")r=e??{},r.title=t;else{o=!0;let s=t,a=e;r=i??{},r.binding={target:s,key:a,initial:s[a]}}return this._validateOptions(r,o)}_resolveType(t){this._log.fn("resolveType").debug({options:t,this:this});let e=t.value??t.binding?.target[t.binding.key];if("onClick"in t)return"InputButton";if("options"in t&&Array.isArray(t.options)||F(e))return e??=t.options[0],t.value??=e,"InputSelect";switch(typeof e){case"boolean":return"InputSwitch";case"number":return"InputNumber";case"string":return oe(e)?"InputColor":"InputText";case"function":return"InputButton";case"object":{if(Array.isArray(e))return"InputSelect";if(Z(e))return"InputColor";if(F(e))return"InputSelect";throw new Error("Invalid input view: "+JSON.stringify(e))}default:throw new Error("Invalid input view: "+e)}}_createElement(t){return this._log.fn("#createElement").debug({el:t,this:this}),this.isRoot?u("div",{id:`fracgui-root_${this.id}`,classes:["fracgui-root","fracgui-folder","closed"],dataset:{theme:this.gui.theme??"default"},parent:t}):u("div",{parent:this.parentFolder.elements.content,classes:["fracgui-folder","closed"]})}_createElements(t){this._log.fn("#createElements").debug({element:t,this:this});let e=u("div",{parent:t,classes:["fracgui-header"]});e.addEventListener("pointerdown",this._handleClick.bind(this));let i=u("div",{parent:e,classes:["fracgui-title"],textContent:this.title}),r=u("div",{parent:e,classes:["fracgui-toolbar"]}),o=u("div",{classes:["fracgui-content-wrapper"],parent:t}),s=u("div",{classes:["fracgui-content"],parent:o});return{header:e,toolbar:{container:r},title:i,contentWrapper:o,content:s}}async _createGraphics(t=!1){this._log.fn("createGraphics").debug({this:this}),await Promise.resolve(),this.isRootFolder()||(this.graphics={icon:Ae(this)},this.elements.header.prepend(this.graphics.icon),t||(this.graphics.connector=Li(this),this.element.prepend(this.graphics.connector.container))),!1}_createSvgs(){this._log.fn("#createSvgs").debug({this:this})}get hue(){let t=this.parentFolder.children.indexOf(this),e=this.parentFolder.isRootFolder()?t-1:t,i=this._depth-1;return e*20+i*80}_refreshIcon(){this._log.fn("#refreshIcon").debug(this),this.graphics&&this.graphics.icon.replaceWith(Ae(this))}disposed=!1;dispose(){if(this.disposed&&!1){this._log.fn("dispose").error("Already disposed.",this);return}this.elements.header.removeEventListener("click",this.toggle),this.elements.header.addEventListener("pointerdown",this._handleClick),this.element.remove();for(let t of this.inputs.values())t.dispose();for(let t of this.children)t.dispose();try{this.parentFolder.children.splice(this.parentFolder.children.indexOf(this),1)}catch(t){this._log.fn("dispose").error("Error removing folder from parent",{err:t})}this.disposed=!0}};var ve={__type:"GuiStorageOptions",key:"fracgui",closed:!0,theme:!0,presets:!0,position:!1,size:!1},Dt={__type:"WindowManagerOptions",preserveZ:!1,zFloor:0,bounds:void 0,obstacles:void 0,resizable:{grabberSize:9,color:"var(--bg-d)",sides:["right","left"],corners:[]},draggable:{bounds:void 0,classes:{default:"fracgui-draggable",dragging:"fracgui-dragging",cancel:"fracgui-cancel",dragged:"fracgui-dragged"}}},He={__type:"GuiOptions",title:"gui",storage:!1,closed:!1,position:"top-right",margin:16,container:"body",theme:"default",themeMode:"dark",themes:[Vt,Ge,ze],resizable:!0,draggable:!0},H=class{__type="Gui";id=I();folder;opts;closed;presetManager;dirty=!1;wrapper;container;settingsFolder;_undoManager=new pe;themer;themeEditor;windowManager;_isWindowManagerOwner=!1;_birthday=Date.now();_honeymoon=1e3;_theme;_log;on;addFolder(t,e){return this._honeymoon&&this._birthday-Date.now()<1e3&&(this._honeymoon=!1,this._reveal(!0)),this.folder.addFolder(t,e)}add;addMany;addButtonGrid;addSelect;addButton;addText;addNumber;addSwitch;addColor;constructor(t){let e=A([He,t??{}],{concatArrays:!1});e.container??=document.body;let i=!1;typeof e.storage=="object"&&(e.storage=Object.assign({},ve,e.storage));let r=bt(e.storage,ve);r?(e.storage={...r,key:`${r.key}::${e.title?.toLowerCase().replaceAll(/\s/g,"-")}`},`${e.storage.key}::wm::0::position`in localStorage||(i=!0)):i=!0,this.opts=e,this._log=new f(`Gui ${this.opts.title}`,{fg:"palevioletred"}),this._log.fn("constructor").debug({options:t,opts:e}),this.container=M(this.opts.container)[0],this.wrapper=u("div",{classes:["fracgui-wrapper"],style:{display:"contents"},parent:this.container}),this.folder=new Et({...this.opts,__type:"FolderOptions",container:this.wrapper,gui:this}),this.on=this.folder.on.bind(this.folder),this.addFolder=this.folder.addFolder.bind(this.folder),this.add=this.folder.add.bind(this.folder),this.addMany=this.folder.addMany.bind(this.folder),this.addButtonGrid=this.folder.addButtonGrid.bind(this.folder),this.addSelect=this.folder.addSelect.bind(this.folder),this.addButton=this.folder.addButton.bind(this.folder),this.addText=this.folder.addText.bind(this.folder),this.addNumber=this.folder.addNumber.bind(this.folder),this.addSwitch=this.folder.addSwitch.bind(this.folder),this.addColor=this.folder.addColor.bind(this.folder);let o=s=>{globalThis.navigator?.userAgent?.match(/mac/i)?s.metaKey&&s.key==="z"&&(s.preventDefault(),s.shiftKey?this._undoManager.redo():this._undoManager.undo()):s.ctrlKey&&(s.key==="z"&&(s.preventDefault(),this._undoManager.undo()),s.key==="y"&&(s.preventDefault(),this._undoManager.redo()))};return removeEventListener("keydown",o),addEventListener("keydown",o),this.closed=b(!!this.opts.closed,{key:this.opts.storage?`${this.opts.storage.key}::closed`:void 0}),this.folder.elements.toolbar.settingsButton=this._createSettingsButton(this.folder.elements.toolbar.container),this.settingsFolder=this.folder.addFolder(H.settingsFolderTitle,{closed:!0,hidden:!1,_headerless:!0}),this.themer=this.opts._themer??this._createThemer(this.settingsFolder),this.theme=this.opts.theme,this.presetManager=this._createPresetManager(this.settingsFolder),this.applyAltStyle(this.settingsFolder),this.windowManager??=this._createWindowManager(this.opts,this.opts.storage),this._reveal(i),this}async _reveal(t){if(await Promise.resolve(),!this.container)return;let e=this.wrapper.cloneNode(!0);e.style.visibility="hidden",this.container.prepend(e);let i=e.children[0].getBoundingClientRect();if(e.remove(),typeof this.opts.position=="string"){let r=qt(i,this.opts.position,{bounds:this.opts.container,margin:this.opts.margin});if(t||this.opts.storage&&this.opts.storage.position===!1){let o=this.windowManager?.windows.get(this.folder.element.id);o?.draggableInstance&&(o.draggableInstance.position=r)}else console.error("//todo - set position here or enforce window manager")}this.container.appendChild(this.wrapper),this.folder.element.animate([{opacity:0},{opacity:1}],{fill:"none",duration:400})}_createPresetManager(t){let{presets:e,defaultPreset:i,storage:r}=this.opts,o;return typeof r=="object"&&r.presets&&(o=r.key+"::presets"),new le(this,t,{presets:e,defaultPreset:i,localStorageKey:o})}_createWindowManager(t,e){if(this.windowManager)return this.windowManager;let i;this.opts.draggable&&(i=Object.assign({},Dt.draggable),i.handle=this.folder.elements.header,i.position=this.opts.position,i.localStorageKey=e&&e.key?e.key:void 0,i.bounds=this.container,e&&e.position===!1&&(i.localStorageKey=void 0));let r;if(this.opts.resizable&&(r=Object.assign({},Dt.resizable),r.bounds=this.container,r.localStorageKey=e&&e.key?e.key:void 0,e&&e.size===!1&&(r.localStorageKey=void 0)),t?._windowManager instanceof Pt){let a=t._windowManager;return a.add(this.folder.element,{id:this.id,resizable:r,draggable:i}),a}let o=bt({...Dt,draggable:i,resizable:r},te);this._log.fn("_createWindowManager").debug({windowManagerOpts:o,options:t,opts:this.opts,dragOpts:i,resizeOpts:r});let s=new Pt({...o,draggable:i,resizable:r});return this._isWindowManagerOwner=!0,s.add(this.folder.element,{id:this.id}),s}set theme(t){this._theme=t,this.folder.element.setAttribute("theme",t),this.folder.element.setAttribute("mode",this.themer.mode.value)}get theme(){return this._theme}save(t,e=I(10)){return{__type:"GuiPreset",__version:0,id:e,title:t,data:this.folder.save()}}load(t){this._log.fn("load").debug({preset:t}),this.dirty=!1,this.lockCommits(t),this.folder.load(t.data),Promise.resolve().then(()=>this.unlockCommits())}_undoLock=!1;lockCommit={from:void 0};commit(t){if(this._undoLock){this._log.fn("commit").debug("LOCKED: prevented commit while locked");return}this._log.fn("commit").debug("commited",t),this._undoManager?.commit(t)}lockCommits=t=>{this._undoManager.lockedExternally=!0,this.lockCommit.from=t,this._log.fn(U("lock")).debug("commit",{from:t,lockCommit:this.lockCommit})};unlockCommits=t=>{t??={},t.target??=this,t.from??=this.lockCommit.from,this._undoManager.lockedExternally=!1,this.commit(t),this._log.fn(U("unlock")).debug("commit",{commit:t,lockCommit:this.lockCommit})};_createThemer(t){this._log.fn("createThemer").debug({folder:t});let e,i=this.opts._themer,r={localStorageKey:this.opts.storage?this.opts.storage.key+"::themer":void 0,mode:this.opts.themeMode,autoInit:!this.themer,persistent:!!(this.opts.storage&&this.opts.storage.theme),themes:this.opts.themes,theme:this.opts.themes.find(s=>s.title===this.opts.theme),vars:Le};r.vars=A([Le,r.vars]),i?e=i:(r.wrapper=this.wrapper,e=new ue(this.folder.element,r)),this.folder.evm.add(e.mode.subscribe(()=>{this.settingsFolder&&this.applyAltStyle(this.settingsFolder)}));let o=t.addFolder("ui",{closed:!0});return o.on("mount",()=>{o.graphics?.connector?.svg.style.setProperty("filter","saturate(0.1)"),o.graphics?.icon.style.setProperty("filter","saturate(0)")}),t&&(o.addSelect({title:"theme",labelKey:"title",options:e.themes.value,binding:{target:e,key:"theme"}}),o.addButtonGrid({title:"mode",activeOnClick:!0,value:[["light","dark","system"].map(s=>({text:s,onClick:()=>e?.mode.set(s),active:()=>e?.mode.value===s}))]})),e}isGui(){return this.__type==="Gui"}_createSettingsButton(t){let e=u("button",{parent:t,classes:["fracgui-toolbar-item","fracgui-settings-button"],innerHTML:yi,tooltip:{text:()=>this.settingsFolder?.closed.value?"Open Settings":"Close Settings",placement:"left",delay:750,delayOut:0,hideOnClick:!0}});return e.addEventListener("click",()=>{this.settingsFolder.toggle(),this.folder.elements.toolbar.settingsButton?.classList.toggle("open",!this.settingsFolder.closed.value)}),e}applyAltStyle(t){switch(this._setVar(t.elements.content,"box-shadow",`0px 0px 10px 0px hsl(10deg, 0%, var(--${d}-shadow-lightness), inset`),t.elements.content.style.setProperty("background",`--${d}-folder_background`),this._setProps(t.element,[["background",`color-mix(in sRGB, var(--${d}-bg-b) 100%, transparent)`]]),this.themer?.activeMode){case"dark":{this._setVars(t.elements.contentWrapper,[["input-container_color",`var(--${d}-fg-b)`],["folder-header_background",`color-mix(in sRGB, var(--${d}-bg-a) 75%, transparent)`],["controller-dim_background",`color-mix(in sRGB, var(--${d}-bg-a) 50%, transparent)`],["controller_background",`color-mix(in sRGB, var(--${d}-bg-c) 50%, transparent)`]]);break}case"light":{this._setVars(t.elements.contentWrapper,[["folder-header_background",`color-mix(in sRGB, var(--${d}-bg-a) 60%, transparent)`],["controller_background",`var(--${d}-light-a)`]]);break}}}_setProps(t,e){for(let[i,r]of e)t.style.setProperty(i,r)}_setVar(t,e,i){t.style.setProperty(`--${d}-${e}`,i),Promise.resolve().then(()=>{t.style.getPropertyValue(`--${d}-${e}`)||console.warn(`No property found for --${d}-${e}`)})}_setVars(t,e){for(let[i,r]of e)this._setVar(t,i,r)}dispose=()=>{this._log.fn("dispose").debug(this),this.themer?.dispose(),this._isWindowManagerOwner&&(this.windowManager?.dispose(),this.container?.remove()),this.settingsFolder?.dispose(),this.folder?.dispose()}};x(H,"style",De),x(H,"settingsFolderTitle","fracgui-settings-folder"),H=C([V],H);return zi(br);})();
//! We should use the same bounds as Draggable...
